function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},i={},n={},s={}.hasOwnProperty,r="components/",a=function(t,e){var i=0;e&&(0===e.indexOf(r)&&(i=r.length),e.indexOf("/",i)>0&&(e=e.substring(i,e.indexOf("/",i))));var s=n[t+"/index.js"]||n[e+"/deps/"+t+"/index.js"];return s?r+s.substring(0,s.length-".js".length):t},o=/^\.\.?(\/|$)/,h=function(t,e){for(var i,n=[],s=(o.test(e)?t+"/"+e:e).split("/"),r=0,a=s.length;a>r;r++)i=s[r],".."===i?n.pop():"."!==i&&""!==i&&n.push(i);return n.join("/")},l=function(t){return t.split("/").slice(0,-1).join("/")},u=function(e){return function(i){var n=h(l(e),i);return t.require(n,e)}},c=function(t,e){var n={id:t,exports:{}};return i[t]=n,e(n.exports,u(t),n),n.exports},d=function(t,n){var r=h(t,".");if(null==n&&(n="/"),r=a(t,n),s.call(i,r))return i[r].exports;if(s.call(e,r))return c(r,e[r]);var o=h(r,"./index");if(s.call(i,o))return i[o].exports;if(s.call(e,o))return c(o,e[o]);throw new Error('Cannot find module "'+t+'" from "'+n+'"')};d.alias=function(t,e){n[e]=t},d.register=d.define=function(t,i){if("object"==typeof t)for(var n in t)s.call(t,n)&&(e[n]=t[n]);else e[t]=i},d.list=function(){var t=[];for(var i in e)s.call(e,i)&&t.push(i);return t},d.brunch=!0,d._cache=i,t.require=d}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};if(function(t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.jade=t()}}(function(){return function t(e,i,n){function s(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(t,e,i){"use strict";function n(t){return null!=t&&""!==t}function s(t){return(Array.isArray(t)?t.map(s):t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(n).join(" ")}function r(t){return o[t]||t}function a(t){var e=String(t).replace(h,r);return e===""+t?t:e}i.merge=function l(t,e){if(1===arguments.length){for(var i=t[0],s=1;s<t.length;s++)i=l(i,t[s]);return i}var r=t["class"],a=e["class"];(r||a)&&(r=r||[],a=a||[],Array.isArray(r)||(r=[r]),Array.isArray(a)||(a=[a]),t["class"]=r.concat(a).filter(n));for(var o in e)"class"!=o&&(t[o]=e[o]);return t},i.joinClasses=s,i.cls=function(t,e){for(var n=[],r=0;r<t.length;r++)e&&e[r]?n.push(i.escape(s([t[r]]))):n.push(s(t[r]));var a=s(n);return a.length?' class="'+a+'"':""},i.style=function(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},i.attr=function(t,e,n,s){return"style"===t&&(e=i.style(e)),"boolean"==typeof e||null==e?e?" "+(s?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?(-1!==JSON.stringify(e).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),e&&"function"==typeof e.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'"):n?(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+i.escape(e)+'"'):(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e+'"')},i.attrs=function(t,e){var n=[],r=Object.keys(t);if(r.length)for(var a=0;a<r.length;++a){var o=r[a],h=t[o];"class"==o?(h=s(h))&&n.push(" "+o+'="'+h+'"'):n.push(i.attr(o,h,!1,e))}return n.join("")};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},h=/[&<>"]/g;i.escape=a,i.rethrow=function u(e,i,n,s){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&i||s))throw e.message+=" on line "+n,e;try{s=s||t("fs").readFileSync(i,"utf8")}catch(r){u(e,null,n)}var a=3,o=s.split("\n"),h=Math.max(n-a,0),l=Math.min(o.length,n+a),a=o.slice(h,l).map(function(t,e){var i=e+h+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw e.path=i,e.message=(i||"Jade")+":"+n+"\n"+a+"\n\n"+e.message,e},i.DebugItem=function(t,e){this.lineno=t,this.filename=e}},{fs:2}],2:[function(t,e,i){},{}]},{},[1])(1)}),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(e){}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},s=i.prototype,r=n.prototype,a=t.FileReaderSync,o=function(t){this.code=this[this.name=t]},h="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=h.length,u=t.URL||t.webkitURL||t,c=u.createObjectURL,d=u.revokeObjectURL,f=u,p=t.btoa,g=t.atob,_=t.ArrayBuffer,m=t.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=r.fake=!0;l--;)o.prototype[h[l]]=l+1;return u.createObjectURL||(f=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(v),i.origin=e&&e[1])),i}),f.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof n?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):c?c.call(u,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(u,t)},s.append=function(t){var i=this.data;if(m&&(t instanceof _||t instanceof m)){for(var s="",r=new m(t),h=0,l=r.length;l>h;h++)s+=String.fromCharCode(r[h]);i.push(s)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new o("NOT_READABLE_ERR");var u=new a;i.push(u.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&g?i.push(g(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},s.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},s.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,i){var s=arguments.length;return 3>s&&(i=null),new n(this.data.slice(t,s>1?e:this.data.length),i,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},i}(t);t.Blob=function(t,e){var n=e?e.type||"":"",s=new i;if(t)for(var r=0,a=t.length;a>r;r++)Uint8Array&&t[r]instanceof Uint8Array?s.append(t[r].buffer):s.append(t[r]);var o=s.getBlob(n);return!o.slice&&o.webkitSlice&&(o.slice=o.webkitSlice),o};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),!function(t){"use strict";"object"==typeof exports?module.exports=t(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(t){"use strict";var e=function(e,i){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,i&&t.extend(this.colors,i),e&&(void 0!==e.toLowerCase?(e+="",this.setColor(e)):void 0!==e.h&&(this.value=e))};e.prototype={constructor:e,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:void 0!==t.toLowerCase?parseFloat(t):1},isTransparent:function(t){return t?(t=t.toLowerCase().trim(),"transparent"===t||t.match(/#?00000000/)||t.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/)):!1},rgbaIsTransparent:function(t){return 0===t.r&&0===t.g&&0===t.b&&0===t.a},setColor:function(t){t=t.toLowerCase().trim(),t&&(this.isTransparent(t)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1})},stringToHSB:function(e){e=e.toLowerCase();var i;"undefined"!=typeof this.colors[e]&&(e=this.colors[e],i="alias");var n=this,s=!1;return t.each(this.stringParsers,function(t,r){var a=r.re.exec(e),o=a&&r.parse.apply(n,[a]),h=i||r.format||"rgba";return o?(s=h.match(/hsla?/)?n.RGBtoHSB.apply(n,n.HSLtoRGB.apply(n,o)):n.RGBtoHSB.apply(n,o),n.origFormat=h,!1):!0}),s},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,i,n){t||(t=this.value.h,e=this.value.s,i=this.value.b),t*=360;var s,r,a,o,h;return t=t%360/60,h=i*e,o=h*(1-Math.abs(t%2-1)),s=r=a=i-h,t=~~t,s+=[h,o,0,0,o,h][t],r+=[o,h,h,o,0,0][t],a+=[0,0,o,h,h,o][t],{r:Math.round(255*s),g:Math.round(255*r),b:Math.round(255*a),a:n||this.value.a}},toHex:function(t,e,i,n){var s=this.toRGB(t,e,i,n);return this.rgbaIsTransparent(s)?"transparent":"#"+(1<<24|parseInt(s.r)<<16|parseInt(s.g)<<8|parseInt(s.b)).toString(16).substr(1)},toHSL:function(t,e,i,n){t=t||this.value.h,e=e||this.value.s,i=i||this.value.b,n=n||this.value.a;var s=t,r=(2-e)*i,a=e*i;return a/=r>0&&1>=r?r:2-r,r/=2,a>1&&(a=1),{h:isNaN(s)?0:s,s:isNaN(a)?0:a,l:isNaN(r)?0:r,a:isNaN(n)?0:n}},toAlias:function(t,e,i,n){var s=this.toHex(t,e,i,n);for(var r in this.colors)if(this.colors[r]===s)return r;return!1},RGBtoHSB:function(t,e,i,n){t/=255,e/=255,i/=255;var s,r,a,o;return a=Math.max(t,e,i),o=a-Math.min(t,e,i),s=0===o?null:a===t?(e-i)/o:a===e?(i-t)/o+2:(t-e)/o+4,s=(s+360)%6*60/360,r=0===o?0:o/a,{h:this._sanitizeNumber(s),s:r,b:a,a:this._sanitizeNumber(n)}},HueToRGB:function(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t},HSLtoRGB:function(t,e,i,n){0>e&&(e=0);var s;s=.5>=i?i*(1+e):i+e-i*e;var r=2*i-s,a=t+1/3,o=t,h=t-1/3,l=Math.round(255*this.HueToRGB(r,s,a)),u=Math.round(255*this.HueToRGB(r,s,o)),c=Math.round(255*this.HueToRGB(r,s,h));return[l,u,c,this._sanitizeNumber(n)]},toString:function(t){t=t||"rgba";var e=!1;switch(t){case"rgb":return e=this.toRGB(),this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":return e=this.toRGB(),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":return e=this.toHSL(),"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)";case"hsla":return e=this.toHSL(),"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return e}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]?this.colors[t.toLowerCase()]:!1}};var i={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},n=function(n,s){if(this.element=t(n).addClass("colorpicker-element"),this.options=t.extend(!0,{},i,this.element.data(),s),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?t(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new e(this.options.color!==!1?this.options.color:this.getValue(),this.options.colorSelectors),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.options.color!==!1&&(this.updateInput(this.color),this.updateData(this.color)),this.picker=t(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format||this.options.format===!1)&&this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.inline===!0&&this.picker.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var r=this;t.each(this.options.colorSelectors,function(e,i){var n=t("<i />").css("background-color",i).data("class",e);n.click(function(){r.setValue(t(this).css("background-color"))}),r.picker.find(".colorpicker-selectors").append(n)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",t.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:t("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":t.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":t.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":t.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":t.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":t.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":t.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":t.proxy(this.show,this),"focus.colorpicker":t.proxy(this.show,this)}),this.update(),t(t.proxy(function(){this.element.trigger("create")},this))};n.Color=e,n.prototype={constructor:n,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component||this.element,i=e[t]();"right"===this.options.align&&(i.left-=this.picker.outerWidth()-e.outerWidth()),this.picker.css({top:i.top+e.outerHeight(),left:i.left})},show:function(e){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),t(window).on("resize.colorpicker",t.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),this.options.inline===!1&&t(window.document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),t(window).off("resize.colorpicker",this.reposition),t(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){if(t=t||this.color.toString(this.format),this.input!==!1){if(this.options.colorSelectors){var i=new e(t,this.options.colorSelectors),n=i.toAlias();"undefined"!=typeof this.options.colorSelectors[n]&&(t=n)}this.input.prop("value",t)}return t},updatePicker:function(t){void 0!==t&&(this.color=new e(t,this.options.colorSelectors));var i=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");return 0!==n.length?(this.options.horizontal===!1?(i=this.options.sliders,n.eq(1).css("top",i.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",i.alpha.maxTop*(1-this.color.value.a))):(i=this.options.slidersHorz,n.eq(1).css("left",i.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",i.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:i.saturation.maxTop-this.color.value.b*i.saturation.maxTop,left:this.color.value.s*i.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t):void 0},updateComponent:function(t){if(t=t||this.color.toString(this.format),this.component!==!1){var e=this.component.find("i").eq(0);e.length>0?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e;return(this.getValue(!1)!==!1||t===!0)&&(e=this.updateComponent(),this.updateInput(e),this.updateData(e),this.updatePicker()),e},setValue:function(t){this.color=new e(t,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){t=void 0===t?"#000000":t;var e;return e=this.hasInput()?this.input.val():this.element.data("color"),(void 0===e||""===e||null===e)&&(e=t),e},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var i=t(e.target),n=i.closest("div"),s=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=t.extend({},s.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=t.extend({},s.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=t.extend({},s.alpha)}var r=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=e.pageX-r.left,this.currentSlider.top=e.pageY-r.top,this.mousePointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"touchmove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this),"touchend.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=i+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(t){this.keyup(t)},keyup:function(t){38===t.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===t.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new e(this.input.val(),this.options.colorSelectors),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},t.colorpicker=n,t.fn.colorpicker=function(e){var i,s=arguments,r=this.each(function(){var r=t(this),a=r.data("colorpicker"),o="object"==typeof e?e:{};a||"string"==typeof e?"string"==typeof e&&(i=a[e].apply(a,Array.prototype.slice.call(s,1))):r.data("colorpicker",new n(this,o))});return"getValue"===e?i:r},t.fn.colorpicker.constructor=n}),!function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var e;try{e=require("jquery")}catch(i){e=null}module.exports=t(e)}else window&&(window.Slider=t(window.jQuery))}(function(t){var e;return function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function s(e,i){t.fn[e]=function(s){if("string"==typeof s){for(var a=n.call(arguments,1),o=0,h=this.length;h>o;o++){var l=this[o],u=t.data(l,e);if(u)if(t.isFunction(u[s])&&"_"!==s.charAt(0)){var c=u[s].apply(u,a);if(void 0!==c&&c!==u)return c}else r("no such method '"+s+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+s+"'")}return this}var d=this.map(function(){var n=t.data(this,e);return n?(n.option(s),n._init()):(n=new i(this,s),t.data(this,e,n)),t(this)});return!d||d.length>1?d:d[0]}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),s(t,e)},t.bridget}}var n=Array.prototype.slice;i(t)}(t),function(t){function i(e,i){function n(t,e){var i="data-slider-"+e.replace(/_/g,"-"),n=t.getAttribute(i);try{return JSON.parse(n)}catch(s){return n}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),i=i?i:{};for(var r=Object.keys(this.defaultOptions),a=0;a<r.length;a++){var o=r[a],h=i[o];h="undefined"!=typeof h?h:n(this.element,o),h=null!==h?h:this.defaultOptions[o],this.options||(this.options={}),this.options[o]=h}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var l,u,c,d,f,p=this.element.style.width,g=!1,_=this.element.parentNode;if(this.sliderElem)g=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var m=document.createElement("div");m.className="slider-track",u=document.createElement("div"),u.className="slider-track-low",l=document.createElement("div"),l.className="slider-selection",c=document.createElement("div"),c.className="slider-track-high",d=document.createElement("div"),d.className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),f=document.createElement("div"),f.className="slider-handle max-slider-handle",f.setAttribute("role","slider"),f.setAttribute("aria-valuemin",this.options.min),f.setAttribute("aria-valuemax",this.options.max),m.appendChild(u),m.appendChild(l),m.appendChild(c);var v=Array.isArray(this.options.labelledby);if(v&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),v&&this.options.labelledby[1]&&f.setAttribute("aria-labelledby",this.options.labelledby[1]),!v&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),f.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(a=0;a<this.options.ticks.length;a++){var y=document.createElement("div");y.className="slider-tick",this.ticks.push(y),m.appendChild(y)}l.className+=" tick-slider-selection"}if(m.appendChild(d),m.appendChild(f),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",a=0;a<this.options.ticks_labels.length;a++){var b=document.createElement("div"),w=0===this.options.ticks_positions.length,x=this.options.reversed&&w?this.options.ticks_labels.length-(a+1):a;b.className="slider-tick-label",b.innerHTML=this.options.ticks_labels[x],this.tickLabels.push(b),this.tickLabelContainer.appendChild(b)}var C=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var i=document.createElement("div");i.className="tooltip-inner",t.appendChild(e),t.appendChild(i)},k=document.createElement("div");k.className="tooltip tooltip-main",k.setAttribute("role","presentation"),C(k);var S=document.createElement("div");S.className="tooltip tooltip-min",S.setAttribute("role","presentation"),C(S);var T=document.createElement("div");T.className="tooltip tooltip-max",T.setAttribute("role","presentation"),C(T),this.sliderElem.appendChild(m),this.sliderElem.appendChild(k),this.sliderElem.appendChild(S),this.sliderElem.appendChild(T),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),_.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),s[this.options.scale]&&(this.options.scale=s[this.options.scale]),g===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),
this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=p,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=u||this.trackLow,this.trackSelection=l||this.trackSelection,this.trackHigh=c||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=f||this.handle2,g===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),a=0;a<this.ticks.length;a++)this._removeClass(this.ticks[a],"round triangle hide");var I=["round","triangle","custom"],A=-1!==I.indexOf(this.options.handle);if(A)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),a=0;a<this.ticks.length;a++)this._addClass(this.ticks[a],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var n={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},s={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min),i=!0;if(this.options.ticks_positions.length>0){for(var n,s,r,a=0,o=1;o<this.options.ticks_positions.length;o++)if(t<=this.options.ticks_positions[o]){n=this.options.ticks[o-1],r=this.options.ticks_positions[o-1],s=this.options.ticks[o],a=this.options.ticks_positions[o];break}var h=(t-r)/(a-r);e=n+h*(s-n),i=!1}var l=i?this.options.min:0,u=l+Math.round(e/this.options.step)*this.options.step;return u<this.options.min?this.options.min:u>this.options.max?this.options.max:u},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var e,i,n,s=0,r=0;r<this.options.ticks.length;r++)if(t<=this.options.ticks[r]){e=r>0?this.options.ticks[r-1]:0,n=r>0?this.options.ticks_positions[r-1]:0,i=this.options.ticks[r],s=this.options.ticks_positions[r];break}if(r>0){var a=(t-e)/(i-e);return n+a*(s-n)}}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),i=Math.log(this.options.max),n=Math.exp(e+(i-e)*t/100);return n=this.options.min+Math.round((n-this.options.min)/this.options.step)*this.options.step,n<this.options.min?this.options.min:n>this.options.max?this.options.max:n},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),i=0===this.options.min?0:Math.log(this.options.min),n=0===t?0:Math.log(t);return 100*(n-i)/(e-i)}}};if(e=function(t,e){return i.call(this,t,e),this},e.prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,i){t||(t=0);var n=this.getValue();this._state.value=this._validateInputValue(t);var s=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=s(this._state.value[0]),this._state.value[1]=s(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=s(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var r=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(r),e===!0&&this._trigger("slide",r),n!==r&&i===!0&&this._trigger("change",{oldValue:n,newValue:r}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(e,i){t?(this.$element.off(e,i),this.$sliderElem.off(e,i)):this._unbindNonQueryEventHandler(e,i)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),i.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,e){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var i=this.eventToCallbackMap[t];if(void 0!==i)for(var n=0;n<i.length;n++)if(i[n]===e){i.splice(n,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var i=t[e];this.eventToCallbackMap[i]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var t;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var e="vertical"===this.options.orientation?"height":"width",i="vertical"===this.options.orientation?"marginTop":"marginLeft",n=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var s=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[i]=-n/2+"px"),s=this.tickLabelContainer.offsetHeight;else for(r=0;r<this.tickLabelContainer.childNodes.length;r++)this.tickLabelContainer.childNodes[r].offsetHeight>s&&(s=this.tickLabelContainer.childNodes[r].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=s+"px")}for(var r=0;r<this.options.ticks.length;r++){var a=this.options.ticks_positions[r]||this._toPercentage(this.options.ticks[r]);this.options.reversed&&(a=100-a),this.ticks[r].style[this.stylePos]=a+"%",this._removeClass(this.ticks[r],"in-selection"),this.options.range?a>=t[0]&&a<=t[1]&&this._addClass(this.ticks[r],"in-selection"):"after"===this.options.selection&&a>=t[0]?this._addClass(this.ticks[r],"in-selection"):"before"===this.options.selection&&a<=t[0]&&this._addClass(this.ticks[r],"in-selection"),this.tickLabels[r]&&(this.tickLabels[r].style[e]=n+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[r]?(this.tickLabels[r].style.position="absolute",this.tickLabels[r].style[this.stylePos]=a+"%",this.tickLabels[r].style[i]=-n/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[r].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var o;if(this.options.range){o=this.options.formatter(this._state.value),this._setText(this.tooltipInner,o),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var h=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,h);var l=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,l),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else o=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,o),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%",this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var u=this.tooltip_min.getBoundingClientRect(),c=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?u.right>c.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):u.right>c.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(t){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var i=Math.abs(this._state.percentage[0]-e),n=Math.abs(this._state.percentage[1]-e);this._state.dragged=n>i?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var s=this._calculateValue();return this._trigger("slideStart",s),this._setDataVal(s),this.setValue(s,!1,!0),this._pauseEvent(t),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var i;switch(e.keyCode){case 37:case 40:i=-1;break;case 39:case 38:i=1}if(i){if(this.options.natural_arrow_keys){var n="vertical"===this.options.orientation&&!this.options.reversed,s="horizontal"===this.options.orientation&&this.options.reversed;(n||s)&&(i=-i)}var r=this._state.value[t]+i*this.options.step;return this.options.range&&(r=[t?this._state.value[0]:r,t?r:this._state.value[1]]),this._trigger("slideStart",r),this._setDataVal(r),this.setValue(r,!0,!0),this._setDataVal(r),this._trigger("slideStop",r),this._layout(),this._pauseEvent(e),!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var i=this._calculateValue(!0);return this.setValue(i,!0,!0),!1},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var i=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<i?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>i&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var i=[e,1/0],n=0;n<this.options.ticks.length;n++){var s=Math.abs(this.options.ticks[n]-e);s<=i[1]&&(i=[this.options.ticks[n],s])}if(i[1]<=this.options.ticks_snap_bounds)return i[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var i=t.toFixed(e);return parseFloat(i)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=t[this.mousePos],i=this._state.offset[this.stylePos],n=e-i,s=n/this._state.size*100;return s=Math.round(s/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(s=100-s),Math.max(0,Math.min(100,s))},_validateInputValue:function(t){if("number"==typeof t)return t;if(Array.isArray(t))return this._validateArray(t),t;throw new Error(n.formatInvalidInputErrorMsg(t))},_validateArray:function(t){for(var e=0;e<t.length;e++){var i=t[e];if("number"!=typeof i)throw new Error(n.formatInvalidInputErrorMsg(i))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(e,i){i=i||0===i?i:void 0;var n=this.eventToCallbackMap[e];if(n&&n.length)for(var s=0;s<n.length;s++){var r=n[s];r(i)}t&&this._triggerJQueryEvent(e,i)},_triggerJQueryEvent:function(t,e){var i={type:t,value:e};this.$element.trigger(i),this.$sliderElem.trigger(i)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){"undefined"!=typeof t.innerText?t.innerText=e:"undefined"!=typeof t.textContent&&(t.textContent=e)},_removeClass:function(t,e){for(var i=e.split(" "),n=t.className,s=0;s<i.length;s++){var r=i[s],a=new RegExp("(?:\\s|^)"+r+"(?:\\s|$)");n=n.replace(a," ")}t.className=n.trim()},_addClass:function(t,e){for(var i=e.split(" "),n=t.className,s=0;s<i.length;s++){var r=i[s],a=new RegExp("(?:\\s|^)"+r+"(?:\\s|$)"),o=a.test(n);o||(n+=" "+r)}t.className=n.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop;return e},_offset:function(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}},_css:function(e,i,n){if(t)t.style(e,i,n);else{var s=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()});e.style[s]=n}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e=this.options.tooltip_position||"right",i="left"===e?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[i]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t){var r=t.fn.slider?"bootstrapSlider":"slider";t.bridget(r,e)}}(t),e}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.toggle"),r="object"==typeof e&&e;s||n.data("bs.toggle",s=new i(this,r)),"string"==typeof e&&s[e]&&s[e]()})}var i=function(e,i){this.$element=t(e),this.options=t.extend({},this.defaults(),i),this.render()};i.VERSION="2.2.0",i.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null},i.prototype.defaults=function(){return{on:this.$element.attr("data-on")||i.DEFAULTS.on,off:this.$element.attr("data-off")||i.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||i.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||i.DEFAULTS.offstyle,size:this.$element.attr("data-size")||i.DEFAULTS.size,style:this.$element.attr("data-style")||i.DEFAULTS.style,width:this.$element.attr("data-width")||i.DEFAULTS.width,height:this.$element.attr("data-height")||i.DEFAULTS.height}},i.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var e="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",i=t('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+e),n=t('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+e+" active"),s=t('<span class="toggle-handle btn btn-default">').addClass(e),r=t('<div class="toggle-group">').append(i,n,s),a=t('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(e).addClass(this.options.style);this.$element.wrap(a),t.extend(this,{$toggle:this.$element.parent(),$toggleOn:i,$toggleOff:n,$toggleGroup:r}),this.$toggle.append(r);var o=this.options.width||Math.max(i.outerWidth(),n.outerWidth())+s.outerWidth()/2,h=this.options.height||Math.max(i.outerHeight(),n.outerHeight());i.addClass("toggle-on"),n.addClass("toggle-off"),this.$toggle.css({width:o,height:h}),this.options.height&&(i.css("line-height",i.height()+"px"),n.css("line-height",n.height()+"px")),this.update(!0),this.trigger(!0)},i.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},i.prototype.on=function(t){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(t||this.trigger()))},i.prototype.off=function(t){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(t||this.trigger()))},i.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},i.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},i.prototype.update=function(t){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(t):this.off(t)},i.prototype.trigger=function(e){this.$element.off("change.bs.toggle"),e||this.$element.change(),this.$element.on("change.bs.toggle",t.proxy(function(){this.update()},this))},i.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var n=t.fn.bootstrapToggle;t.fn.bootstrapToggle=e,t.fn.bootstrapToggle.Constructor=i,t.fn.toggle.noConflict=function(){return t.fn.bootstrapToggle=n,this},t(function(){t("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),t(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(e){var i=t(this).find("input[type=checkbox]");i.bootstrapToggle("toggle"),e.preventDefault()})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var s=t(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=t(r);e&&e.preventDefault(),a.length||(a=s.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),r="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,r)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),a="string"==typeof e?e:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof e?s.to(e):a?s[a]():r.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var s="prev"==t?-1:1,r=(i+s)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),
this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,s),a=this.interval,o="next"==e?"left":"right",h=this;if(r.hasClass("active"))return this.sliding=!1;var l=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:l,direction:o});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(r)]);c&&c.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:l,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,s.addClass(o),r.addClass(o),s.one("bsTransitionEnd",function(){r.removeClass([e,o].join(" ")).addClass("active"),s.removeClass(["active",o].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(d)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),r=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var a=t.extend({},r.data(),s.data()),o=s.attr("data-slide-to");o&&(a.interval=!1),e.call(r,a),o&&r.data("bs.carousel").to(o),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),s||i.data("bs.collapse",s=new n(this,r)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var h=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[a](this.$element[0][h])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var r=e(s),a=r.data("bs.collapse"),o=a?"toggle":s.data();i.call(r,o)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(s).remove(),t(r).each(function(){var n=t(this),s=e(n),r={relatedTarget:this};s.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(s[0],i.target)||(s.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5",a.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var r=e(s),a=r.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var o={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",o)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&s.find(r).trigger("focus"),n.trigger("click");var o=" li:not(.disabled):visible a",h=s.find(".dropdown-menu"+o);if(h.length){var l=h.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<h.length-1&&l++,~l||(l=0),h.eq(l).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),r=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new i(this,a)),"string"==typeof e?r[e](n):a.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),r=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),r=s.length;r--;){var a=s[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focusin",h="hover"==a?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,l=h.test(o);l&&(o=o.replace(h,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),c=r[0].offsetWidth,d=r[0].offsetHeight;if(l){var f=o,p=this.getPosition(this.$viewport);o="bottom"==o&&u.bottom+d>p.bottom?"top":"top"==o&&u.top-d<p.top?"bottom":"right"==o&&u.right+c>p.width?"left":"left"==o&&u.left-c<p.left?"right":o,r.removeClass(f).addClass(o)}var g=this.getCalculatedOffset(o,u,c,d);this.applyPlacement(g,o);var _=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",_).emulateTransitionEnd(i.TRANSITION_DURATION):_()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top+=a,e.left+=o,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=r&&(e.top=e.top+r-l);var u=this.getViewportAdjustedDelta(i,e,h,l);u.left?e.left+=u.left:e.top+=u.top;var c=/top|bottom/.test(i),d=c?2*u.left-s+h:2*u.top-r+l,f=c?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][f],c)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&r.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,r=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var r=n?{top:0,left:0}:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},o=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,a,o,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-r-a.scroll,h=e.top+r-a.scroll+n;o<a.top?s.top=a.top-o:h>a.top+a.height&&(s.top=a.top+a.height-h)}else{var l=e.left-r,u=e.left+r+i;l<a.left?s.left=a.left-l:u>a.right&&(s.left=a.left+a.width-u)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.popover",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),r="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,r)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),s=e.data("target")||e.attr("href"),r=/^#./.test(s)&&t(s);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return a!=(t=r[r.length-1])&&this.activate(t);if(a&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)a!=r[t]&&e>=s[t]&&(void 0===s[t+1]||e<s[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(r),e.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=t(n);this.activate(e.closest("li"),i),this.activate(o,o.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=n.find("> .active"),o=s&&t.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&o?a.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),a.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),r="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),r=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=r.top?!1:"bottom":t-n>=s+a?!1:"bottom";var o=null==this.affixed,h=o?s:r.top,l=o?a:e;return null!=i&&i>=s?"top":null!=n&&h+l>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,r=n.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var o=this.getState(a,e,s,r);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var h="affix"+(o?"-"+o:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:a-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,i,n){function s(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return s(i?i:t)},l,l.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(t,e,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,s,r,a,o,h,l="",u=0;u<t.length;)e=t.charCodeAt(u++),i=t.charCodeAt(u++),s=t.charCodeAt(u++),r=e>>2,a=(3&e)<<4|i>>4,o=(15&i)<<2|s>>6,h=63&s,isNaN(i)?o=h=64:isNaN(s)&&(h=64),l=l+n.charAt(r)+n.charAt(a)+n.charAt(o)+n.charAt(h);return l},i.decode=function(t){var e,i,s,r,a,o,h,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)r=n.indexOf(t.charAt(u++)),a=n.indexOf(t.charAt(u++)),o=n.indexOf(t.charAt(u++)),h=n.indexOf(t.charAt(u++)),
e=r<<2|a>>4,i=(15&a)<<4|o>>2,s=(3&o)<<6|h,l+=String.fromCharCode(e),64!=o&&(l+=String.fromCharCode(i)),64!=h&&(l+=String.fromCharCode(s));return l}},{}],2:[function(t,e){"use strict";function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=i},{}],3:[function(t,e,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},i.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var i=t("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var s="string"!==i.getTypeOf(t);"undefined"==typeof e&&(e=0);var r=0,a=0,o=0;e=-1^e;for(var h=0,l=t.length;l>h;h++)o=s?t[h]:t.charCodeAt(h),a=255&(e^o),r=n[a],e=e>>>8^r;return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function i(){this.data=null,this.length=0,this.index=0}var n=t("./utils");i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=i},{"./utils":21}],6:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],7:[function(t,e,i){"use strict";var n=t("./utils");i.string2binary=function(t){return n.string2binary(t)},i.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},i.uint8Array2String=function(t){return n.transformTo("string",t)},i.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},i.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},i.transformTo=function(t,e){return n.transformTo(t,e)},i.getTypeOf=function(t){return n.getTypeOf(t)},i.checkSupport=function(t){return n.checkSupport(t)},i.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,i.pretty=function(t){return n.pretty(t)},i.findCompression=function(t){return n.findCompression(t)},i.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,s=t("pako");i.uncompressInputType=n?"uint8array":"array",i.compressInputType=n?"uint8array":"array",i.magic="\b\x00",i.compress=function(t,e){return s.deflateRaw(t,{level:e.level||-1})},i.uncompress=function(t){return s.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function i(t,e){return this instanceof i?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new i(t,e)}var n=t("./base64");i.prototype=t("./object"),i.prototype.load=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.utils=t("./deprecatedPublicUtils"),i.base64={encode:function(t){return n.encode(t)},decode:function(t){return n.decode(t)}},i.compressions=t("./compressions"),e.exports=i},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var i=t("./base64"),n=t("./zipEntries");e.exports=function(t,e){var s,r,a,o;for(e=e||{},e.base64&&(t=i.decode(t)),r=new n(t,e),s=r.files,a=0;a<s.length;a++)o=s[a],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders});return r.zipComment.length&&(this.comment=r.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e){(function(t){"use strict";e.exports=function(e,i){return new t(e,i)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e){"use strict";function i(t){this.data=t,this.length=this.data.length,this.index=0}var n=t("./uint8ArrayReader");i.prototype=new n,i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=i},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var i=t("./support"),n=t("./utils"),s=t("./crc32"),r=t("./signature"),a=t("./defaults"),o=t("./base64"),h=t("./compressions"),l=t("./compressedObject"),u=t("./nodeBuffer"),c=t("./utf8"),d=t("./stringWriter"),f=t("./uint8ArrayWriter"),p=function(t){if(t._data instanceof l&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===n.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=p(t),s=n.getTypeOf(e);return"string"===s?!t.options.binary&&i.nodebuffer?u(e,"utf-8"):t.asBinary():e},_=function(t){var e=p(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=o.decode(e)),e=t&&this.options.binary?E.utf8decode(e):n.transformTo("string",e),t||this.options.binary||(e=n.transformTo("string",E.utf8encode(e))),e)},m=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};m.prototype={asText:function(){return _.call(this,!0)},asBinary:function(){return _.call(this,!1)},asNodeBuffer:function(){var t=g(this);return n.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return n.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var v=function(t,e){var i,n="";for(i=0;e>i;i++)n+=String.fromCharCode(255&t),t>>>=8;return n},y=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof i[e]&&(i[e]=arguments[t][e]);return i},b=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=y(t,a),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,i){var s,r=n.getTypeOf(e);if(i=b(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=C(t)),i.createFolders&&(s=x(t))&&k.call(this,s,!0),i.dir||null===e||"undefined"==typeof e)i.base64=!1,i.binary=!1,e=null,r=null;else if("string"===r)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(e=n.string2binary(e));else{if(i.base64=!1,i.binary=!0,!(r||e instanceof l))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===r&&(e=n.transformTo("uint8array",e))}var a=new m(t,e,i);return this.files[t]=a,a},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},C=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},k=function(t,e){return e="undefined"!=typeof e?e:!1,t=C(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},S=function(t,e,i){var r,a=new l;return t._data instanceof l?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=h.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r),i))):(r=g(t),(!r||0===r.length||t.dir)&&(e=h.STORE,r=""),a.uncompressedSize=r.length,a.crc32=s(r),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r),i)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},T=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16},I=function(t){return 63&(t||0)},A=function(t,e,i,a,o){var h,l,u,d,f=(i.compressedContent,n.transformTo("string",c.utf8encode(e.name))),p=e.comment||"",g=n.transformTo("string",c.utf8encode(p)),_=f.length!==e.name.length,m=g.length!==p.length,y=e.options,b="",w="",x="";u=e._initialMetadata.dir!==e.dir?e.dir:y.dir,d=e._initialMetadata.date!==e.date?e.date:y.date;var C=0,k=0;u&&(C|=16),"UNIX"===o?(k=798,C|=T(e.unixPermissions,u)):(k=20,C|=I(e.dosPermissions,u)),h=d.getHours(),h<<=6,h|=d.getMinutes(),h<<=5,h|=d.getSeconds()/2,l=d.getFullYear()-1980,l<<=4,l|=d.getMonth()+1,l<<=5,l|=d.getDate(),_&&(w=v(1,1)+v(s(f),4)+f,b+="up"+v(w.length,2)+w),m&&(x=v(1,1)+v(this.crc32(g),4)+g,b+="uc"+v(x.length,2)+x);var S="";S+="\n\x00",S+=_||m?"\x00\b":"\x00\x00",S+=i.compressionMethod,S+=v(h,2),S+=v(l,2),S+=v(i.crc32,4),S+=v(i.compressedSize,4),S+=v(i.uncompressedSize,4),S+=v(f.length,2),S+=v(b.length,2);var A=r.LOCAL_FILE_HEADER+S+f+b,E=r.CENTRAL_FILE_HEADER+v(k,2)+S+v(g.length,2)+"\x00\x00\x00\x00"+v(C,4)+v(a,4)+f+b+g;return{fileRecord:A,dirRecord:E,compressedObject:i}},E={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,i,n,s,r=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],s=new m(n.name,n._data,y(n.options)),i=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(i,s)&&r.push(s));return r},file:function(t,e,i){if(1===arguments.length){if(n.isRegExp(t)){var s=t;return this.filter(function(t,e){return!e.dir&&s.test(t)})}return this.filter(function(e,i){return!i.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(n.isRegExp(t))return this.filter(function(e,i){return i.dir&&t.test(e)});var e=this.root+t,i=k.call(this,e),s=this.clone();return s.root=i.name,s},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){t=y(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),n.checkSupport(t.type),("darwin"===t.platform||"freebsd"===t.platform||"linux"===t.platform||"sunos"===t.platform)&&(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,i,s=[],a=0,l=0,u=n.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var c in this.files)if(this.files.hasOwnProperty(c)){var p=this.files[c],g=p.options.compression||t.compression.toUpperCase(),_=h[g];if(!_)throw new Error(g+" is not a valid compression method !");var m=p.options.compressionOptions||t.compressionOptions||{},b=S.call(this,p,_,m),w=A.call(this,c,p,b,a,t.platform);a+=w.fileRecord.length+b.compressedSize,l+=w.dirRecord.length,s.push(w)}var x="";x=r.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+v(s.length,2)+v(s.length,2)+v(l,4)+v(a,4)+v(u.length,2)+u;var C=t.type.toLowerCase();for(e="uint8array"===C||"arraybuffer"===C||"blob"===C||"nodebuffer"===C?new f(a+l+x.length):new d(a+l+x.length),i=0;i<s.length;i++)e.append(s[i].fileRecord),e.append(s[i].compressedObject.compressedContent);for(i=0;i<s.length;i++)e.append(s[i].dirRecord);e.append(x);var k=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(t.type.toLowerCase(),k);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",k),t.mimeType);case"base64":return t.base64?o.encode(k):k;default:return k}},crc32:function(t,e){return s(t,e)},utf8encode:function(t){return n.transformTo("string",c.utf8encode(t))},utf8decode:function(t){return c.utf8decode(t)}};e.exports=E},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function i(t,e){this.data=t,e||(this.data=s.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=t("./dataReader"),s=t("./utils");i.prototype=new n,i.prototype.byteAt=function(t){return this.data.charCodeAt(t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=i},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var i=t("./utils"),n=function(){this.data=[]};n.prototype={append:function(t){t=i.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=n},{"./utils":21}],17:[function(t,e,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new s;r.append(e),i.blob=0===r.getBlob("application/zip").size}catch(n){i.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e){"use strict";function i(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var n=t("./dataReader");i.prototype=new n,i.prototype.byteAt=function(t){return this.data[t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),s=t.charCodeAt(3),r=this.length-4;r>=0;--r)if(this.data[r]===e&&this.data[r+1]===i&&this.data[r+2]===n&&this.data[r+3]===s)return r;return-1},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=i},{"./dataReader":5}],19:[function(t,e){"use strict";var i=t("./utils"),n=function(t){this.data=new Uint8Array(t),this.index=0};n.prototype={append:function(t){0!==t.length&&(t=i.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=n},{"./utils":21}],20:[function(t,e,i){"use strict";for(var n=t("./utils"),s=t("./support"),r=t("./nodeBuffer"),a=new Array(256),o=0;256>o;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;var h=function(t){var e,i,n,r,a,o=t.length,h=0;for(r=0;o>r;r++)i=t.charCodeAt(r),55296===(64512&i)&&o>r+1&&(n=t.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=s.uint8array?new Uint8Array(h):new Array(h),a=0,r=0;h>a;r++)i=t.charCodeAt(r),55296===(64512&i)&&o>r+1&&(n=t.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),128>i?e[a++]=i:2048>i?(e[a++]=192|i>>>6,e[a++]=128|63&i):65536>i?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},l=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+a[t[i]]>e?i:e},u=function(t){var e,i,s,r,o=t.length,h=new Array(2*o);for(i=0,e=0;o>e;)if(s=t[e++],128>s)h[i++]=s;else if(r=a[s],r>4)h[i++]=65533,e+=r-1;else{for(s&=2===r?31:3===r?15:7;r>1&&o>e;)s=s<<6|63&t[e++],r--;r>1?h[i++]=65533:65536>s?h[i++]=s:(s-=65536,h[i++]=55296|s>>10&1023,h[i++]=56320|1023&s)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)};i.utf8encode=function(t){return s.nodebuffer?r(t,"utf-8"):h(t)},i.utf8decode=function(t){if(s.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(s.uint8array?"uint8array":"array",t);for(var e=[],i=0,r=t.length,a=65536;r>i;){var o=l(t,Math.min(i+a,r));e.push(u(s.uint8array?t.subarray(i,o):t.slice(i,o))),i=o}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,i){"use strict";function n(t){return t}function s(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}function r(t){var e=65536,n=[],s=t.length,r=i.getTypeOf(t),a=0,o=!0;try{switch(r){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0))}}catch(h){o=!1}if(!o){for(var u="",c=0;c<t.length;c++)u+=String.fromCharCode(t[c]);return u}for(;s>a&&e>1;)try{n.push("array"===r||"nodebuffer"===r?String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,s))):String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,s)))),a+=e}catch(h){e=Math.floor(e/2)}return n.join("")}function a(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}var o=t("./support"),h=t("./compressions"),l=t("./nodeBuffer");i.string2binary=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i));return e},i.arrayBuffer2Blob=function(t,e){i.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new s;return r.append(t),r.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=r;var u={};u.string={string:n,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,l(t.length))}},u.array={string:r,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},u.arraybuffer={string:function(t){return r(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},u.uint8array={string:r,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return l(t)}},u.nodebuffer={string:r,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:n},i.transformTo=function(t,e){if(e||(e=""),!t)return e;i.checkSupport(t);var n=i.getTypeOf(e),s=u[n][t](e);return s},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&l.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){var e=o[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)e=t.charCodeAt(i),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},i.findCompression=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null},i.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function i(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var n=t("./stringReader"),s=t("./nodeBufferReader"),r=t("./uint8ArrayReader"),a=t("./utils"),o=t("./signature"),h=t("./zipEntry"),l=t("./support"),u=t("./object");i.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=u.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44,s=0;n>s;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===o.CENTRAL_FILE_HEADER;)t=new h({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(o.LOCAL_FILE_HEADER),e=!1}catch(i){}throw new Error(e?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=a.getTypeOf(t);this.reader="string"!==e||l.uint8array?"nodebuffer"===e?new s(t):new r(a.transformTo("uint8array",t)):new n(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=i},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function i(t,e){this.options=t,this.loadOptions=e}var n=t("./stringReader"),s=t("./utils"),r=t("./compressedObject"),a=t("./object"),o=0,h=3;i.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,i){return function(){var n=t.index;t.setIndex(e);var s=t.readData(i);return t.setIndex(n),s}},prepareContent:function(t,e,i,n,r){return function(){var t=s.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==r)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=s.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new r,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=s.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,t===o&&(this.dosPermissions=63&this.externalFileAttributes),t===h&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,i,n,s=t.index;for(this.extraFields=this.extraFields||{};t.index<s+this.extraFieldsLength;)e=t.readInt(2),i=t.readInt(2),n=t.readString(i),this.extraFields[e]={id:e,length:i,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},e.exports=i},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var i=t("./lib/utils/common").assign,n=t("./lib/deflate"),s=t("./lib/inflate"),r=t("./lib/zlib/constants"),a={};i(a,n,s,r),e.exports=a},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,i){"use strict";function n(t,e){var i=new v(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function s(t,e){return e=e||{},e.raw=!0,n(t,e)}function r(t,e){return e=e||{},e.gzip=!0,n(t,e)}var a=t("./zlib/deflate.js"),o=t("./utils/common"),h=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=0,d=4,f=0,p=1,g=-1,_=0,m=8,v=function(t){this.options=o.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",
this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==f)throw new Error(l[i]);e.header&&a.deflateSetHeader(this.strm,e.header)};v.prototype.push=function(t,e){var i,n,s=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?d:c,s.input="string"==typeof t?h.string2buf(t):t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(r),s.next_out=0,s.avail_out=r),i=a.deflate(s,n),i!==p&&i!==f)return this.onEnd(i),this.ended=!0,!1;(0===s.avail_out||0===s.avail_in&&n===d)&&this.onData("string"===this.options.to?h.buf2binstring(o.shrinkBuf(s.output,s.next_out)):o.shrinkBuf(s.output,s.next_out))}while((s.avail_in>0||0===s.avail_out)&&i!==p);return n===d?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f):!0},v.prototype.onData=function(t){this.chunks.push(t)},v.prototype.onEnd=function(t){t===f&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=v,i.deflate=n,i.deflateRaw=s,i.gzip=r},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,i){"use strict";function n(t,e){var i=new d(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function s(t,e){return e=e||{},e.raw=!0,n(t,e)}var r=t("./zlib/inflate.js"),a=t("./utils/common"),o=t("./utils/strings"),h=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),d=function(t){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,e.windowBits);if(i!==h.Z_OK)throw new Error(l[i]);this.header=new c,r.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(t,e){var i,n,s,l,u,c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,c.input="string"==typeof t?o.binstring2buf(t):t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new a.Buf8(d),c.next_out=0,c.avail_out=d),i=r.inflate(c,h.Z_NO_FLUSH),i!==h.Z_STREAM_END&&i!==h.Z_OK)return this.onEnd(i),this.ended=!0,!1;c.next_out&&(0===c.avail_out||i===h.Z_STREAM_END||0===c.avail_in&&n===h.Z_FINISH)&&("string"===this.options.to?(s=o.utf8border(c.output,c.next_out),l=c.next_out-s,u=o.buf2string(c.output,s),c.next_out=l,c.avail_out=d-l,l&&a.arraySet(c.output,c.output,s,l,0),this.onData(u)):this.onData(a.shrinkBuf(c.output,c.next_out)))}while(c.avail_in>0&&i!==h.Z_STREAM_END);return i===h.Z_STREAM_END&&(n=h.Z_FINISH),n===h.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h.Z_OK):!0},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===h.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=d,i.inflate=n,i.inflateRaw=s,i.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,n,s){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),s);for(var r=0;n>r;r++)t[s+r]=e[i+r]},flattenChunks:function(t){var e,i,n,s,r,a;for(n=0,e=0,i=t.length;i>e;e++)n+=t[e].length;for(a=new Uint8Array(n),s=0,e=0,i=t.length;i>e;e++)r=t[e],a.set(r,s),s+=r.length;return a}},r={arraySet:function(t,e,i,n,s){for(var r=0;n>r;r++)t[s+r]=e[i+r]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],28:[function(t,e,i){"use strict";function n(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(t,e));for(var i="",n=0;e>n;n++)i+=String.fromCharCode(t[n]);return i}var s=t("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(o){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){a=!1}for(var h=new s.Buf8(256),l=0;256>l;l++)h[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;h[254]=h[254]=1,i.string2buf=function(t){var e,i,n,r,a,o=t.length,h=0;for(r=0;o>r;r++)i=t.charCodeAt(r),55296===(64512&i)&&o>r+1&&(n=t.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=new s.Buf8(h),a=0,r=0;h>a;r++)i=t.charCodeAt(r),55296===(64512&i)&&o>r+1&&(n=t.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),128>i?e[a++]=i:2048>i?(e[a++]=192|i>>>6,e[a++]=128|63&i):65536>i?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new s.Buf8(t.length),i=0,n=e.length;n>i;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,s,r,a,o=e||t.length,l=new Array(2*o);for(s=0,i=0;o>i;)if(r=t[i++],128>r)l[s++]=r;else if(a=h[r],a>4)l[s++]=65533,i+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&o>i;)r=r<<6|63&t[i++],a--;a>1?l[s++]=65533:65536>r?l[s++]=r:(r-=65536,l[s++]=55296|r>>10&1023,l[s++]=56320|1023&r)}return n(l,s)},i.utf8border=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+h[t[i]]>e?i:e}},{"./common":27}],29:[function(t,e){"use strict";function i(t,e,i,n){for(var s=65535&t|0,r=t>>>16&65535|0,a=0;0!==i;){a=i>2e3?2e3:i,i-=a;do s=s+e[n++]|0,r=r+s|0;while(--a);s%=65521,r%=65521}return s|r<<16|0}e.exports=i},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";function i(){for(var t,e=[],i=0;256>i;i++){t=i;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function n(t,e,i,n){var r=s,a=n+i;t=-1^t;for(var o=n;a>o;o++)t=t>>>8^r[255&(t^e[o])];return-1^t}var s=i();e.exports=n},{}],32:[function(t,e,i){"use strict";function n(t,e){return t.msg=P[e],e}function s(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(A.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function o(t,e){E._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,i,n){var s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,A.arraySet(e,t.input,t.next_in,s,i),1===t.state.wrap?t.adler=z(t.adler,e,s,i):2===t.state.wrap&&(t.adler=O(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)}function c(t,e){var i,n,s=t.max_chain_length,r=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+ht,f=l[r+a-1],p=l[r+a];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,l[i+a]===p&&l[i+a-1]===f&&l[i]===l[r]&&l[++i]===l[r+1]){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&d>r);if(n=ht-(d-r),r=d-ht,n>a){if(t.match_start=e,a=n,n>=o)break;f=l[r+a-1],p=l[r+a]}}while((e=c[e&u])>h&&0!==--s);return a<=t.lookahead?a:t.lookahead}function d(t){var e,i,n,s,r,a=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-lt)){A.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,i=t.hash_size,e=i;do n=t.head[--e],t.head[e]=n>=a?n-a:0;while(--i);i=a,e=i;do n=t.prev[--e],t.prev[e]=n>=a?n-a:0;while(--i);s+=a}if(0===t.strm.avail_in)break;if(i=u(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=ot)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+ot-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<ot)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function f(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===L)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-lt&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(o(t,!0),0===t.strm.avail_out?bt:wt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?vt:vt}function p(t,e){for(var i,n;;){if(t.lookahead<lt){if(d(t),t.lookahead<lt&&e===L)return vt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-lt&&(t.match_length=c(t,i)),t.match_length>=ot)if(n=E._tr_tally(t,t.strstart-t.match_start,t.match_length-ot),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ot){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=E._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<ot-1?t.strstart:ot-1,e===B?(o(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:yt}function g(t,e){for(var i,n,s;;){if(t.lookahead<lt){if(d(t),t.lookahead<lt&&e===L)return vt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ot-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-lt&&(t.match_length=c(t,i),t.match_length<=5&&(t.strategy===V||t.match_length===ot&&t.strstart-t.match_start>4096)&&(t.match_length=ot-1)),t.prev_length>=ot&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-ot,n=E._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ot),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ot-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ot-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(n=E._tr_tally(t,0,t.window[t.strstart-1]),n&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=E._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ot-1?t.strstart:ot-1,e===B?(o(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:yt}function _(t,e){for(var i,n,s,r,a=t.window;;){if(t.lookahead<=ht){if(d(t),t.lookahead<=ht&&e===L)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ot&&t.strstart>0&&(s=t.strstart-1,n=a[s],n===a[++s]&&n===a[++s]&&n===a[++s])){r=t.strstart+ht;do;while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&r>s);t.match_length=ht-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ot?(i=E._tr_tally(t,1,t.match_length-ot),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=E._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(o(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:yt}function m(t,e){for(var i;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===L)return vt;break}if(t.match_length=0,i=E._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(o(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:yt}function v(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=I[t.level].max_lazy,t.good_match=I[t.level].good_length,t.nice_match=I[t.level].nice_length,t.max_chain_length=I[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ot-1,t.match_available=0,t.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*rt),this.dyn_dtree=new A.Buf16(2*(2*nt+1)),this.bl_tree=new A.Buf16(2*(2*st+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(at+1),this.heap=new A.Buf16(2*it+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*it+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=G,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ct:_t,t.adler=2===e.wrap?0:1,e.last_flush=L,E._tr_init(e),D):n(t,$)}function w(t){var e=b(t);return e===D&&v(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?$:(t.state.gzhead=e,D):$}function C(t,e,i,s,r,a){if(!t)return $;var o=1;if(e===H&&(e=6),0>s?(o=0,s=-s):s>15&&(o=2,s-=16),1>r||r>J||i!==Y||8>s||s>15||0>e||e>9||0>a||a>W)return n(t,$);8===s&&(s=9);var h=new y;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=s,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+ot-1)/ot),h.window=new A.Buf8(2*h.w_size),h.head=new A.Buf16(h.hash_size),h.prev=new A.Buf16(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new A.Buf8(h.pending_buf_size),h.d_buf=h.lit_bufsize>>1,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=i,w(t)}function k(t,e){return C(t,e,Y,Q,K,X)}function S(t,e){var i,o,u,c;if(!t||!t.state||e>R||0>e)return t?n(t,$):$;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===mt&&e!==B)return n(t,0===t.avail_out?U:$);if(o.strm=t,i=o.last_flush,o.last_flush=e,o.status===ct)if(2===o.wrap)t.adler=0,h(o,31),h(o,139),h(o,8),o.gzhead?(h(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),h(o,255&o.gzhead.time),h(o,o.gzhead.time>>8&255),h(o,o.gzhead.time>>16&255),h(o,o.gzhead.time>>24&255),h(o,9===o.level?2:o.strategy>=q||o.level<2?4:0),h(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(h(o,255&o.gzhead.extra.length),h(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=O(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=dt):(h(o,0),h(o,0),h(o,0),h(o,0),h(o,0),h(o,9===o.level?2:o.strategy>=q||o.level<2?4:0),h(o,xt),o.status=_t);else{var d=Y+(o.w_bits-8<<4)<<8,f=-1;f=o.strategy>=q||o.level<2?0:o.level<6?1:6===o.level?2:3,d|=f<<6,0!==o.strstart&&(d|=ut),d+=31-d%31,o.status=_t,l(o,d),0!==o.strstart&&(l(o,t.adler>>>16),l(o,65535&t.adler)),t.adler=1}if(o.status===dt)if(o.gzhead.extra){for(u=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending!==o.pending_buf_size));)h(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ft)}else o.status=ft;if(o.status===ft)if(o.gzhead.name){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.gzindex=0,o.status=pt)}else o.status=pt;if(o.status===pt)if(o.gzhead.comment){u=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),a(t),u=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>u&&(t.adler=O(t.adler,o.pending_buf,o.pending-u,u)),0===c&&(o.status=gt)}else o.status=gt;if(o.status===gt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(h(o,255&t.adler),h(o,t.adler>>8&255),t.adler=0,o.status=_t)):o.status=_t),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,D}else if(0===t.avail_in&&s(e)<=s(i)&&e!==B)return n(t,U);if(o.status===mt&&0!==t.avail_in)return n(t,U);if(0!==t.avail_in||0!==o.lookahead||e!==L&&o.status!==mt){var p=o.strategy===q?m(o,e):o.strategy===Z?_(o,e):I[o.level].func(o,e);if((p===bt||p===wt)&&(o.status=mt),p===vt||p===bt)return 0===t.avail_out&&(o.last_flush=-1),D;if(p===yt&&(e===M?E._tr_align(o):e!==R&&(E._tr_stored_block(o,0,0,!1),e===N&&(r(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,D}return e!==B?D:o.wrap<=0?F:(2===o.wrap?(h(o,255&t.adler),h(o,t.adler>>8&255),h(o,t.adler>>16&255),h(o,t.adler>>24&255),h(o,255&t.total_in),h(o,t.total_in>>8&255),h(o,t.total_in>>16&255),h(o,t.total_in>>24&255)):(l(o,t.adler>>>16),l(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?D:F)}function T(t){var e;return t&&t.state?(e=t.state.status,e!==ct&&e!==dt&&e!==ft&&e!==pt&&e!==gt&&e!==_t&&e!==mt?n(t,$):(t.state=null,e===_t?n(t,j):D)):$}var I,A=t("../utils/common"),E=t("./trees"),z=t("./adler32"),O=t("./crc32"),P=t("./messages"),L=0,M=1,N=3,B=4,R=5,D=0,F=1,$=-2,j=-3,U=-5,H=-1,V=1,q=2,Z=3,W=4,X=0,G=2,Y=8,J=9,Q=15,K=8,tt=29,et=256,it=et+1+tt,nt=30,st=19,rt=2*it+1,at=15,ot=3,ht=258,lt=ht+ot+1,ut=32,ct=42,dt=69,ft=73,pt=91,gt=103,_t=113,mt=666,vt=1,yt=2,bt=3,wt=4,xt=3,Ct=function(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s};I=[new Ct(0,0,0,0,f),new Ct(4,4,8,4,p),new Ct(4,5,16,8,p),new Ct(4,6,32,32,p),new Ct(4,4,16,16,g),new Ct(8,16,32,32,g),new Ct(8,16,128,128,g),new Ct(8,32,128,256,g),new Ct(32,128,258,1024,g),new Ct(32,258,258,4096,g)],i.deflateInit=k,i.deflateInit2=C,i.deflateReset=w,i.deflateResetKeep=b,i.deflateSetHeader=x,i.deflate=S,i.deflateEnd=T,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],34:[function(t,e){"use strict";var i=30,n=12;e.exports=function(t,e){var s,r,a,o,h,l,u,c,d,f,p,g,_,m,v,y,b,w,x,C,k,S,T,I,A;s=t.state,r=t.next_in,I=t.input,a=r+(t.avail_in-5),o=t.next_out,A=t.output,h=o-(e-t.avail_out),l=o+(t.avail_out-257),u=s.dmax,c=s.wsize,d=s.whave,f=s.wnext,p=s.window,g=s.hold,_=s.bits,m=s.lencode,v=s.distcode,y=(1<<s.lenbits)-1,b=(1<<s.distbits)-1;t:do{15>_&&(g+=I[r++]<<_,_+=8,g+=I[r++]<<_,_+=8),w=m[g&y];e:for(;;){if(x=w>>>24,g>>>=x,_-=x,x=w>>>16&255,0===x)A[o++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=m[(65535&w)+(g&(1<<x)-1)];continue e}if(32&x){s.mode=n;break t}t.msg="invalid literal/length code",s.mode=i;break t}C=65535&w,x&=15,x&&(x>_&&(g+=I[r++]<<_,_+=8),C+=g&(1<<x)-1,g>>>=x,_-=x),15>_&&(g+=I[r++]<<_,_+=8,g+=I[r++]<<_,_+=8),w=v[g&b];i:for(;;){if(x=w>>>24,g>>>=x,_-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=v[(65535&w)+(g&(1<<x)-1)];continue i}t.msg="invalid distance code",s.mode=i;break t}if(k=65535&w,x&=15,x>_&&(g+=I[r++]<<_,_+=8,x>_&&(g+=I[r++]<<_,_+=8)),k+=g&(1<<x)-1,k>u){t.msg="invalid distance too far back",s.mode=i;break t}if(g>>>=x,_-=x,x=o-h,k>x){if(x=k-x,x>d&&s.sane){t.msg="invalid distance too far back",s.mode=i;break t}if(S=0,T=p,0===f){if(S+=c-x,C>x){C-=x;do A[o++]=p[S++];while(--x);S=o-k,T=A}}else if(x>f){if(S+=c+f-x,x-=f,C>x){C-=x;do A[o++]=p[S++];while(--x);if(S=0,C>f){x=f,C-=x;do A[o++]=p[S++];while(--x);S=o-k,T=A}}}else if(S+=f-x,C>x){C-=x;do A[o++]=p[S++];while(--x);S=o-k,T=A}for(;C>2;)A[o++]=T[S++],A[o++]=T[S++],A[o++]=T[S++],C-=3;C&&(A[o++]=T[S++],C>1&&(A[o++]=T[S++]))}else{S=o-k;do A[o++]=A[S++],A[o++]=A[S++],A[o++]=A[S++],C-=3;while(C>2);C&&(A[o++]=A[S++],C>1&&(A[o++]=A[S++]))}break}}break}}while(a>r&&l>o);C=_>>3,r-=C,_-=C<<3,g&=(1<<_)-1,t.next_in=r,t.next_out=o,t.avail_in=a>r?5+(a-r):5-(r-a),t.avail_out=l>o?257+(l-o):257-(o-l),s.hold=g,s.bits=_}},{}],35:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(pt),e.distcode=e.distdyn=new m.Buf32(gt),e.sane=1,e.back=-1,A):O}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):O}function o(t,e){var i,n;return t&&t.state?(n=t.state,0>e?(i=0,e=-e):(i=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?O:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,a(t))):O}function h(t,e){var i,n;return t?(n=new s,t.state=n,n.window=null,i=o(t,e),i!==A&&(t.state=null),i):O}function l(t){return h(t,mt)}function u(t){if(vt){var e;for(g=new m.Buf32(512),_=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(w(C,t.lens,0,288,g,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;w(k,t.lens,0,32,_,0,t.work,{bits:5}),vt=!1}t.lencode=g,t.lenbits=9,t.distcode=_,t.distbits=5}function c(t,e,i,n){var s,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new m.Buf8(r.wsize)),n>=r.wsize?(m.arraySet(r.window,e,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),m.arraySet(r.window,e,i-n,s,r.wnext),n-=s,n?(m.arraySet(r.window,e,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}function d(t,e){var i,s,r,a,o,h,l,d,f,p,g,_,pt,gt,_t,mt,vt,yt,bt,wt,xt,Ct,kt,St,Tt=0,It=new m.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return O;i=t.state,i.mode===W&&(i.mode=X),o=t.next_out,r=t.output,l=t.avail_out,a=t.next_in,s=t.input,h=t.avail_in,d=i.hold,f=i.bits,p=h,g=l,Ct=A;t:for(;;)switch(i.mode){case B:if(0===i.wrap){i.mode=X;break}for(;16>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(2&i.wrap&&35615===d){i.check=0,It[0]=255&d,It[1]=d>>>8&255,i.check=y(i.check,It,2,0),d=0,f=0,i.mode=R;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",i.mode=ct;break}if((15&d)!==N){t.msg="unknown compression method",i.mode=ct;break}if(d>>>=4,f-=4,xt=(15&d)+8,0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=ct;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&d?q:W,d=0,f=0;break;case R:for(;16>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(i.flags=d,(255&i.flags)!==N){t.msg="unknown compression method",i.mode=ct;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=ct;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&(It[0]=255&d,It[1]=d>>>8&255,i.check=y(i.check,It,2,0)),d=0,f=0,i.mode=D;case D:for(;32>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.head&&(i.head.time=d),512&i.flags&&(It[0]=255&d,It[1]=d>>>8&255,It[2]=d>>>16&255,It[3]=d>>>24&255,i.check=y(i.check,It,4,0)),d=0,f=0,i.mode=F;case F:for(;16>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&(It[0]=255&d,It[1]=d>>>8&255,i.check=y(i.check,It,2,0)),d=0,f=0,i.mode=$;case $:if(1024&i.flags){for(;16>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&(It[0]=255&d,It[1]=d>>>8&255,i.check=y(i.check,It,2,0)),d=0,f=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(_=i.length,_>h&&(_=h),_&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),m.arraySet(i.head.extra,s,a,_,xt)),512&i.flags&&(i.check=y(i.check,s,_,a)),h-=_,a+=_,i.length-=_),i.length))break t;i.length=0,i.mode=U;case U:if(2048&i.flags){if(0===h)break t;_=0;do xt=s[a+_++],i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt));while(xt&&h>_);if(512&i.flags&&(i.check=y(i.check,s,_,a)),h-=_,a+=_,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=H;case H:if(4096&i.flags){if(0===h)break t;_=0;do xt=s[a+_++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt));while(xt&&h>_);if(512&i.flags&&(i.check=y(i.check,s,_,a)),h-=_,a+=_,xt)break t}else i.head&&(i.head.comment=null);i.mode=V;case V:if(512&i.flags){for(;16>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(d!==(65535&i.check)){t.msg="header crc mismatch",i.mode=ct;break}d=0,f=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=W;break;case q:for(;32>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}t.adler=i.check=n(d),d=0,f=0,i.mode=Z;case Z:if(0===i.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,z;t.adler=i.check=1,i.mode=W;case W:if(e===T||e===I)break t;case X:if(i.last){d>>>=7&f,f-=7&f,i.mode=ht;break}for(;3>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}switch(i.last=1&d,d>>>=1,f-=1,3&d){case 0:i.mode=G;break;case 1:if(u(i),i.mode=et,e===I){d>>>=2,f-=2;break t}break;case 2:i.mode=Q;break;case 3:t.msg="invalid block type",i.mode=ct}d>>>=2,f-=2;break;case G:for(d>>>=7&f,f-=7&f;32>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){t.msg="invalid stored block lengths",i.mode=ct;break}if(i.length=65535&d,d=0,f=0,i.mode=Y,e===I)break t;case Y:i.mode=J;case J:if(_=i.length){if(_>h&&(_=h),_>l&&(_=l),0===_)break t;m.arraySet(r,s,a,_,o),h-=_,a+=_,l-=_,o+=_,i.length-=_;break}i.mode=W;break;case Q:for(;14>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(i.nlen=(31&d)+257,d>>>=5,f-=5,i.ndist=(31&d)+1,d>>>=5,f-=5,i.ncode=(15&d)+4,d>>>=4,f-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=ct;break}i.have=0,i.mode=K;case K:for(;i.have<i.ncode;){for(;3>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.lens[At[i.have++]]=7&d,d>>>=3,f-=3}for(;i.have<19;)i.lens[At[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,kt={bits:i.lenbits},Ct=w(x,i.lens,0,19,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Ct){t.msg="invalid code lengths set",i.mode=ct;break}i.have=0,i.mode=tt;case tt:for(;i.have<i.nlen+i.ndist;){for(;Tt=i.lencode[d&(1<<i.lenbits)-1],_t=Tt>>>24,mt=Tt>>>16&255,vt=65535&Tt,!(f>=_t);){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(16>vt)d>>>=_t,f-=_t,i.lens[i.have++]=vt;else{if(16===vt){for(St=_t+2;St>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(d>>>=_t,f-=_t,0===i.have){t.msg="invalid bit length repeat",i.mode=ct;break}xt=i.lens[i.have-1],_=3+(3&d),d>>>=2,f-=2}else if(17===vt){for(St=_t+3;St>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}d>>>=_t,f-=_t,xt=0,_=3+(7&d),d>>>=3,f-=3}else{for(St=_t+7;St>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}d>>>=_t,f-=_t,xt=0,_=11+(127&d),d>>>=7,f-=7}if(i.have+_>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=ct;break}for(;_--;)i.lens[i.have++]=xt}}if(i.mode===ct)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=ct;break}if(i.lenbits=9,kt={bits:i.lenbits},Ct=w(C,i.lens,0,i.nlen,i.lencode,0,i.work,kt),i.lenbits=kt.bits,Ct){t.msg="invalid literal/lengths set",i.mode=ct;break}if(i.distbits=6,i.distcode=i.distdyn,kt={bits:i.distbits},Ct=w(k,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,kt),i.distbits=kt.bits,Ct){t.msg="invalid distances set",i.mode=ct;break}if(i.mode=et,e===I)break t;case et:i.mode=it;case it:if(h>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,b(t,g),o=t.next_out,r=t.output,l=t.avail_out,a=t.next_in,s=t.input,h=t.avail_in,d=i.hold,f=i.bits,i.mode===W&&(i.back=-1);break}for(i.back=0;Tt=i.lencode[d&(1<<i.lenbits)-1],_t=Tt>>>24,mt=Tt>>>16&255,vt=65535&Tt,!(f>=_t);){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(mt&&0===(240&mt)){for(yt=_t,bt=mt,wt=vt;Tt=i.lencode[wt+((d&(1<<yt+bt)-1)>>yt)],_t=Tt>>>24,mt=Tt>>>16&255,vt=65535&Tt,!(f>=yt+_t);){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}d>>>=yt,f-=yt,i.back+=yt}if(d>>>=_t,f-=_t,i.back+=_t,i.length=vt,0===mt){i.mode=ot;break}if(32&mt){i.back=-1,i.mode=W;break}if(64&mt){t.msg="invalid literal/length code",i.mode=ct;break}i.extra=15&mt,i.mode=nt;case nt:if(i.extra){for(St=i.extra;St>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=st;case st:for(;Tt=i.distcode[d&(1<<i.distbits)-1],_t=Tt>>>24,mt=Tt>>>16&255,vt=65535&Tt,!(f>=_t);){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(0===(240&mt)){for(yt=_t,bt=mt,wt=vt;Tt=i.distcode[wt+((d&(1<<yt+bt)-1)>>yt)],_t=Tt>>>24,mt=Tt>>>16&255,vt=65535&Tt,!(f>=yt+_t);){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}d>>>=yt,f-=yt,i.back+=yt}if(d>>>=_t,f-=_t,i.back+=_t,64&mt){t.msg="invalid distance code",i.mode=ct;break}i.offset=vt,i.extra=15&mt,i.mode=rt;case rt:if(i.extra){for(St=i.extra;St>f;){
if(0===h)break t;h--,d+=s[a++]<<f,f+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,f-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=ct;break}i.mode=at;case at:if(0===l)break t;if(_=g-l,i.offset>_){if(_=i.offset-_,_>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=ct;break}_>i.wnext?(_-=i.wnext,pt=i.wsize-_):pt=i.wnext-_,_>i.length&&(_=i.length),gt=i.window}else gt=r,pt=o-i.offset,_=i.length;_>l&&(_=l),l-=_,i.length-=_;do r[o++]=gt[pt++];while(--_);0===i.length&&(i.mode=it);break;case ot:if(0===l)break t;r[o++]=i.length,l--,i.mode=it;break;case ht:if(i.wrap){for(;32>f;){if(0===h)break t;h--,d|=s[a++]<<f,f+=8}if(g-=l,t.total_out+=g,i.total+=g,g&&(t.adler=i.check=i.flags?y(i.check,r,g,o-g):v(i.check,r,g,o-g)),g=l,(i.flags?d:n(d))!==i.check){t.msg="incorrect data check",i.mode=ct;break}d=0,f=0}i.mode=lt;case lt:if(i.wrap&&i.flags){for(;32>f;){if(0===h)break t;h--,d+=s[a++]<<f,f+=8}if(d!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=ct;break}d=0,f=0}i.mode=ut;case ut:Ct=E;break t;case ct:Ct=P;break t;case dt:return L;case ft:default:return O}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=h,i.hold=d,i.bits=f,(i.wsize||g!==t.avail_out&&i.mode<ct&&(i.mode<ht||e!==S))&&c(t,t.output,t.next_out,g-t.avail_out)?(i.mode=dt,L):(p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,i.total+=g,i.wrap&&g&&(t.adler=i.check=i.flags?y(i.check,r,g,t.next_out-g):v(i.check,r,g,t.next_out-g)),t.data_type=i.bits+(i.last?64:0)+(i.mode===W?128:0)+(i.mode===et||i.mode===Y?256:0),(0===p&&0===g||e===S)&&Ct===A&&(Ct=M),Ct)}function f(t){if(!t||!t.state)return O;var e=t.state;return e.window&&(e.window=null),t.state=null,A}function p(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?O:(i.head=e,e.done=!1,A)):O}var g,_,m=t("../utils/common"),v=t("./adler32"),y=t("./crc32"),b=t("./inffast"),w=t("./inftrees"),x=0,C=1,k=2,S=4,T=5,I=6,A=0,E=1,z=2,O=-2,P=-3,L=-4,M=-5,N=8,B=1,R=2,D=3,F=4,$=5,j=6,U=7,H=8,V=9,q=10,Z=11,W=12,X=13,G=14,Y=15,J=16,Q=17,K=18,tt=19,et=20,it=21,nt=22,st=23,rt=24,at=25,ot=26,ht=27,lt=28,ut=29,ct=30,dt=31,ft=32,pt=852,gt=592,_t=15,mt=_t,vt=!0;i.inflateReset=a,i.inflateReset2=o,i.inflateResetKeep=r,i.inflateInit=l,i.inflateInit2=h,i.inflate=d,i.inflateEnd=f,i.inflateGetHeader=p,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var i=t("../utils/common"),n=15,s=852,r=592,a=0,o=1,h=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,f,p,g,_,m,v){var y,b,w,x,C,k,S,T,I,A=v.bits,E=0,z=0,O=0,P=0,L=0,M=0,N=0,B=0,R=0,D=0,F=null,$=0,j=new i.Buf16(n+1),U=new i.Buf16(n+1),H=null,V=0;for(E=0;n>=E;E++)j[E]=0;for(z=0;p>z;z++)j[e[f+z]]++;for(L=A,P=n;P>=1&&0===j[P];P--);if(L>P&&(L=P),0===P)return g[_++]=20971520,g[_++]=20971520,v.bits=1,0;for(O=1;P>O&&0===j[O];O++);for(O>L&&(L=O),B=1,E=1;n>=E;E++)if(B<<=1,B-=j[E],0>B)return-1;if(B>0&&(t===a||1!==P))return-1;for(U[1]=0,E=1;n>E;E++)U[E+1]=U[E]+j[E];for(z=0;p>z;z++)0!==e[f+z]&&(m[U[e[f+z]]++]=z);if(t===a?(F=H=m,k=19):t===o?(F=l,$-=257,H=u,V-=257,k=256):(F=c,H=d,k=-1),D=0,z=0,E=O,C=_,M=L,N=0,w=-1,R=1<<L,x=R-1,t===o&&R>s||t===h&&R>r)return 1;for(var q=0;;){q++,S=E-N,m[z]<k?(T=0,I=m[z]):m[z]>k?(T=H[V+m[z]],I=F[$+m[z]]):(T=96,I=0),y=1<<E-N,b=1<<M,O=b;do b-=y,g[C+(D>>N)+b]=S<<24|T<<16|I|0;while(0!==b);for(y=1<<E-1;D&y;)y>>=1;if(0!==y?(D&=y-1,D+=y):D=0,z++,0===--j[E]){if(E===P)break;E=e[f+m[z]]}if(E>L&&(D&x)!==w){for(0===N&&(N=L),C+=O,M=E-N,B=1<<M;P>M+N&&(B-=j[M+N],!(0>=B));)M++,B<<=1;if(R+=1<<M,t===o&&R>s||t===h&&R>r)return 1;w=D&x,g[w]=L<<24|M<<16|C-_|0}}return 0!==D&&(g[C+D]=E-N<<24|64<<16|0),v.bits=L,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){return 256>t?at[t]:at[256+(t>>>7)]}function r(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function a(t,e,i){t.bi_valid>W-i?(t.bi_buf|=e<<t.bi_valid&65535,r(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=i-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function o(t,e,i){a(t,i[2*e],i[2*e+1])}function h(t,e){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--e>0);return i>>>1}function l(t){16===t.bi_valid?(r(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function u(t,e){var i,n,s,r,a,o,h=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(r=0;Z>=r;r++)t.bl_count[r]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;q>i;i++)n=t.heap[i],r=h[2*h[2*n+1]+1]+1,r>p&&(r=p,g++),h[2*n+1]=r,n>l||(t.bl_count[r]++,a=0,n>=f&&(a=d[n-f]),o=h[2*n],t.opt_len+=o*(r+a),c&&(t.static_len+=o*(u[2*n+1]+a)));if(0!==g){do{for(r=p-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(r=p;0!==r;r--)for(n=t.bl_count[r];0!==n;)s=t.heap[--i],s>l||(h[2*s+1]!==r&&(t.opt_len+=(r-h[2*s+1])*h[2*s],h[2*s+1]=r),n--)}}function c(t,e,i){var n,s,r=new Array(Z+1),a=0;for(n=1;Z>=n;n++)r[n]=a=a+i[n-1]<<1;for(s=0;e>=s;s++){var o=t[2*s+1];0!==o&&(t[2*s]=h(r[o]++,o))}}function d(){var t,e,i,n,s,r=new Array(Z+1);for(i=0,n=0;$-1>n;n++)for(ht[n]=i,t=0;t<1<<K[n];t++)ot[i++]=n;for(ot[i-1]=n,s=0,n=0;16>n;n++)for(lt[n]=s,t=0;t<1<<tt[n];t++)at[s++]=n;for(s>>=7;H>n;n++)for(lt[n]=s<<7,t=0;t<1<<tt[n]-7;t++)at[256+s++]=n;for(e=0;Z>=e;e++)r[e]=0;for(t=0;143>=t;)st[2*t+1]=8,t++,r[8]++;for(;255>=t;)st[2*t+1]=9,t++,r[9]++;for(;279>=t;)st[2*t+1]=7,t++,r[7]++;for(;287>=t;)st[2*t+1]=8,t++,r[8]++;for(c(st,U+1,r),t=0;H>t;t++)rt[2*t+1]=5,rt[2*t]=h(t,5);ut=new ft(st,K,j+1,U,Z),ct=new ft(rt,tt,0,H,Z),dt=new ft(new Array(0),et,0,V,X)}function f(t){var e;for(e=0;U>e;e++)t.dyn_ltree[2*e]=0;for(e=0;H>e;e++)t.dyn_dtree[2*e]=0;for(e=0;V>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*G]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?r(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,i,n){p(t),n&&(r(t,i),r(t,~i)),z.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function _(t,e,i,n){var s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]}function m(t,e,i){for(var n=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&_(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!_(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n}function v(t,e,i){var n,r,h,l,u=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?o(t,r,e):(h=ot[r],o(t,h+j+1,e),l=K[h],0!==l&&(r-=ht[h],a(t,r,l)),n--,h=s(n),o(t,h,i),l=tt[h],0!==l&&(n-=lt[h],a(t,n,l)));while(u<t.last_lit);o(t,G,e)}function y(t,e){var i,n,s,r=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=q,i=0;h>i;i++)0!==r[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)s=t.heap[++t.heap_len]=2>l?++l:0,r[2*s]=1,t.depth[s]=0,t.opt_len--,o&&(t.static_len-=a[2*s+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)m(t,r,i);s=h;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,r[2*s]=r[2*i]+r[2*n],t.depth[s]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,r[2*i+1]=r[2*n+1]=s,t.heap[1]=s++,m(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],u(t,e),c(r,l,t.bl_count)}function b(t,e,i){var n,s,r=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;i>=n;n++)s=a,a=e[2*(n+1)+1],++o<h&&s===a||(l>o?t.bl_tree[2*s]+=o:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[2*Y]++):10>=o?t.bl_tree[2*J]++:t.bl_tree[2*Q]++,o=0,r=s,0===a?(h=138,l=3):s===a?(h=6,l=3):(h=7,l=4))}function w(t,e,i){var n,s,r=-1,h=e[1],l=0,u=7,c=4;for(0===h&&(u=138,c=3),n=0;i>=n;n++)if(s=h,h=e[2*(n+1)+1],!(++l<u&&s===h)){if(c>l){do o(t,s,t.bl_tree);while(0!==--l)}else 0!==s?(s!==r&&(o(t,s,t.bl_tree),l--),o(t,Y,t.bl_tree),a(t,l-3,2)):10>=l?(o(t,J,t.bl_tree),a(t,l-3,3)):(o(t,Q,t.bl_tree),a(t,l-11,7));l=0,r=s,0===h?(u=138,c=3):s===h?(u=6,c=3):(u=7,c=4)}}function x(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=V-1;e>=3&&0===t.bl_tree[2*it[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function C(t,e,i,n){var s;for(a(t,e-257,5),a(t,i-1,5),a(t,n-4,4),s=0;n>s;s++)a(t,t.bl_tree[2*it[s]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,i-1)}function k(t){var e,i=4093624447;for(e=0;31>=e;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return L;for(e=32;j>e;e++)if(0!==t.dyn_ltree[2*e])return L;return P}function S(t){gt||(d(),gt=!0),t.l_desc=new pt(t.dyn_ltree,ut),t.d_desc=new pt(t.dyn_dtree,ct),t.bl_desc=new pt(t.bl_tree,dt),t.bi_buf=0,t.bi_valid=0,f(t)}function T(t,e,i,n){a(t,(N<<1)+(n?1:0),3),g(t,e,i,!0)}function I(t){a(t,B<<1,3),o(t,G,st),l(t)}function A(t,e,i,n){var s,r,o=0;t.level>0?(t.strm.data_type===M&&(t.strm.data_type=k(t)),y(t,t.l_desc),y(t,t.d_desc),o=x(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,s>=r&&(s=r)):s=r=i+5,s>=i+4&&-1!==e?T(t,e,i,n):t.strategy===O||r===s?(a(t,(B<<1)+(n?1:0),3),v(t,st,rt)):(a(t,(R<<1)+(n?1:0),3),C(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),v(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&p(t)}function E(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(ot[i]+j+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var z=t("../utils/common"),O=4,P=0,L=1,M=2,N=0,B=1,R=2,D=3,F=258,$=29,j=256,U=j+1+$,H=30,V=19,q=2*U+1,Z=15,W=16,X=7,G=256,Y=16,J=17,Q=18,K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,st=new Array(2*(U+2));n(st);var rt=new Array(2*H);n(rt);var at=new Array(nt);n(at);var ot=new Array(F-D+1);n(ot);var ht=new Array($);n(ht);var lt=new Array(H);n(lt);var ut,ct,dt,ft=function(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length},pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},gt=!1;i._tr_init=S,i._tr_stored_block=T,i._tr_flush_block=A,i._tr_tally=E,i._tr_align=I},{"../utils/common":27}],39:[function(t,e){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}]},{},[9])(9)});var paper=function(t,e){t=t||require("./node/window.js");var i=t.window,n=t.document,s=new function(){function t(t,e,s,r,a){function l(n,l){l=l||(l=o(e,n))&&(l.get?l:l.value),"string"==typeof l&&"#"===l[0]&&(l=t[l.substring(1)]||l);var c,d="function"==typeof l,f=l,p=a||d&&!l.base?l&&l.get?n in t:t[n]:null;a&&p||(d&&p&&(l.base=p),d&&r!==!1&&(c=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&i.isPlainObject(f)||(f={value:f,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=s),h(t,n,f))}var u={};if(e){for(var c in e)e.hasOwnProperty(c)&&!n.test(c)&&l(c);for(var c in u){var d=u[c],f=t["set"+d],p=t["get"+d]||f&&t["is"+d];!p||r!==!0&&0!==p.length||l(c,{get:p,set:f})}}return t}function i(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t];i&&c(this,i)}return this}var n=/^(statics|enumerable|beans|preserve)$/,s=[],r=s.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,h=Object.defineProperty,l=s.forEach||function(t,e){for(var i=0,n=this.length;n>i;i++)t.call(e,this[i],i,this)},u=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},c=Object.assign||function(t){for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t},d=function(t,e,i){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?l:u).call(t,e,i=i||t)}return i};return t(i,{inject:function(e){if(e){var i=e.statics===!0?e:e.statics,n=e.beans,s=e.preserve;i!==e&&t(this.prototype,e,e.enumerable,n,s),t(this,i,!0,n,s)}for(var r=1,a=arguments.length;a>r;r++)this.inject(arguments[r]);return this},extend:function(){for(var e,i,n,s=this,r=0,o=arguments.length;o>r&&(!e||!i);r++)n=arguments[r],e=e||n.initialize,i=i||n.prototype;return e=e||function(){s.apply(this,arguments)},i=e.prototype=i||a(this.prototype),h(i,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this,!0),arguments.length&&this.inject.apply(e,arguments),e.base=s,e}},!0).inject({initialize:i,set:i,inject:function(){for(var e=0,i=arguments.length;i>e;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return d(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:d,create:a,define:h,describe:o,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===i||"Object"===e.name)},pick:function(t,i){return t!==e?t:i},slice:function(t,e,i){return r.call(t,e,i)}}})};"undefined"!=typeof module&&(module.exports=s),s.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?h.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return s.importJSON(t,this)},exportJSON:function(t){return s.exportJSON(this,t)},toJSON:function(){return s.serialize(this)},set:function(t,e){return t&&s.filter(this,t,e,this._prioritize),this},statics:{exports:{enumerable:!0},extend:function nt(){var t=nt.base.apply(this,arguments),e=t.prototype._class;return e&&!s.exports[e]&&(s.exports[e]=t),t},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(!s.equals(t[i],e[i]))return!1}else{var n=Object.keys(t),i=n.length;if(i!==Object.keys(e).length)return!1;for(;i--;){var r=n[i];if(!e.hasOwnProperty(r)||!s.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,i,n,r){if(this===s){var a=this.peek(t,i);return t.__index++,a}var o=this.prototype,h=o._readIndex,l=i||h&&t.__index||0,u=t.length,c=t[l];return r=r||u-l,c instanceof this||n&&n.readNull&&null==c&&1>=r?(h&&(t.__index=l+1),c&&n&&n.clone?c.clone():c):(c=s.create(o),h&&(c.__read=!0),c=c.initialize.apply(c,l>0||u>l+r?s.slice(t,l,l+r):t)||c,h&&(t.__index=l+c.__read,c.__read=e),c)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){for(var s,r=[],a=e||0,o=n?a+n:t.length,h=a;o>h;h++)r.push(Array.isArray(s=t[h])?this.read(s,0,i):this.read(t,h,i,1));return r},readNamed:function(t,i,n,r,a){var o=this.getNamed(t,i),h=o!==e;if(h){var l=t._filtered;l||(l=t._filtered=s.create(t[0]),l._unfiltered=t[0]),l[i]=e}return this.read(h?[o]:t,n,r,a)},getNamed:function(t,i){var n=t[0];return t._hasObject===e&&(t._hasObject=1===t.length&&s.isPlainObject(n)),t._hasObject?i?n[i]:t._filtered||n:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,i,n,s){function r(s){if(!(n&&s in n||a&&s in a)){var r=i[s];r!==e&&(t[s]=r)}}var a;if(s){for(var o,h={},l=0,u=s.length;u>l;l++)(o=s[l])in i&&(r(o),h[o]=!0);a=h}return Object.keys(i._unfiltered||i).forEach(r),t},isPlainValue:function(t,e){return s.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var r,a=!n;if(a&&(e.formatter=new h(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var s=e.call(t),r=t._class;r&&s[0]!==r&&s.unshift(r),this.definitions[i]=s,n=this.references[i]=[i]}return n}}),t&&t._serialize){r=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!a&&i||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var l=0,u=t.length;u>l;l++)r[l]=s.serialize(t[l],e,i,n)}else if(s.isPlainObject(t)){r={};for(var c=Object.keys(t),l=0,u=c.length;u>l;l++){var d=c[l];r[d]=s.serialize(t[d],e,i,n)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&n.length>0?[["dictionary",n.definitions],r]:r},deserialize:function(t,e,i,n,r){var a=t,o=!i,h=o&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var l=t[0],u="dictionary"===l;if(1==t.length&&/^#/.test(l))return i.dictionary[l];l=s.exports[l],a=[];for(var c=l?1:0,d=t.length;d>c;c++)a.push(s.deserialize(t[c],e,i,u,h));if(l){var f=a;e?a=e(l,f,o||r):(a=s.create(l.prototype),l.apply(a,f))}}else if(s.isPlainObject(t)){a={},n&&(i.dictionary=a);for(var p in t)a[p]=s.deserialize(t[p],e,i)}return h?a[1]:a},exportJSON:function(t,e){var i=s.serialize(t,e);return e&&e.asString===!1?i:JSON.stringify(i)},importJSON:function(t,e){return s.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,n){var r=n&&e&&e.constructor===t,a=r?e:s.create(t.prototype);if(1===i.length&&a instanceof b&&(r||!(a instanceof x))){var o=i[0];s.isPlainObject(o)&&(o.insert=!1)}return(r?a.set:t).apply(a,i),r&&(e=null),a})},splice:function(t,i,n,s){var r=i&&i.length,a=n===e;n=a?t.length:n,n>t.length&&(n=t.length);for(var o=0;r>o;o++)i[o]._index=n+o;if(a)return t.push.apply(t,i),[];var h=[n,s];i&&h.push.apply(h,i);for(var l=t.splice.apply(t,h),o=0,u=l.length;u>o;o++)l[o]._index=e;for(var o=n+r,u=t.length;u>o;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var r={on:function(t,e){if("string"!=typeof t)s.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,n=i&&i[t],r=this._callbacks=this._callbacks||{};r=r[t]=r[t]||[],-1===r.indexOf(e)&&(r.push(e),n&&n.install&&1===r.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void s.each(t,function(t,e){this.off(e,t)},this);var i,n=this._eventTypes,r=n&&n[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(i=a.indexOf(e))&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&a.splice(i,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=s.slice(arguments,1),r=e&&e.target&&!e.currentTarget;i=i.slice(),r&&(e.currentTarget=this);for(var a=0,o=i.length;o>a;a++)if(i[a].apply(this,n)===!1){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var s in i)if(i[s].length>0){var r=e[s],a=r&&r[n];a&&a.call(this,s)}},statics:{inject:function st(t){var e=t._events;if(e){var i={};s.each(e,function(e,n){var r="string"==typeof e,a=r?e:n,o=s.capitalize(a),h=a.substring(2).toLowerCase();i[h]=r?{}:e,a="_"+a,t["get"+o]=function(){return this[a]},t["set"+o]=function(t){var e=this[a];e&&this.off(h,e),t&&this.on(h,t),this[a]=t}}),t._eventTypes=i}return st.base.apply(this,arguments)}}},a=s.extend({_class:"PaperScope",initialize:function rt(){paper=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=rt._id++,rt._scopes[this._id]=this;var e=rt.prototype;if(!this.support){var i=K.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:tt.nativeModes},K.release(i)}if(!this.agent){var n=t.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(n)||[])[0],a="darwin"===r?"mac":r,o=e.agent=e.browser={platform:a};a&&(o[a]=!0),n.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,n,s){if(!o.chrome){var r="opera"===e?n:/^(node|trident)$/.test(e)?s:i;o.version=r,o.versionNumber=parseFloat(r),e="trident"===e?"msie":e,o.name=e,o[e]=!0}}),o.chrome&&delete o.webkit,o.atom&&delete o.chrome}},version:"0.10.2-develop",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){paper.PaperScript.execute(t,this,e),q.updateFocus()},install:function(t){var e=this;s.each(["project","view","tool"],function(i){s.define(t,i,{configurable:!0,get:function(){return e[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return paper=this,this.project=new y(t),this},createCanvas:function(t,e){return K.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,i=this.palettes,n=t.length-1;n>=0;n--)t[n].remove();for(var n=e.length-1;n>=0;n--)e[n].remove();for(var n=i.length-1;n>=0;n--)i[n].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=s.extend(r,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h=s.extend({initialize:function(t){this.precision=s.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});h.instance=new h;var l=new function(){function t(t,e,i){return e>t?e:t>i?i:t}function e(t,e,i){function n(t){var e=134217729*t,i=t-e,n=i+e,s=t-n;return[n,s]}var s=e*e-t*i,a=e*e+t*i;if(3*r(s)<a){var o=n(t),h=n(e),l=n(i),u=e*e,c=h[0]*h[0]-u+2*h[0]*h[1]+h[1]*h[1],d=t*i,f=o[0]*l[0]-d+o[0]*l[1]+o[1]*l[0]+o[1]*l[1];s=u-d+(c-f)}return s}function i(){var t=Math.max.apply(Math,arguments);return t&&(1e-8>t||t>1e8)?o(2,-Math.round(h(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],s=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,a=Math.sqrt,o=Math.pow,h=Math.log2||function(t){return Math.log(t)*Math.LOG2E},u=1e-12,c=1.12e-16;return{TOLERANCE:1e-6,EPSILON:u,MACHINE_EPSILON:c,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:1e-7,WINDING_EPSILON:1e-8,TRIGONOMETRIC_EPSILON:1e-8,CLIPPING_EPSILON:1e-10,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-u&&u>=t},clamp:t,integrate:function(t,e,i,r){for(var a=n[r-2],o=s[r-2],h=.5*(i-e),l=h+e,u=0,c=r+1>>1,d=1&r?o[u++]*t(l):0;c>u;){var f=h*a[u];d+=o[u++]*(t(l+f)+t(l-f))}return h*d},findRoot:function(e,i,n,s,a,o,h){for(var l=0;o>l;l++){var u=e(n),c=u/i(n),d=n-c;if(r(c)<h){n=d;break}u>0?(a=n,n=s>=d?.5*(s+a):d):(s=n,n=d>=a?.5*(s+a):d)}return t(n,s,a)},solveQuadratic:function(n,s,o,h,l,d){var f,p=1/0;if(r(n)<u){if(r(s)<u)return r(o)<u?-1:0;f=-o/s}else{s*=-.5;var g=e(n,s,o);if(g&&r(g)<c){var _=i(r(n),r(s),r(o));_&&(n*=_,s*=_,o*=_,g=e(n,s,o))}if(g>=-c){var m=0>g?0:a(g),v=s+(0>s?-m:m);0===v?(f=o/n,p=-f):(f=v/n,p=o/v)}}var y=0,b=null==l,w=l-u,x=d+u;return isFinite(f)&&(b||f>w&&x>f)&&(h[y++]=b?f:t(f,l,d)),p!==f&&isFinite(p)&&(b||p>w&&x>p)&&(h[y++]=b?p:t(p,l,d)),y},solveCubic:function(e,n,s,h,d,f,p){function g(t){_=t;var i=e*_;m=i+n,v=m*_+s,y=(i+m)*_+v,b=v*_+h}var _,m,v,y,b,w=i(r(e),r(n),r(s),r(h));if(w&&(e*=w,n*=w,s*=w,h*=w),r(e)<u)e=n,m=s,v=h,_=1/0;else if(r(h)<u)m=n,v=s,_=0;else{g(-(n/e)/3);var x=b/e,C=o(r(x),1/3),k=0>x?-1:1,S=-y/e,T=S>0?1.324717957244746*Math.max(C,a(S)):C,I=_-k*T;if(I!==_){do g(I),I=0===y?_:_-b/y/(1+c);while(k*I>k*_);r(e)*_*_>r(h/_)&&(v=-h/_,m=(v-s)/_)}}var A=l.solveQuadratic(e,m,v,d,f,p),E=null==f;return isFinite(_)&&(0===A||A>0&&_!==d[0]&&_!==d[1])&&(E||_>f-u&&p+u>_)&&(d[A++]=E?_:t(_,f,p)),A}}},u={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},c=s.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new c(this.x,this.y)},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();l.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=c.read(arguments),e=this.getLength()*t.getLength();if(l.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(-1>i?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=c.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=c.read(arguments),e=t.x-this.x,i=t.y-this.y,n=e*e+i*i,r=s.read(arguments);return r?n:Math.sqrt(n)},normalize:function(t){t===e&&(t=1);var i=this.getLength(),n=0!==i?t/i:0,s=new c(this.x*n,this.y*n);return n>=0&&(s._angle=this._angle),s},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return i=new c(i.x*s-i.y*n,i.x*n+i.y*s),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=c.read(arguments);return new c(this.x+t.x,this.y+t.y)},subtract:function(){var t=c.read(arguments);return new c(this.x-t.x,this.y-t.y)},multiply:function(){var t=c.read(arguments);return new c(this.x*t.x,this.y*t.y)},divide:function(){var t=c.read(arguments);return new c(this.x/t.x,this.y/t.y)},modulo:function(){var t=c.read(arguments);return new c(this.x%t.x,this.y%t.y)},negate:function(){return new c(-this.x,-this.y)},isInside:function(){return g.read(arguments).contains(this)},isClose:function(){var t=c.read(arguments),e=s.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=c.read(arguments);return c.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=c.read(arguments);return c.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){return l.isZero(this.x)&&l.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&4>t?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=c.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=c.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=c.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new c(t.x*e,t.y*e)},statics:{min:function(){
var t=c.read(arguments),e=c.read(arguments);return new c(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=c.read(arguments),e=c.read(arguments);return new c(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new c(Math.random(),Math.random())},isCollinear:function(t,e,i,n){return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},s.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new c(e(this.x),e(this.y))}},{})),d=c.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),f=s.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new f(this.width,this.height)},toString:function(){var t=h.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=f.read(arguments);return new f(this.width+t.width,this.height+t.height)},subtract:function(){var t=f.read(arguments);return new f(this.width-t.width,this.height-t.height)},multiply:function(){var t=f.read(arguments);return new f(this.width*t.width,this.height*t.height)},divide:function(){var t=f.read(arguments);return new f(this.width/t.width,this.height/t.height)},modulo:function(){var t=f.read(arguments);return new f(this.width%t.width,this.height%t.height)},negate:function(){return new f(-this.width,-this.height)},isZero:function(){return l.isZero(this.width)&&l.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new f(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new f(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new f(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new f(e(this.width),e(this.height))}},{})),p=f.extend({initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),g=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,n,r){var a,o=typeof t;if("number"===o?(this._set(t,i,n,r),a=4):"undefined"===o||null===t?(this._set(0,0,0,0),a=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),a=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),a=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),s.filter(this,t),a=1)),a===e){var h,l,u=c.readNamed(arguments,"from"),d=s.peek(arguments),p=u.x,g=u.y;if(d&&d.x!==e||s.hasNamed(arguments,"to")){var _=c.readNamed(arguments,"to");h=_.x-p,l=_.y-g,0>h&&(p=_.x,h=-h),0>l&&(g=_.y,l=-l)}else{var m=f.read(arguments);h=m.width,l=m.height}this._set(p,g,h,l),a=arguments.__index}return this.__read&&(this.__read=a),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new g(this.x,this.y,this.width,this.height)},equals:function(t){var e=s.isPlainValue(t)?g.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?c:d;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?f:p;return new e(this.width,this.height,this,"setSize")},setSize:function(){var t=f.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){this._fixX!==e&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){this._fixY!==e&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){var e=t?c:d;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=c.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(g.read(arguments)):this._containsPoint(c.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=g.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=g.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=g.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new g(e,i,n-e,s-i)},unite:function(){var t=g.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new g(e,i,n-e,s-i)},include:function(){var t=c.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new g(e,i,n-e,s-i)},expand:function(){var t=f.read(arguments),e=t.width,i=t.height;return new g(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===e?t:i)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],r=t[n?1:0],a="get"+s,o="get"+r,h="set"+s,l="set"+r,u="get"+i,f="set"+i;this[u]=function(t){var e=t?c:d;return new e(this[a](),this[o](),this,f)},this[f]=function(){var t=c.read(arguments);this[h](t.x),this[l](t.y)}},{beans:!0})),_=g.extend({initialize:function(t,e,i,n,s,r){this._set(t,e,i,n,!0),this._owner=s,this._setter=r},_set:function(t,e,i,n,s){return this._x=t,this._y=e,this._width=i,this._height=n,s||this._owner[this._setter](this),this}},new function(){var t=g.prototype;return s.each(["x","y","width","height"],function(t){var e=s.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e.changeSelection&&e.changeSelection(2,t)}}))}),m=s.extend({_class:"Matrix",initialize:function at(t,e){var i=arguments.length,n=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?t instanceof at?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,e):Array.isArray(t)?this._set.apply(this,e?t.concat([e]):t):n=!1:i?n=!1:this.reset(),!n)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,s,r,a){return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=s,this._ty=r,a||this._changed(),this},_serialize:function(t,e){return s.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new m(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=h.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return i?(i.transform(null,!0,s.pick(t,!0),e),this.isIdentity()):!1},translate:function(){var t=c.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=c.read(arguments,1),i=e.x,n=e.y,s=Math.cos(t),r=Math.sin(t),a=i-i*s+n*r,o=n-i*r-n*s,h=this._a,l=this._b,u=this._c,d=this._d;return this._a=s*h+r*u,this._b=s*l+r*d,this._c=-r*h+s*u,this._d=-r*l+s*d,this._tx+=a*h+o*u,this._ty+=a*l+o*d,this._changed(),this},shear:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0}),i=Math.PI/180,n=new c(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(n,e)},append:function(t){if(t){var e=this._a,i=this._b,n=this._c,s=this._d,r=t._a,a=t._c,o=t._b,h=t._d,l=t._tx,u=t._ty;this._a=r*e+o*n,this._c=a*e+h*n,this._b=r*i+o*s,this._d=a*i+h*s,this._tx+=l*e+u*n,this._ty+=l*i+u*s,this._changed()}return this},prepend:function(t){if(t){var e=this._a,i=this._b,n=this._c,s=this._d,r=this._tx,a=this._ty,o=t._a,h=t._c,l=t._b,u=t._d,c=t._tx,d=t._ty;this._a=o*e+h*i,this._c=o*n+h*s,this._b=l*e+u*i,this._d=l*n+u*s,this._tx=o*r+h*a+c,this._ty=l*r+u*a+d,this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,s=this._tx,r=this._ty,a=t*n-e*i,o=null;return a&&!isNaN(a)&&isFinite(s)&&isFinite(r)&&(this._a=n/a,this._b=-e/a,this._c=-i/a,this._d=t/a,this._tx=(i*r-n*s)/a,this._ty=(e*s-t*r)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new m(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(c.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,s=t.y;return e||(e=new c),e._set(n*this._a+s*this._c+this._tx,n*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,s=2*i;s>n;n+=2){var r=t[n],a=t[n+1];e[n]=r*this._a+a*this._c+this._tx,e[n+1]=r*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=[e,i,n,i,n,s,e,s];return this._transformCoordinates(r,r,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),s=n.slice(0,2),r=s.slice(),a=2;8>a;a++){var o=n[a],h=1&a;o<s[h]?s[h]=o:o>r[h]&&(r[h]=o)}return e||(e=new g),e._set(s[0],s[1],r[0]-s[0],r[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(c.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,s=this._b,r=this._c,a=this._d,o=this._tx,h=this._ty,l=n*a-s*r,u=null;if(l&&!isNaN(l)&&isFinite(o)&&isFinite(h)){var d=t.x-this._tx,f=t.y-this._ty;e||(e=new c),u=e._set((d*a-f*r)/l,(f*n-d*s)/l,i)}return u},decompose:function(){var t,e,i,n=this._a,s=this._b,r=this._c,a=this._d,o=n*a-s*r,h=Math.sqrt,l=Math.atan2,u=180/Math.PI;if(0!==n||0!==s){var d=h(n*n+s*s);t=Math.acos(n/d)*(s>0?1:-1),e=[d,o/d],i=[l(n*r+s*a,d*d),0]}else if(0!==r||0!==a){var f=h(r*r+a*a);t=Math.asin(r/f)*(a>0?1:-1),e=[o/f,f],i=[0,l(n*r+s*a,f*f)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*u,scaling:new c(e),skewing:new c(i[0]*u,i[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new c(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(t){var e=s.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),v=s.extend({_class:"Line",initialize:function(t,e,i,n,s){var r=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,r=s):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,r=i),r||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new c(this._px,this._py)},getVector:function(){return new c(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return v.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return v.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(v.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return c.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return c.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,s,r,a,o,h,u){h||(i-=t,n-=e,a-=s,o-=r);var d=i*o-n*a;if(!l.isZero(d)){var f=t-s,p=e-r,g=(a*p-o*f)/d,_=(i*p-n*f)/d,m=1e-12,v=-m,y=1+m;if(u||g>v&&y>g&&_>v&&y>_)return u||(g=0>=g?0:g>=1?1:g),new c(t+g*i,e+g*n)}},getSide:function(t,e,i,n,s,r,a,o){a||(i-=t,n-=e);var h=s-t,l=r-e,u=h*n-l*i;return 0!==u||o||(u=(h*i+h*i)/(i*i+n*n),u>=0&&1>=u&&(u=0)),0>u?-1:u>0?1:0},getSignedDistance:function(t,e,i,n,s,r,a){return a||(i-=t,n-=e),0===i?n>0?s-t:t-s:0===n?0>i?r-e:e-r:((s-t)*n-(r-e)*i)/Math.sqrt(i*i+n*n)}}}),y=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new U(null,null,this),this._view=q.create(this,t||K.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return s.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var s=this._changesById,r=e._id,a=s[r];a?a.flags|=t:n.push(s[r]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function ot(){return ot.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new x({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({"class":S,match:function(i){var n=i._definition,s=n._id;return e[s]||(e[s]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],s=n._selection;1&s&&n.isInserted()?e.push(n):s||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;i>e;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof x){e._remove(!1,!0),s.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(e,new x(b.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return b._getItems(this,t)},getItem:function(t){return b._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return s.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var s=i[n];for(var r in e){var a=e[r];a&&a!=i&&delete a[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,r=new s({offset:new c(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new m],updateMatrix:!0}),a=0,o=n.length;o>a;a++)n[a].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var h=this._selectionItems,l=this._scope.settings.handleSize,u=this._updateVersion;for(var d in h)h[d]._drawSelection(t,e,l,h,u);t.restore()}}}),b=s.extend(r,{statics:{extend:function ht(t){return t._serializeFields&&(t._serializeFields=s.set({},this.prototype._serializeFields,t._serializeFields)),ht.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new m,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&s.isPlainObject(t),r=n&&t.internal===!0,a=this._matrix=new m,o=n&&t.project||paper.project,h=paper.settings;return this._id=r?null:u.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,i&&a.translate(i),a._owner=this,this._style=new U(o._currentStyle,this,o),r||n&&t.insert===!1||!h.insertItems&&(!n||t.insert!==!0)?this._setProject(o):(n&&t.parent||o)._insertItem(e,this,!0),n&&t!==b.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function i(i){for(var a in i){var o=r[a];s.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=s.serialize(o,t,"data"!==a,e))}}var n={},r=this;return i(this._serializeFields),this instanceof w||i(this._style._defaults),[this._class,n]},_changed:function(t){var i=this._symbol,n=this._parent||i,s=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),n&&40&t&&b._clearBoundsCache(n),2&t&&b._clearBoundsCache(this),s&&s._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,s=i._namedChildren;(s[t]=s[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},s.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=s.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;i>e;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;n>i;i++)e[i].setSelected(t);this.changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;n>i;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;n>i;i++)e[i].setFullySelected(t);this.changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,i=t?c:d;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}return new i(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(c.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new d(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=c.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof m,n=s.set({},i?e:t,this._boundsOptions);(!n.stroke||this.getStrokeScaling())&&(n.cacheItem=this);var r=this._getCachedBounds(i&&t,n);return arguments.length?r:new _(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=g.read(arguments),e=this.getBounds(),i=this._matrix,n=new m,s=t.getCenter();n.translate(s),(t.width!=e.width||t.height!=e.height)&&(i.isInvertible()||(i.set(i._backup||(new m).translate(i.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),s=e.getCenter(),n.translate(-s.x,-s.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(b._updateBoundsCache(this,e.cacheItem),b._getBounds(i,t,e)):new g},_getCachedBounds:function(t,e){t=t&&t._orNullIfIdentity();var i=e.internal,n=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),r=n&&(!t||t.equals(s))&&[e.stroke?1:0,e.handle?1:0,i?1:0].join("");if(b._updateBoundsCache(this._parent||this._symbol,n),r&&this._bounds&&r in this._bounds)return this._bounds[r].rect.clone();var a=this._getBounds(t||s,e);if(r){this._bounds||(this._bounds={});this._bounds[r]={rect:a.clone(),internal:e.internal}}return a},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=e;for(var n=0,s=i.list,r=s.length;r>n;n++){var a=s[n];a!==t&&(a._bounds=a._position=e,a._boundsCache&&b._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var n=1/0,s=-n,r=n,a=s;i=i||{};for(var o=0,h=t.length;h>o;o++){var l=t[o];if(l._visible&&!l.isEmpty()){var u=l._getCachedBounds(e&&e.appended(l._matrix),i);n=Math.min(u.x,n),r=Math.min(u.y,r),s=Math.max(u.x+u.width,s),a=Math.max(u.y+u.height,a)}}return isFinite(n)?new g(n,r,s-n,a-r):new g}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new d(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this._decomposed;this.scale(e.x/t.x,e.y/t.y),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,i=this._project._updateVersion;if(e&&e._updateVersion!==i&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=i}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,s=i&&i.length;s>n;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function lt(t){lt.base.call(this,t);for(var e=this._children,i=0,n=e&&e.length;n>i;i++)e[i]._installEvents(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof x)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return s.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(b.NO_INSERT),n=this._children,r=s.pick(t?t.insert:e,t===e||t===!0),a=s.pick(t?t.deep:e,!0);n&&i.copyAttributes(this),(!n||a)&&i.copyContent(this),n||i.copyAttributes(this),r&&i.insertAbove(this);var o=this._name,h=this._parent;if(o&&h){for(var n=h._children,l=o,u=1;n[o];)o=l+" "+u++;o!==l&&i.setName(o)}return i},copyContent:function(t){for(var e=t._children,i=0,n=e&&e.length;n>i;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,r=i.length;r>n;n++){var a=i[n];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,h=t._name;this._data=o?s.clone(o):null,h&&this.setName(h)},rasterize:function(t,i){var n=this.getStrokeBounds(),r=(t||this.getView().getResolution())/72,a=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),h=new f(o.subtract(a)),l=new k(b.NO_INSERT);if(!h.isZero()){var u=K.getCanvas(h.multiply(r)),c=u.getContext("2d"),d=(new m).scale(r).translate(a.negate());c.save(),d.applyToContext(c),this.draw(c,new s({matrices:[d]})),c.restore(),l.setCanvas(u)}return l.transform((new m).translate(a.add(h.divide(2))).scale(1/r)),(i===e||i)&&l.insertAbove(this),l},contains:function(){return!!this._contains(this._matrix._inverseTransform(c.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return g.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new L.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof b?this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0:!1}},new function(){function t(){return this._hitTest(c.read(arguments),I.getOptions(arguments))}function e(){var t=c.read(arguments),e=I.getOptions(arguments),i=[];return this._hitTest(t,s.set({all:i},e)),i}function i(t,e,i,n){var s=this._children;if(s)for(var r=s.length-1;r>=0;r--){var a=s[r],o=a!==n&&a._hitTest(t,e,i);if(o&&!e.all)return o}return null}return y.inject({
hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){function n(t){return t&&p&&!p(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,i){var n=u["get"+i]();return t.subtract(n).divide(l).length<=1?new I(e,g,{name:s.hyphenate(i),point:n}):void 0}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var a=this._matrix,o=i?i.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),h=Math.max(e.tolerance,1e-6),l=e._tolerancePadding=new f(L._getStrokePadding(h,a.inverted()._shiftless()));if(t=a._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(t))return null;var u,c,d=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==s.hyphenate(this._class)||e["class"]&&!(this instanceof e["class"])),p=e.match,g=this;if(d&&(e.center||e.bounds)&&this._parent){if(u=this.getInternalBounds(),e.center&&(c=r("center","Center")),!c&&e.bounds)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],m=0;8>m&&!c;m++)c=r("bounds",_[m]);c=n(c)}return c||(c=this._hitTestChildren(t,e,o)||d&&n(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o.inverted()._shiftless()))||null),c&&c.point&&(c.point=a.transform(c.point)),c},_hitTestSelf:function(t,e){return e.fill&&this.hasFill()&&this._contains(t)?new I("fill",this):void 0},matches:function(t,e){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],a=e[n];if(s.isPlainObject(r)&&s.isPlainObject(a)){if(!i(r,a))return!1}else if(!s.equals(r,a))return!1}return!0}var n=typeof t;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+s.capitalize(t)]():"type"===t?s.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(s.isPlainObject(e))return i(e,a)}return s.equals(a,e)},getItems:function(t){return b._getItems(this,t,this._matrix)},getItem:function(t){return b._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function ut(t,e,i,n,r){if(!n){var a="object"==typeof e&&e,o=a&&a.overlapping,h=a&&a.inside,l=o||h,u=l&&g.read([l]);n={items:[],recursive:a&&a.recursive!==!1,inside:!!h,overlapping:!!o,rect:u,path:o&&new L.Rectangle({rectangle:u,insert:!1})},a&&(e=s.filter({},e,{recursive:!0,inside:!0,overlapping:!0}))}var c=t._children,d=n.items,u=n.rect;i=u&&(i||new m);for(var f=0,p=c&&c.length;p>f;f++){var _=c[f],v=i&&i.appended(_._matrix),y=!0;if(u){var l=_.getBounds(v);if(!u.intersects(l))continue;u.contains(l)||n.overlapping&&(l.contains(u)||n.path.intersects(_,v))||(y=!1)}if(y&&_.matches(e)&&(d.push(_),r))break;if(n.recursive!==!1&&ut(_,e,v,n,r),r&&d.length>0)break}return d}}},{importJSON:function(t){var e=s.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){e=s.slice(e);for(var n=e.length-1;n>=0;n--){var r=e[n];r?r._remove(!1,!0):e.splice(n,1)}s.splice(i,e,t,0);for(var a=this._project,o=a._changes,n=0,h=e.length;h>n;n++){var r=e[n],l=r._name;r._parent=this,r._setProject(a,!0),l&&r.setName(l),o&&this._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(t){return t._insertItem(e,this.clone(!1))},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,s=i[n],r=s?s.indexOf(this):-1;-1!==r&&(e[n]==this&&delete e[n],s.splice(r,1),s.length?e[n]=s[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,r=this._index;return i?(this._name&&this._removeNamed(),null!=r&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(i._children,null,r,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=s.pick(e,this._children.length);for(var i=s.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var i=e(this),n=e(t),s=0,r=Math.min(i.length,n.length);r>s;s++)if(i[s]!=n[s])return i[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?s:c).read(arguments),n=c.read(arguments,0,{readNull:!0});return this.transform((new m)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new m;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,n){t&&t.isIdentity()&&(t=null);var s=this._matrix,r=(e||this._applyMatrix)&&(!s.isIdentity()||t||e&&i&&this._children);if(!t&&!r)return this;if(t&&(!t.isInvertible()&&s.isInvertible()&&(s._backup=s.getValues()),s.prepend(t)),r=r&&this._transformContent(s,i,n)){var a=this._pivot,o=this._style,h=o.getFillColor(!0),l=o.getStrokeColor(!0);a&&s._transformPoint(a,a,!0),h&&h.transform(s),l&&l.transform(s),s.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var u=this._bounds,c=this._position;this._changed(9);var d=u&&t&&t.decompose();if(d&&!d.shearing&&d.rotation%90===0){for(var f in u){var p=u[f];if(r||!p.internal){var g=p.rect;t._transformBounds(g,g)}}var _=this._boundsGetter,g=u[_&&_.getBounds||_||"getBounds"];g&&(this._position=g.getCenter(!0)),this._bounds=u}else t&&c&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,i){var n=this._children;if(n){for(var s=0,r=n.length;r>s;s++)n[s].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(c.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(c.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(c.read(arguments))},localToParent:function(){return this._matrix._transformPoint(c.read(arguments))},fitBounds:function(t,e){t=g.read(arguments);var i=this.getBounds(),n=i.height/i.width,s=t.height/t.width,r=(e?n>s:s>n)?t.width/i.width:t.height/i.height,a=new g(new c,new f(i.width*r,i.height*r));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,i){var n=this._style;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t),t.lineWidth=n.getStrokeWidth();var s=n.getStrokeJoin(),r=n.getStrokeCap(),a=n.getMiterLimit();if(s&&(t.lineJoin=s),r&&(t.lineCap=r),a&&(t.miterLimit=a),paper.support.nativeDash){var o=n.getDashArray(),h=n.getDashOffset();o&&o.length&&("setLineDash"in t?(t.setLineDash(o),t.lineDashOffset=h):(t.mozDash=o,t.mozDashOffset=h))}}if(n.hasShadow()){var l=e.pixelRatio||1,u=i._shiftless().prepend((new m).scale(l,l)),d=u.transform(new c(n.getShadowBlur(),0)),f=u.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}},draw:function(t,e,i){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var s=e.matrices,r=e.viewMatrix,a=this._matrix,o=s[s.length-1].appended(a);if(o.isInvertible()){r=r?r.appended(o):o,s.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var h,l,u,c=this._blendMode,d=this._opacity,f="normal"===c,p=tt.nativeModes[c],g=f&&1===d||e.dontStart||e.clip||(p||f&&1>d)&&this._canComposite(),_=e.pixelRatio||1;if(!g){var m=this.getStrokeBounds(r);if(!m.width||!m.height)return;u=e.offset,l=e.offset=m.getTopLeft().floor(),h=t,t=K.getContext(m.getSize().ceil().add(1).multiply(_)),1!==_&&t.scale(_,_)}t.save();var v=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!g&&e.clipItem,b=!v||y;if(g?(t.globalAlpha=d,p&&(t.globalCompositeOperation=c)):b&&t.translate(-l.x,-l.y),b&&(g?a:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(_,0,0,_,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,r,v),t.restore(),s.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(tt.process(c,t,h,d,l.subtract(u).multiply(_)),K.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof M)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,s){var r=this._selection,a=1&r,o=2&r||a&&this._selectBounds,h=4&r;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(s)){var l,u=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),d=i/2;if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,n),h){var f=this.getPosition(!0),p=f.x,g=f.y;t.beginPath(),t.arc(p,g,d,0,2*Math.PI,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],m=d,v=i+1,y=0;4>y;y++){var b=_[y],w=b[0],x=b[1];t.moveTo(p+w*m,g+x*m),t.lineTo(p+w*v,g+x*v),t.stroke()}}if(o){var C=c._transformCorners(this.getInternalBounds());t.beginPath();for(var y=0;8>y;y++)t[y?"lineTo":"moveTo"](C[y],C[++y]);t.closePath(),t.stroke();for(var y=0;8>y;y++)t.fillRect(C[y]-d,C[++y]-d,i,i)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(t){this["removeOn"+s.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,s=n._removeSets=n._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}})),w=b.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function ct(t){ct.base.call(this,t),1026&t&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var i=this._children,n=0,s=i.length;s>n;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function dt(t,e){var i=this._getClipItem();return i?i._getCachedBounds(t&&t.appended(i._matrix),s.set({},e,{stroke:!1})):dt.base.call(this,t,e)},_hitTestChildren:function ft(t,e,i){var n=this._getClipItem();return(!n||n.contains(t))&&ft.base.call(this,t,e,i,n)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var s=this._children,r=0,a=s.length;a>r;r++){var o=s[r];o!==n&&o.draw(t,e)}}}),x=w.extend({_class:"Layer",initialize:function(){w.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function pt(){return this._parent?pt.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=b.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&s.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=f.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(f.min(this._radius,t.divide(2))):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var i=2*t;this._radius=t,this._size._set(i,i)}else if(t=f.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var i=f.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new(L[s.capitalize(this._type)])({center:new c,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),paper.settings.applyMatrix&&i.setApplyMatrix(!0),(t===e||t)&&i.insertAbove(this),i},toShape:"#clone",_draw:function(t,e,i,n){var s=this._style,r=s.hasFill(),a=s.hasStroke(),o=e.dontFinish||e.clip,h=!n;if(r||a||o){var l=this._type,u=this._radius,c="circle"===l;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,f=c?u:u.height,p=this._size,g=p.width,_=p.height;if(h&&"rectangle"===l&&0===d&&0===f)t.rect(-g/2,-_/2,g,_);else{var m=g/2,v=_/2,y=.44771525016920644,b=d*y,w=f*y,x=[-m,-v+f,-m,-v+w,-m+b,-v,-m+d,-v,m-d,-v,m-b,-v,m,-v+w,m,-v+f,m,v-f,m,v-w,m-b,v,m-d,v,-m+d,v,-m+b,v,-m,v-w,-m,v-f];n&&n.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),m!==d&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),v!==f&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),m!==d&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}o||!r&&!a||(this._setStyles(t,e,i),r&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new g(this._size).setCenter(0,0),n=this._style,s=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),s?i.expand(L._getStrokePadding(s,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var s=t._size.divide(2),r=1;4>=r;r++){var a=new c(r>1&&4>r?-1:1,r>2?-1:1),o=a.multiply(s),h=o.subtract(a.multiply(n)),l=new g(i?o.add(a.multiply(i)):o,h);if(l.contains(e))return{point:h,quadrant:r}}}function e(t,e,i,n){var s=t.divide(e);return(!n||s.isInQuadrant(n))&&s.subtract(s.normalize()).multiply(e).divide(i).length<=1}return{_contains:function i(e){if("rectangle"===this._type){var n=t(this,e);return n?e.subtract(n.point).divide(this._radius).getLength()<=1:i.base.call(this,e)}return e.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,s,r,a){var o=!1,h=this._style,l=s.stroke&&h.hasStroke(),u=s.fill&&h.hasFill();if(l||u){var c=this._type,d=this._radius,f=l?h.getStrokeWidth()/2:0,p=s._tolerancePadding.add(L._getStrokePadding(f,!h.getStrokeScaling()&&a));if("rectangle"===c){var _=p.multiply(2),m=t(this,i,_);if(m)o=e(i.subtract(m.point),d,p,m.quadrant);else{var v=new g(this._size).setCenter(0,0),y=v.expand(_),b=v.expand(_.negate());o=y._containsPoint(i)&&!b._containsPoint(i)}}else o=e(i,d,p)}return o?new I(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,r){var a=new C(s.getNamed(r));return a._type=t,a._size=i,a._radius=n,a.translate(e)}return{Circle:function(){var e=c.readNamed(arguments,"center"),i=s.readNamed(arguments,"radius");return t("circle",e,new f(2*i),i,arguments)},Rectangle:function(){var e=g.readNamed(arguments,"rectangle"),i=f.min(f.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=C._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(s.hasNamed(t,"radius"))e=c.readNamed(t,"center"),i=f.readNamed(t,"radius");else{var n=g.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),k=b.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,i){if(!this._initialize(t,i!==e&&c.read(arguments,1))){var s="string"==typeof t?n.getElementById(t):t;s?this.setImage(s):this.setSource(t)}this._size||(this._size=new f,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=K.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=f.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(K.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&K.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new c(0,0).transform(t),i=new c(1,0).transform(t).subtract(e),n=new c(0,1).transform(t).subtract(e);return new f(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=i.getView(),n=t&&t.type||"load";e&&i.responds(n)&&(paper=e._scope,i.emit(n,new W(t)))}var i=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&V.add(t,{load:function(n){i._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&K.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new f(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=K.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){K.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var i=new t.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),i.src=e,this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=g.read(arguments),e=K.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=g.read(arguments),e=new k(b.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=c.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof P?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new g(t):"x"in t&&(e=new g(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=32,r=Math.min(e.width,n),a=Math.min(e.height,n),o=k._sampleContext;o?o.clearRect(0,0,n+1,n+1):o=k._sampleContext=K.getContext(new f(n)),o.save();var h=(new m).scale(r/e.width,a/e.height).translate(-e.x,-e.y);h.applyToContext(o),i&&i.draw(o,new s({clip:!0,matrices:[h]})),this._matrix.applyToContext(o);var l=this.getElement(),u=this._size;l&&o.drawImage(l,-u.width/2,-u.height/2),o.restore();for(var c=o.getImageData(.5,.5,Math.ceil(r),Math.ceil(a)).data,d=[0,0,0],p=0,_=0,v=c.length;v>_;_+=4){var y=c[_+3];p+=y,y/=255,d[0]+=c[_]*y,d[1]+=c[_+1]*y,d[2]+=c[_+2]*y}for(var _=0;3>_;_++)d[_]/=p;return p?F.read(d):null},getPixel:function(){var t=c.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new F("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=c.read(arguments),e=F.read(arguments),i=e._convert("rgb"),n=e._alpha,s=this.getContext(!0),r=s.createImageData(1,1),a=r.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=n?255*n:255,s.putImageData(r,t.x,t.y)},createImageData:function(){var t=f.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=g.read(arguments);return t.isEmpty()&&(t=new g(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=c.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new g(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new I("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),S=b.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==e&&c.read(arguments,1))||this.setDefinition(t instanceof T?t:new T(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i,n){var s=this._definition._item._hitTest(t,e,i);return s&&(s.item=this),s},_draw:function(t,e){this._definition._item.draw(t,e)}}),T=s.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=u.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return s.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&b._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new c),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new S(this,t)},clone:function(){return new T(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),I=s.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&(i.enumerable=!0,this.inject(i))},statics:{getOptions:function(t){var e=t&&s.read(t);return s.set({type:null,tolerance:paper.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),A=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,n,s,r,a){var o,h,l,u,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,h=t.handleIn,l=t.handleOut,u=t.selection):(o=t,h=i,l=n,u=s):(o=[t,i],h=n!==e?[n,s]:null,l=r!==e?[r,a]:null)),new E(o,this,"_point"),new E(h,this,"_handleIn"),new E(l,this,"_handleOut"),u&&this.setSelection(u)},_serialize:function(t,e){var i=this._point,n=this._selection,r=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&r.push(n),s.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,s=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=s>0?n[s-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[s])||i._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(c.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(c.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(c.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(129))},changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this.changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new O(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){var s=t||{},r=s.type,a=s.factor,o=this.getPrevious(),h=this.getNext(),l=(o||this)._point,u=this._point,d=(h||this)._point,f=l.getDistance(u),p=u.getDistance(d);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&h){var g=l.subtract(d),_=a===e?.4:a,m=_*f/(f+p);i||this.setHandleIn(g.multiply(m)),n||this.setHandleOut(g.multiply(m-_))}}else{var v=a===e?.5:a,y=Math.pow(f,v),b=y*y,w=Math.pow(p,v),x=w*w;if(!i&&o){var C=2*x+3*w*y+b,k=3*w*(w+y);this.setHandleIn(0!==k?new c((x*l._x+C*u._x-b*d._x)/k-u._x,(x*l._y+C*u._y-b*d._y)/k-u._y):new c)}if(!n&&h){var C=2*b+3*y*w+x,k=3*y*(y+w);this.setHandleOut(0!==k?new c((b*d._x+C*u._x-x*l._x)/k-u._x,(b*d._y+C*u._y-x*l._y)/k-u._y):new c)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new A(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new A(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,s=i,r=t._point,a=e._point,o=t._handleIn,h=e._handleIn,l=e._handleOut,u=t._handleOut;this._point._set(n*r._x+s*a._x,n*r._y+s*a._y,!0),this._handleIn._set(n*o._x+s*h._x,n*o._y+s*h._y,!0),this._handleOut._set(n*u._x+s*l._x,n*u._y+s*l._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,r=i&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,h=2;return e[0]=a,e[1]=o,s&&(e[h++]=s._x+a,e[h++]=s._y+o),r&&(e[h++]=r._x+a,e[h++]=r._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],i?(n._x=a,n._y=o,h=2,s&&(s._x=e[h++]-a,s._y=e[h++]-o),r&&(r._x=e[h++]-a,r._y=e[h++]-o)):(s||(e[h++]=a,e[h++]=o),r||(e[h++]=a,e[h++]=o))),e}}),E=c.extend({initialize:function(t,i,n){var s,r,a;if(t)if((s=t[0])!==e)r=t[1];else{var o=t;(s=o.x)===e&&(o=c.read(arguments),s=o.x),r=o.y,a=o.selected}else s=r=0;this._x=s,this._y=r,this._owner=i,i[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return l.isZero(this._x)&&l.isZero(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),z=s.extend({_class:"Curve",initialize:function(t,e,i,n,s,r,a,o){var h,l,u,c,d,f,p=arguments.length;3===p?(this._path=t,h=e,l=i):p?1===p?"segment1"in t?(h=new A(t.segment1),l=new A(t.segment2)):"point1"in t?(u=t.point1,d=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(u=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(h=new A(t),l=new A(e)):4===p?(u=t,d=e,f=i,c=n):8===p&&(u=[t,e],c=[a,o],d=[i-t,n-e],f=[s-a,r-o]):(h=new A,l=new A),this._segment1=h||new A(u,null,d),this._segment2=l||new A(c,f,null)},_serialize:function(t,e){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e);
},_changed:function(){this._length=this._bounds=e},clone:function(){return new z(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(c.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(c.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(c.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(c.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return z.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;8>i;i+=2)e.push(new c(t[i],t[i+1]));return e},getLength:function(){return null==this._length&&(this._length=z.getLength(this.getValues(),0,1)),this._length},getArea:function(){return z.getArea(this.getValues())},getLine:function(){return new v(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new z(z.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return z.getLength(this.getValues(),t,e)},getIntersections:function(t){return z._getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{})},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=4e-7,n=1-i,s=null;if(t>=i&&n>=t){var r=z.subdivide(this.getValues(),t),a=r[0],o=r[1],h=e||this.hasHandles(),l=this._segment1,u=this._segment2,d=this._path;h&&(l._handleOut._set(a[2]-a[0],a[3]-a[1]),u._handleIn._set(o[4]-o[6],o[5]-o[7]));var f=a[6],p=a[7],g=new A(new c(f,p),h&&new c(a[4]-f,a[5]-p),h&&new c(o[2]-f,o[3]-p));d?(d.insert(l._index+1,g),s=this.getNext()):(this._segment2=g,this._changed(),s=new z(g,u))}return s},splitAt:function(t){return this._path?this._path.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===e?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===e?.5:i?t:this.getTimeAt(t))},reversed:function(){return new z(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){var s=t._point,r=t._handleOut,a=e._handleIn,o=e._point,h=s.x,l=s.y,u=o.x,c=o.y,d=n?[h,l,h,l,u,c,u,c]:[h,l,h+r._x,l+r._y,u+a._x,c+a._y,u,c];return i&&i._transformCoordinates(d,d,4),d},subdivide:function(t,i){var n=t[0],s=t[1],r=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7];i===e&&(i=.5);var c=1-i,d=c*n+i*r,f=c*s+i*a,p=c*r+i*o,g=c*a+i*h,_=c*o+i*l,m=c*h+i*u,v=c*d+i*p,y=c*f+i*g,b=c*p+i*_,w=c*g+i*m,x=c*v+i*b,C=c*y+i*w;return[[n,s,d,f,v,y,x,C],[x,C,b,w,_,m,l,u]]},getMonoCurves:function(t,e){var i=[],n=e?0:1,s=t[n],r=t[n+2],a=t[n+4],o=t[n+6];if(s>=r==r>=a&&r>=a==a>=o||z.isStraight(t))i.push(t);else{var h=3*(r-a)-s+o,u=2*(s+a)-4*r,c=r-s,d=4e-7,f=1-d,p=[],g=l.solveQuadratic(h,u,c,p,d,f);if(g){p.sort();var _=p[0],m=z.subdivide(t,_);i.push(m[0]),g>1&&(_=(p[1]-_)/(1-_),m=z.subdivide(m[1],_),i.push(m[0])),i.push(m[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,s,r){var a=t[e],o=t[e+2],h=t[e+4],u=t[e+6],c=0;if(!(i>a&&i>u&&i>o&&i>h||a>i&&u>i&&o>i&&h>i)){var d=3*(o-a),f=3*(h-o)-d,p=u-a-d-f;c=l.solveCubic(p,f,d,a-i,n,s,r)}return c},getTimeOf:function(t,e){var i=new c(t[0],t[1]),n=new c(t[6],t[7]),s=1e-12,r=1e-7,a=e.isClose(i,s)?0:e.isClose(n,s)?1:null;if(null===a)for(var o=[e.x,e.y],h=[],l=0;2>l;l++)for(var u=z.solveCubic(t,l,o[l],h,0,1),d=0;u>d;d++){var f=h[d];if(e.isClose(z.getPoint(t,f),r))return f}return e.isClose(i,r)?0:e.isClose(n,r)?1:null},getNearestTime:function(t,e){function i(i){if(i>=0&&1>=i){var n=e.getDistance(z.getPoint(t,i),!0);if(f>n)return f=n,p=i,!0}}if(z.isStraight(t)){var n=t[0],s=t[1],r=t[6],a=t[7],o=r-n,h=a-s,l=o*o+h*h;if(0===l)return 0;var u=((e.x-n)*o+(e.y-s)*h)/l;return 1e-12>u?0:u>.999999999999?1:z.getTimeOf(t,new c(n+u*o,s+u*h))}for(var d=100,f=1/0,p=0,g=0;d>=g;g++)i(g/d);for(var _=1/(2*d);_>4e-7;)i(p-_)||i(p+_)||(_/=2);return p},getPart:function(t,e,i){var n=e>i;if(n){var s=e;e=i,i=s}return e>0&&(t=z.subdivide(t,e)[1]),1>i&&(t=z.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],h=t[6],l=t[7],u=3*s-2*i-h,c=3*r-2*n-l,d=3*a-2*h-i,f=3*o-2*l-n;return Math.max(u*u,d*d)+Math.max(c*c,f*f)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7];return 3*((h-i)*(n+r)-(o-e)*(s+a)+s*(e-r)-n*(i-a)+h*(r+e/3)-o*(a+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],s=0;2>s;s++)z._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,n);return new g(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,s,r,a,o,h){function u(t,e){var i=t-e,n=t+e;i<a[s]&&(a[s]=i),n>o[s]&&(o[s]=n)}r/=2;var c=a[s]-r,d=o[s]+r;if(c>t||c>e||c>i||c>n||t>d||e>d||i>d||n>d)if(t>e!=n>e&&t>i!=n>i)u(t,r),u(n,r);else{var f=3*(e-i)-t+n,p=2*(t+i)-4*e,g=e-t,_=l.solveQuadratic(f,p,g,h),m=4e-7,v=1-m;u(n,0);for(var y=0;_>y;y++){var b=h[y],w=1-b;b>m&&v>b&&u(w*w*w*t+3*w*w*b*e+3*w*b*b*i+b*b*b*n,r)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=L[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),s.each({isStraight:function(t,e,i){if(e.isZero()&&i.isZero())return!0;var n=t.getVector(),s=1e-7;if(n.isZero())return!1;if(t.getDistance(e)<s&&t.getDistance(i)<s){var r=n.dot(n),a=n.dot(e)/r,o=n.dot(i)/r;return a>=0&&1>=a&&0>=o&&o>=-1}return!1},isLinear:function(t,e,i){var n=t.getVector().divide(3);return e.equals(n)&&i.negate().equals(n)}},function(t,e){this[e]=function(){var e=this._segment1,i=this._segment2;return t(new v(e._point,i._point),e._handleOut,i._handleIn)},this.statics[e]=function(e){var i=e[0],n=e[1],s=e[6],r=e[7];return t(new v(i,n,s,r),new c(e[2]-i,e[3]-n),new c(e[4]-s,e[5]-r))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){var e=this._segment1,i=this._segment2;return(!e._point.equals(i._point)||e.hasHandles()||i.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&1>=t?new O(this,t):null},getTimeAt:function(t,e){return z.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(c.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return z.getTimeOf(this.getValues(),c.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=c.read(arguments),e=this.getValues(),i=z.getNearestTime(e,t),n=z.getPoint(e,i);return new O(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(t,function(t){this[t+"At"]=function(e,i){var n=this.getValues();return z[t](n,i?e:z.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return z[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],h=t[7],l=9*(n-r)+3*(o-e),u=6*(e+r)-12*n,c=3*(n-e),d=9*(s-a)+3*(h-i),f=6*(i+a)-12*s,p=3*(s-i);return function(t){var e=(l*t+u)*t+c,i=(d*t+f)*t+p;return Math.sqrt(e*e+i*i)}}function i(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,i,n){if(null==e||0>e||e>1)return null;var s=t[0],r=t[1],a=t[2],o=t[3],h=t[4],u=t[5],d=t[6],f=t[7],p=l.isZero;p(a-s)&&p(o-r)&&(a=s,o=r),p(h-d)&&p(u-f)&&(h=d,u=f);var g,_,m=3*(a-s),v=3*(h-a)-m,y=d-s-m-v,b=3*(o-r),w=3*(u-o)-b,x=f-r-b-w;if(0===i)g=0===e?s:1===e?d:((y*e+v)*e+m)*e+s,_=0===e?r:1===e?f:((x*e+w)*e+b)*e+r;else{var C=4e-7,k=1-C;if(C>e?(g=m,_=b):e>k?(g=3*(d-h),_=3*(f-u)):(g=(3*y*e+2*v)*e+m,_=(3*x*e+2*w)*e+b),n){0===g&&0===_&&(C>e||e>k)&&(g=h-a,_=u-o);var S=Math.sqrt(g*g+_*_);S&&(g/=S,_/=S)}if(3===i){var T=6*y*e+2*v,I=6*x*e+2*w,A=Math.pow(g*g+_*_,1.5);g=0!==A?(g*I-_*T)/A:0,_=0}}return 2===i?new c(_,-g):new c(g,_)}return{statics:{getLength:function(n,s,r,a){if(s===e&&(s=0),r===e&&(r=1),z.isStraight(n)){var o=n;1>r&&(o=z.subdivide(o,r)[0],s/=r),s>0&&(o=z.subdivide(o,s)[1]);var h=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(h*h+u*u)}return l.integrate(a||t(n),s,r,i(s,r))},getTimeAt:function(n,s,r){function a(t){return m+=l.integrate(f,r,t,i(r,t)),r=t,m-s}if(r===e&&(r=0>s?1:0),0===s)return r;var o=Math.abs,h=1e-12,u=s>0,c=u?r:0,d=u?1:r,f=t(n),p=z.getLength(n,c,d,f),g=o(s)-p;if(o(g)<h)return u?d:c;if(g>h)return null;var _=s/p,m=0;return l.findRoot(a,f,r+_,c,d,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x}}}},new function(){function t(t,e,i,n,s,r,a,o,h,l,u){var c=!u&&e.excludeStart,d=!u&&e.excludeEnd,f=4e-7,p=1-f;if(null==s&&(s=z.getTimeOf(i,r)),null!==s&&s>=(c?f:0)&&(d?p:1)>=s&&(null==h&&(h=z.getTimeOf(a,l)),null!==h&&h>=(d?f:0)&&(c?p:1)>=h)){var g=e.renormalize;if(g){var _=g(s,h);s=_[0],h=_[1]}var m=new O(n,s,r||z.getPoint(i,s),u),v=new O(o,h,l||z.getPoint(a,h),u),y=m.getPath()===v.getPath()&&m.getIndex()>v.getIndex(),b=y?v:m,w=e.include;m._intersection=v,v._intersection=m,(!w||w(b))&&O.insert(t,b,!0)}}function e(s,r,a,o,h,l,u,c,d,f,p,g,_){if(++g>=48||++_>4096)return _;var m,y,b=r[0],w=r[1],x=r[6],C=r[7],k=v.getSignedDistance,S=k(b,w,x,C,r[2],r[3]),T=k(b,w,x,C,r[4],r[5]),I=S*T>0?.75:4/9,A=I*Math.min(0,S,T),E=I*Math.max(0,S,T),O=k(b,w,x,C,s[0],s[1]),P=k(b,w,x,C,s[2],s[3]),L=k(b,w,x,C,s[4],s[5]),M=k(b,w,x,C,s[6],s[7]),N=i(O,P,L,M),B=N[0],R=N[1];if(0===S&&0===T&&0===O&&0===P&&0===L&&0===M||null==(m=n(B,R,A,E))||null==(y=n(B.reverse(),R.reverse(),A,E)))return _;var D=u+(c-u)*m,F=u+(c-u)*y;if(Math.max(f-d,F-D)<1e-10){var $=(D+F)/2,j=(d+f)/2;s=a.getValues(),r=o.getValues(),t(h,l,p?r:s,p?o:a,p?j:$,null,p?s:r,p?a:o,p?$:j,null)}else if(s=z.getPart(s,m,y),y-m>.8)if(F-D>f-d){var U=z.subdivide(s,.5),$=(D+F)/2;_=e(r,U[0],o,a,h,l,d,f,D,$,!p,g,_),_=e(r,U[1],o,a,h,l,d,f,$,F,!p,g,_)}else{var U=z.subdivide(r,.5),j=(d+f)/2;_=e(U[0],s,o,a,h,l,d,j,D,F,!p,g,_),_=e(U[1],s,o,a,h,l,j,f,D,F,!p,g,_)}else _=f-d>=1e-10?e(r,s,o,a,h,l,d,f,D,F,!p,g,_):e(s,r,a,o,h,l,D,F,d,f,p,g,_);return _}function i(t,e,i,n){var s,r=[0,t],a=[1/3,e],o=[2/3,i],h=[1,n],l=e-(2*t+n)/3,u=i-(t+2*n)/3;if(0>l*u)s=[[r,a,h],[r,o,h]];else{var c=l/u;s=[c>=2?[r,a,h]:.5>=c?[r,o,h]:[r,a,o,h],[r,h]]}return 0>(l||u)?s.reverse():s}function n(t,e,i,n){return t[0][1]<i?s(t,!0,i):e[0][1]>n?s(e,!1,n):t[0][0]}function s(t,e,i){for(var n=t[0][0],s=t[0][1],r=1,a=t.length;a>r;r++){var o=t[r][0],h=t[r][1];if(e?h>=i:i>=h)return h===i?o:n+(i-s)*(o-n)/(h-s);n=o,s=h}return null}function r(e,i,n,s,r,a){for(var o=z.isStraight(e),h=o?i:e,u=o?e:i,c=u[0],d=u[1],f=u[6],p=u[7],g=f-c,_=p-d,m=Math.atan2(-_,g),v=Math.sin(m),y=Math.cos(m),b=[],w=0;8>w;w+=2){var x=h[w]-c,C=h[w+1]-d;b.push(x*y-C*v,x*v+C*y)}for(var k=[],S=z.solveCubic(b,1,0,k,0,1),w=0;S>w;w++){var T=k[w],I=z.getPoint(h,T),A=z.getTimeOf(u,I);if(null!==A){var E=z.getPoint(u,A),O=o?A:T,P=o?T:A;(!a.excludeEnd||P>l.CURVETIME_EPSILON)&&t(r,a,e,n,O,o?E:I,i,s,P,o?I:E)}}}function a(e,i,n,s,r,a){var o=v.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);o&&t(r,a,e,n,null,o,i,s,null,o)}return{statics:{_getIntersections:function(i,n,s,o,h,l){if(!n)return z._getSelfIntersection(i,s,h,l);var u=1e-12,d=i[0],f=i[1],p=i[2],g=i[3],_=i[4],m=i[5],v=i[6],y=i[7],b=n[0],w=n[1],x=n[2],C=n[3],k=n[4],S=n[5],T=n[6],I=n[7],A=Math.min,E=Math.max;if(!(E(d,p,_,v)+u>A(b,x,k,T)&&A(d,p,_,v)-u<E(b,x,k,T)&&E(f,g,m,y)+u>A(w,C,S,I)&&A(f,g,m,y)-u<E(w,C,S,I)))return h;var O=z.getOverlaps(i,n);if(O){for(var P=0;2>P;P++){var L=O[P];t(h,l,i,s,L[0],null,n,o,L[1],null,!0)}return h}var M=z.isStraight(i),N=z.isStraight(n),B=M&&N,R=h.length;if((B?a:M||N?r:e)(i,n,s,o,h,l,0,1,0,1,0,0,0),B&&h.length>R)return h;var D=new c(d,f),F=new c(v,y),$=new c(b,w),j=new c(T,I);return D.isClose($,u)&&t(h,l,i,s,0,D,n,o,0,$),!l.excludeStart&&D.isClose(j,u)&&t(h,l,i,s,0,D,n,o,1,j),!l.excludeEnd&&F.isClose($,u)&&t(h,l,i,s,1,F,n,o,0,$),F.isClose(j,u)&&t(h,l,i,s,1,F,n,o,1,j),h},_getSelfIntersection:function(t,e,i,n){var s=t[0],r=t[1],a=t[2],o=t[3],h=t[4],u=t[5],d=t[6],f=t[7],p=new v(s,r,d,f,!1),g=p.getSide(new c(a,o),!0),_=p.getSide(new c(h,u),!0);if(g===_){var m=(s-h)*(o-f)+(a-d)*(u-r);if(m*g>0)return i}var y=d-3*h+3*a-s,b=h-2*a+s,w=a-s,x=f-3*u+3*o-r,C=u-2*o+r,k=o-r,S=x*w-y*k,T=x*b-y*C,I=C*w-b*k;if(0>S*S-4*T*I){var A,E=[],O=l.solveCubic(y*y+x*x,3*(y*b+x*C),2*(b*b+C*C)+y*w+x*k,b*w+C*k,E,0,1);if(O>0){for(var P=0,L=0;O>P;P++){var M=Math.abs(e.getCurvatureAtTime(E[P]));M>L&&(L=M,A=E[P])}var N=z.subdivide(t,A);n.excludeEnd=!0,n.renormalize=function(t,e){return[t*A,e*(1-A)+A]},z._getIntersections(N[0],N[1],e,e,i,n)}}return i},getOverlaps:function(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var n=Math.abs,s=4e-7,r=1e-7,a=z.isStraight(t),o=z.isStraight(e),h=a&&o,l=i(t)<i(e),u=l?e:t,d=l?t:e,f=new v(u[0],u[1],u[6],u[7]);if(f.getDistance(new c(d[0],d[1]))<r&&f.getDistance(new c(d[6],d[7]))<r)!h&&f.getDistance(new c(u[2],u[3]))<r&&f.getDistance(new c(u[4],u[5]))<r&&f.getDistance(new c(d[2],d[3]))<r&&f.getDistance(new c(d[4],d[5]))<r&&(a=o=h=!0);else if(h)return null;if(a^o)return null;for(var p=[t,e],g=[],_=0;4>_&&g.length<2;_++){var m=1&_,y=1^m,b=_>>1,w=z.getTimeOf(p[m],new c(p[y][b?6:0],p[y][b?7:1]));if(null!=w){var x=m?[b,w]:[w,b];(!g.length||n(x[0]-g[0][0])>s&&n(x[1]-g[0][1])>s)&&g.push(x)}if(_>2&&!g.length)break}if(2!==g.length)g=null;else if(!h){var C=z.getPart(t,g[0][0],g[1][0]),k=z.getPart(e,g[0][1],g[1][1]);(n(k[2]-C[2])>r||n(k[3]-C[3])>r||n(k[4]-C[4])>r||n(k[5]-C[5])>r)&&(g=null)}return g}}}}),O=s.extend({_class:"CurveLocation",initialize:function(t,e,i,n,s){if(e>.9999996){var r=t.getNext();r&&(e=0,t=r)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=s,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this.getCurve(),e=this._segment;if(!e){var i=this.getTime();0===i?e=t._segment1:1===i?e=t._segment2:null!=i&&(e=t.getPartLength(0,i)<t.getPartLength(i,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){function t(t){var e=t&&t.getCurve();return e&&null!=(i._time=e.getTimeOf(i._point))?(i._setCurve(e),i._segment=t,e):void 0}var e=this._path,i=this;return e&&e._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment1.getNext())||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),s=0;i>s;s++)t+=n[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this.getCurve(),e=this.getTime();return null!=e&&t&&t.getPartLength(0,e)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=null;return t&&(e=t.divideAtTime(this.getTime()))&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve();return t?t.splitAtTime(this.getTime()):null},equals:function(t,e){var i=this===t,n=1e-7;if(!i&&t instanceof O&&this.getPath()===t.getPath()&&this.getPoint().isClose(t.getPoint(),n)){var s=this.getCurve(),r=t.getCurve(),a=Math.abs,o=a((s.isLast()&&r.isFirst()?-1:s.getIndex())+this.getTime()-((r.isLast()&&s.isFirst()?-1:r.getIndex())+t.getTime()));i=(4e-7>o||(o=a(this.getOffset()-t.getOffset()))<n||a(this.getPath().getLength()-o)<n)&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0))}return i},toString:function(){var t=[],e=this.getPoint(),i=h.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var s=this.getTime();return null!=s&&t.push("time: "+i.number(s)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){function t(t,e,i){return i>e?t>e&&i>t:t>e||i>t}var e=this._intersection;if(!e)return!1;var i=this.getTime(),n=e.getTime(),s=4e-7,r=1-s,a=i>s&&r>i,o=n>s&&r>n;if(a&&o)return!this.isTouching();var h=this.getCurve(),l=s>=i?h.getPrevious():h,u=e.getCurve(),c=s>=n?u.getPrevious():u;if(i>=r&&(h=h.getNext()),n>=r&&(u=u.getNext()),!(l&&h&&c&&u))return!1;var d=[];a||d.push(l.getLength(),h.getLength()),o||d.push(c.getLength(),u.getLength());var f=this.getPoint(),p=Math.min.apply(Math,d)/64,g=a?h.getTangentAtTime(i):h.getPointAt(p).subtract(f),_=a?g.negate():l.getPointAt(-p).subtract(f),m=o?u.getTangentAtTime(n):u.getPointAt(p).subtract(f),v=o?m.negate():c.getPointAt(-p).subtract(f),y=_.getAngle(),b=g.getAngle(),w=v.getAngle(),x=m.getAngle();return!!(a?t(y,w,x)^t(b,w,x)&&t(y,x,w)^t(b,x,w):t(w,y,b)^t(x,y,b)&&t(w,b,y)^t(x,b,y))},hasOverlap:function(){return!!this._overlap}},s.each(z._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){function n(i,n){for(var r=i+n;r>=-1&&s>=r;r+=n){var a=t[(r%s+s)%s];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(var s=t.length,r=0,a=s-1;a>=r;){var o,h=r+a>>>1,l=t[h];if(i&&(o=e.equals(l)?l:n(h,-1)||n(h,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var u=e.getPath(),c=l.getPath(),d=u!==c?u._id-c._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime());0>d?a=h-1:r=h+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),P=b.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(s.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var r=i[0];n=r&&Array.isArray(r[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var a=n?M:L;return new a(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var i=+n[t];return o&&(i+=h[e]),i}function i(t){return new c(e(t,"x"),e(t+1,"y"))}var n,s,r,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,h=new c,l=new c;this.clear();for(var u=0,d=a&&a.length;d>u;u++){var p=a[u],g=p[0],_=g.toLowerCase();n=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var m=n&&n.length;switch(o=g===_,"z"!==s||/[mz]/.test(_)||this.moveTo(h),_){case"m":case"l":for(var v="m"===_,y=0;m>y;y+=2)this[v?"moveTo":"lineTo"](h=i(y)),v&&(l=h,v=!1);r=h;break;case"h":case"v":var b="h"===_?"x":"y";h=h.clone();for(var y=0;m>y;y++)h[b]=e(y,b),this.lineTo(h);r=h;break;case"c":for(var y=0;m>y;y+=6)this.cubicCurveTo(i(y),r=i(y+2),h=i(y+4));break;case"s":for(var y=0;m>y;y+=4)this.cubicCurveTo(/[cs]/.test(s)?h.multiply(2).subtract(r):h,r=i(y),h=i(y+2)),s=_;break;case"q":for(var y=0;m>y;y+=4)this.quadraticCurveTo(r=i(y),h=i(y+2));break;case"t":for(var y=0;m>y;y+=2)this.quadraticCurveTo(r=/[qt]/.test(s)?h.multiply(2).subtract(r):h,h=i(y)),s=_;break;case"a":for(var y=0;m>y;y+=7)this.arcTo(h=i(y+5),new f(+n[y],+n[y+1]),+n[y+2],+n[y+4],+n[y+3]);break;case"z":this.closePath(1e-12),h=l}s=_}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var s=this===t||!t,r=this._matrix._orNullIfIdentity(),a=s?r:(i||t._matrix)._orNullIfIdentity();if(!s&&!this.getBounds(r).touches(t.getBounds(a)))return[];for(var o,h,l=this.getCurves(),u=s?l:t.getCurves(),c=l.length,d=s?c:u.length,f=[],p=[],g=0;d>g;g++)f[g]=u[g].getValues(a);for(var g=0;c>g;g++){var _=l[g],m=s?f[g]:_.getValues(r),v=_.getPath();v!==h&&(h=v,o=[],p.push(o)),s&&z._getSelfIntersection(m,_,o,{include:e,excludeStart:1===c&&_.getPoint1().equals(_.getPoint2())});for(var y=s?g+1:0;d>y;y++){if(n&&o.length)return o;var b=u[y];z._getIntersections(m,f[y],_,b,o,{include:e,excludeStart:s&&_.getPrevious()===b,excludeEnd:s&&_.getNext()===b})}}o=[];for(var g=0,w=p.length;w>g;g++)o.push.apply(o,p[g]);return o},getCrossings:function(t){return this.getIntersections(t,function(t){return t._overlap||t.isCrossing()})},getNearestLocation:function(){for(var t=c.read(arguments),e=this.getCurves(),i=1/0,n=null,s=0,r=e.length;r>s;s++){var a=e[s].getNearestLocation(t);a._distance<i&&(i=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,s=n?"_segments":"_children",r=t[s],a=e[s],o=this[s];if(!r||!a||r.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=o.length,l=a.length;if(l>h)for(var u=n?A:L,c=h;l>c;c++)this.add(new u);else h>l&&this[n?"removeSegments":"removeChildren"](l,h);for(var c=0;l>c;c++)o[c].interpolate(r[c],a[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],n=t._children?t._children.slice():[t],s=i.length,r=n.length,a=[],o=0;e=!0;for(var h=s-1;h>=0&&e;h--){var l=i[h];e=!1;for(var u=r-1;u>=0&&!e;u--)l.compare(n[u])&&(a[u]||(a[u]=!0,o++),e=!0)}e=e&&o===r}return e}}),L=P.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;i&&i.length>0?this.setSegments(i):(this._curves=e,this._segmentSelection=0,i||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!i&&t)},_equals:function(t){return this._closed===t._closed&&s.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function gt(t){if(gt.base.call(this,t),8&t){if(this._length=this._area=e,16&t)this._version++;else if(this._curves)for(var i=0,n=this._curves.length;n>i;i++)this._curves[i]._changed()}else 32&t&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof M?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var s=t[n-1];"boolean"==typeof s&&(this.setClosed(s),n--),this._add(A.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;i>n;n++)t[n]=new z(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new z(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function i(e,i){if(e._transformCoordinates(t,g),n=g[0],s=g[1],_)m.push("M"+p.pair(n,s)),_=!1;else if(o=g[2],l=g[3],o===n&&l===s&&u===r&&c===a){if(!i){var h=n-r,d=s-a;m.push(0===h?"v"+p.number(d):0===d?"h"+p.number(h):"l"+p.pair(h,d))}}else m.push("c"+p.pair(u-r,c-a)+" "+p.pair(o-r,l-a)+" "+p.pair(n-r,s-a));r=n,a=s,u=g[4],c=g[5]}var n,s,r,a,o,l,u,c,d=this._segments,f=d.length,p=new h(e),g=new Array(6),_=!0,m=[];if(!f)return"";for(var v=0;f>v;v++)i(d[v]);return this._closed&&f>0&&(i(d[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,s=e.length;s>n;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,s=t.length,r=null==e,e=r?i.length:e,a=0;s>a;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(r)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var a=e+s,h=i.length;h>a;a++)i[a]._index=a}if(n){var l=this._countCurves(),u=e>0&&e+s-1===l?e-1:e,c=u,d=Math.min(u+s,l);t._curves&&(n.splice.apply(n,[u,0].concat(t._curves)),c+=t._curves.length);for(var a=c;d>a;a++)n.splice(a,0,new z(this,null,null));this._adjustCurves(u,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var i,n=this._segments,s=this._curves,r=t;e>r;r++)i=s[r],i._path=this,i._segment1=n[r],i._segment2=n[r+1]||n[0],i._changed();(i=s[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=s[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(A.readList(arguments)):this._add([A.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(A.readList(arguments,1),t):this._add([A.read(arguments,1)],t)[0]},addSegment:function(){return this._add([A.read(arguments)])[0]},insertSegment:function(t){return this._add([A.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(A.readList(t))},insertSegments:function(t,e){return this._add(A.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=s.pick(e,this._segments.length);var n=this._segments,r=this._curves,a=n.length,o=n.splice(t,e-t),h=o.length;if(!h)return o;for(var l=0;h>l;l++){var u=o[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}for(var l=t,c=n.length;c>l;l++)n[l]._index=l;if(r){for(var d=t>0&&e===a+(this._closed?1:0)?t-1:t,r=r.splice(d,h),l=r.length-1;l>=0;l--)r[l]._path=null;i&&(o._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;i>e;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;i>e;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;n>i;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,s=e.length;s>n;n++){var r=n+1===s;t+=z.getArea(z.getValues(e[n],e[r?0:n+1],null,r&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function _t(t){1&t||this._selectSegments(!1),_t.base.call(this,t)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var s=0;i>s;s++)e[s]._selection=n},_updateSelection:function(t,e,i){t._selection=i;var n=this._segmentSelection+=i-e;n>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time,s=4e-7,r=1-s;n>=r&&(i++,n=0);var a=this.getCurves();if(i>=0&&i<a.length){n>=s&&a[i++].divideAtTime(n);var o,h=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),o=this):(o=new L(b.NO_INSERT),o.insertAbove(this),o.copyAttributes(this)),o._add(h,0),this.addSegment(h[0]),o}return null},split:function(t,i){var n,s=i===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return null!=s?this.splitAt(s):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,s=this.getLastSegment(),r=t.getLastSegment();if(!r)return this;s&&s._point.isClose(r._point,i)&&t.reverse();var a=t.getFirstSegment();if(s&&s._point.isClose(a._point,i))s.setHandleOut(a._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,i)&&t.reverse(),r=t.getLastSegment(),o&&o._point.isClose(r._point,i)?(o.setHandleIn(r._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var h=this.getFirstSegment(),l=this.getLastSegment();return h!==l&&h._point.isClose(l._point,i)&&(h.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,s=e.length-1;s>=0;s--){var r=e[s];!r.hasHandles()&&(!r.hasLength(n)||i&&r.isCollinear(r.getNext()))&&r.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;e>t;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){
for(var e=new N(this,t||.25,256,!0),i=e.parts,n=i.length,s=[],r=0;n>r;r++)s.push(new A(i[r].curve.slice(0,2)));!this._closed&&n>0&&s.push(new A(i[n-1].curve.slice(6))),this.setSegments(s)},simplify:function(t){var e=new B(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function i(t,e){var i=t&&t.index;if(null!=i){var s=t.path;if(s&&s!==n)throw new Error(t._class+" "+i+" of "+s+" is not part of "+n);e&&t instanceof z&&i++}else i="number"==typeof t?t:e;return Math.min(0>i&&h?i%o:0>i?i+o:i,o-1)}var n=this,s=t||{},r=s.type||"asymmetric",a=this._segments,o=a.length,h=this._closed,l=h&&s.from===e&&s.to===e,u=i(s.from,0),c=i(s.to,o-1);if(u>c)if(h)u-=o;else{var d=u;u=c,c=d}if(/^(?:asymmetric|continuous)$/.test(r)){var f="asymmetric"===r,p=Math.min,g=c-u+1,_=g-1,m=l?p(g,4):1,v=m,y=m,b=[];if(h||(v=p(1,u),y=p(1,o-c-1)),_+=v+y,1>=_)return;for(var w=0,x=u-v;_>=w;w++,x++)b[w]=a[(0>x?x+o:x)%o]._point;for(var C=b[0]._x+2*b[1]._x,k=b[0]._y+2*b[1]._y,S=2,T=_-1,I=[C],A=[k],E=[S],O=[],P=[],w=1;_>w;w++){var L=T>w,M=L?1:f?1:2,N=L?4:f?2:7,B=L?4:f?3:8,R=L?2:f?0:1,D=M/S;S=E[w]=N-D,C=I[w]=B*b[w]._x+R*b[w+1]._x-D*C,k=A[w]=B*b[w]._y+R*b[w+1]._y-D*k}O[T]=I[T]/E[T],P[T]=A[T]/E[T];for(var w=_-2;w>=0;w--)O[w]=(I[w]-O[w+1])/E[w],P[w]=(A[w]-P[w+1])/E[w];O[_]=(3*b[_]._x-O[T])/2,P[_]=(3*b[_]._y-P[T])/2;for(var w=v,F=_-y,x=u;F>=w;w++,x++){var $=a[0>x?x+o:x],j=$._point,U=O[w]-j._x,H=P[w]-j._y;(l||F>w)&&$.setHandleOut(U,H),(l||w>v)&&$.setHandleIn(-U,-H)}}else for(var w=u;c>=w;w++)a[0>w?w+o:w].smooth(s,!l&&w===u,!l&&w===c)},toShape:function(t){function i(t,e){var i=c[t],n=i.getNext(),s=c[e],r=s.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&s._handleOut.isZero()&&r._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(r._point.subtract(s._point))}function n(t){var e=c[t],i=e.getPrevious(),n=e.getNext();return i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(n._point.subtract(e._point))}function s(t){var e=c[t],i=e.getNext(),n=e._handleOut,s=i._handleIn,r=.5522847498307936;if(n.isOrthogonal(s)){var a=e._point,o=i._point,h=new v(a,n,!0).intersect(new v(o,s,!0),!0);return h&&l.isZero(n.getLength()/h.subtract(a).getLength()-r)&&l.isZero(s.getLength()/h.subtract(o).getLength()-r)}return!1}function r(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this._closed)return null;var a,o,h,u,c=this._segments;if(!this.hasHandles()&&4===c.length&&i(0,2)&&i(1,3)&&n(1)?(a=C.Rectangle,o=new f(r(0,3),r(0,1)),u=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&s(0)&&s(2)&&s(4)&&s(6)&&i(1,5)&&i(3,7)?(a=C.Rectangle,o=new f(r(1,6),r(0,3)),h=o.subtract(new f(r(0,7),r(1,2))).divide(2),u=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&s(0)&&s(1)&&s(2)&&s(3)&&(l.isZero(r(0,2)-r(1,3))?(a=C.Circle,h=r(0,2)/2):(a=C.Ellipse,h=new f(r(2,0)/2,r(3,1)/2)),u=c[1]._point),a){var d=this.getPosition(!0),p=new a({center:d,size:o,radius:h,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(u.subtract(d).getAngle()+90),(t===e||t)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function mt(t){if(!t||t instanceof M)return mt.base.call(this,t);var e=this.getCurves(),i=t.getCurves(),n=e.length,s=i.length;if(!n||!s)return n==s;for(var r,a,o=e[0].getValues(),h=[],l=0,u=0,c=0;s>c;c++){var d=i[c].getValues();h.push(d);var f=z.getOverlaps(o,d);if(f){r=!c&&f[0][0]>0?s-1:c,a=f[0][1];break}}for(var p,g=Math.abs,_=4e-7,d=h[r];o&&d;){var f=z.getOverlaps(o,d);if(f){var m=f[0][0];if(g(m-u)<_){u=f[1][0],1===u&&(o=++l<n?e[l].getValues():null,u=0);var v=f[0][1];if(g(v-a)<_){if(p||(p=[r,v]),a=f[1][1],1===a&&(++r>=s&&(r=0),d=h[r]||i[r].getValues(),a=0),!o)return p[0]===r&&p[1]===a;continue}}}break}return!1},_hitTestSelf:function(t,e,i,n){function s(e,i){return t.subtract(e).divide(i).length<=1}function r(t,i,n){if(!e.selected||i.isSelected()){var r=t._point;if(i!==r&&(i=i.add(r)),s(i,w))return new I(n,g,{segment:t,point:i})}}function a(t,i){return(i||e.segments)&&r(t,t._point,"segment")||!i&&e.handles&&(r(t,t._handleIn,"handle-in")||r(t,t._handleOut,"handle-out"))}function o(t){d.add(t)}function h(e){if(("round"!==l||"round"!==u)&&(d=new L({internal:!0,closed:!0}),y||e._index>0&&e._index<v-1?"round"!==l&&(e._handleIn.isZero()||e._handleOut.isZero())&&L._addBevelJoin(e,l,S,c,null,n,o,!0):"round"!==u&&L._addSquareCap(e,u,S,null,n,o,!0),!d.isEmpty())){var i;return d.contains(t)||(i=d.getNearestLocation(t))&&s(i.getPoint(),b)}return s(e._point,w)}var l,u,c,d,f,p,g=this,_=this.getStyle(),m=this._segments,v=m.length,y=this._closed,b=e._tolerancePadding,w=b,x=e.stroke&&_.hasStroke(),C=e.fill&&_.hasFill(),k=e.curves,S=x?_.getStrokeWidth()/2:C&&e.tolerance>0||k?0:null;if(null!==S&&(S>0?(l=_.getStrokeJoin(),u=_.getStrokeCap(),c=S*_.getMiterLimit(),w=w.add(L._getStrokePadding(S,n))):l=u="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(var T=0;v>T;T++)if(p=a(m[T]))return p}else if(p=a(m[0],!0)||a(m[v-1],!0))return p;if(null!==S){if(f=this.getNearestLocation(t)){var A=f.getTime();0===A||1===A&&v>1?h(f.getSegment())||(f=null):s(f.getPoint(),w)||(f=null)}if(!f&&"miter"===l&&v>1)for(var T=0;v>T;T++){var E=m[T];if(t.getDistance(E._point)<=c&&h(E)){f=E.getLocation();break}}}return!f&&C&&this._contains(t)||f&&!x&&!k?new I("fill",this):f?new I(x?"stroke":"curve",this,{location:f,point:f.getPoint()}):null}},s.each(z._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=c.read(arguments),e=this.getCurves(),i=0,n=e.length;n>i;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,s=e.length;s>n;n++){var r=i,a=e[n];if(i+=a.getLength(),i>t)return a.getLocationAt(t-r)}if(e.length>0&&t<=this.getLength())return new O(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,i,n){function s(e){var i=h[e],n=h[e+1];(r!=i||a!=n)&&(t.beginPath(),t.moveTo(r,a),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,o,0,2*Math.PI,!0),t.fill())}for(var r,a,o=n/2,h=new Array(6),l=0,u=e.length;u>l;l++){var c=e[l],d=c._selection;if(c._transformCoordinates(i,h),r=h[0],a=h[1],2&d&&s(2),4&d&&s(4),t.fillRect(r-o,a-o,n,n),!(1&d)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-o+1,a-o+1,n-2,n-2),t.fillStyle=f}}}function e(t,e,i){function n(e){if(i)e._transformCoordinates(i,p),s=p[0],r=p[1];else{var n=e._point;s=n._x,r=n._y}if(g)t.moveTo(s,r),g=!1;else{if(i)h=p[2],l=p[3];else{var d=e._handleIn;h=s+d._x,l=r+d._y}h===s&&l===r&&u===a&&c===o?t.lineTo(s,r):t.bezierCurveTo(u,c,h,l,s,r)}if(a=s,o=r,i)u=p[4],c=p[5];else{var d=e._handleOut;u=a+d._x,c=o+d._y}}for(var s,r,a,o,h,l,u,c,d=e._segments,f=d.length,p=new Array(6),g=!0,_=0;f>_;_++)n(d[_]);e._closed&&f>0&&n(d[0])}return{_draw:function(t,i,n,s){function r(t){return c[(t%d+d)%d]}var a=i.dontStart,o=i.dontFinish||i.clip,h=this.getStyle(),l=h.hasFill(),u=h.hasStroke(),c=h.getDashArray(),d=!paper.support.nativeDash&&u&&c&&c.length;if(a||t.beginPath(),(l||u&&!d||o)&&(e(t,this,s),this._closed&&t.closePath()),!o&&(l||u)&&(this._setStyles(t,i,n),l&&(t.fill(h.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(d){a||t.beginPath();var f,p=new N(this,.25,32,!1,s),g=p.length,_=-h.getDashOffset(),m=0;for(_%=g;_>0;)_-=r(m--)+r(m--);for(;g>_;)f=_+r(m++),(_>0||f>0)&&p.drawPart(t,Math.max(_,0),Math.max(f,0)),_=f+r(m++)}t.stroke()}},_drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),t(i,this._segments,n,paper.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new A(c.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new A(c.read(arguments))])},cubicCurveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=c.read(arguments),s=t(this);s.setHandleOut(e.subtract(s._point)),this._add([new A(n,i.subtract(n))])},quadraticCurveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=s.pick(s.read(arguments),.5),r=1-n,a=t(this)._point,o=e.subtract(a.multiply(r*r)).subtract(i.multiply(n*n)).divide(2*n*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,i)},arcTo:function(){var e,i,n,r,a,o=t(this),h=o._point,u=c.read(arguments),d=s.peek(arguments),p=s.pick(d,!0);if("boolean"==typeof p)var g=h.add(u).divide(2),e=g.add(g.subtract(h).rotate(p?-90:90));else if(s.remain(arguments)<=2)e=u,u=c.read(arguments);else{var _=f.read(arguments),y=l.isZero;if(y(_.width)||y(_.height))return this.lineTo(u);var b=s.read(arguments),p=!!s.read(arguments),w=!!s.read(arguments),g=h.add(u).divide(2),x=h.subtract(g).rotate(-b),C=x.x,k=x.y,S=Math.abs,T=S(_.width),I=S(_.height),E=T*T,z=I*I,O=C*C,P=k*k,L=Math.sqrt(O/E+P/z);if(L>1&&(T*=L,I*=L,E=T*T,z=I*I),L=(E*z-E*P-z*O)/(E*P+z*O),S(L)<1e-12&&(L=0),0>L)throw new Error("Cannot create an arc with the given arguments");i=new c(T*k/I,-I*C/T).multiply((w===p?-1:1)*Math.sqrt(L)).rotate(b).add(g),a=(new m).translate(i).rotate(b).scale(T,I),r=a._inverseTransform(h),n=r.getDirectedAngle(a._inverseTransform(u)),!p&&n>0?n-=360:p&&0>n&&(n+=360)}if(e){var M=new v(h.add(e).divide(2),e.subtract(h).rotate(90),!0),N=new v(e.add(u).divide(2),u.subtract(e).rotate(90),!0),B=new v(h,u),R=B.getSide(e);if(i=M.intersect(N,!0),!i){if(!R)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}r=h.subtract(i),n=r.getDirectedAngle(u.subtract(i));var D=B.getSide(i);0===D?n=R*Math.abs(n):R===D&&(n+=0>n?360:-360)}for(var F=Math.abs(n),$=F>=360?4:Math.ceil(F/90),j=n/$,U=j*Math.PI/360,H=4/3*Math.sin(U)/(1+Math.cos(U)),V=[],q=0;$>=q;q++){var x=u,Z=null;if($>q&&(Z=r.rotate(90).multiply(H),a?(x=a._transformPoint(r),Z=a._transformPoint(r.add(Z)).subtract(x)):x=i.add(r)),q){var W=r.rotate(-90).multiply(H);a&&(W=a._transformPoint(r.add(W)).subtract(x)),V.push(new A(x,W,Z))}else o.setHandleOut(Z);r=r.rotate(j)}this._add(V)},lineBy:function(){var e=c.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=s.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(i),n)},cubicCurveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=c.read(arguments),s=t(this)._point;this.cubicCurveTo(s.add(e),s.add(i),s.add(n))},quadraticCurveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(c.read(arguments)),n=s.pick(s.peek(arguments),!0);"boolean"==typeof n?this.arcTo(i,n):this.arcTo(i,e.add(c.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return L[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,n,s,r){function a(t){t._transformCoordinates(n,h);for(var e=0;2>e;e++)z._addBounds(l[e],l[e+4],h[e+2],h[e],e,r?r[e]:0,u,c,d);var i=l;l=h,h=i}var o=t[0];if(!o)return new g;for(var h=new Array(6),l=o._transformCoordinates(n,new Array(6)),u=l.slice(0,2),c=u.slice(),d=new Array(2),f=1,p=t.length;p>f;f++)a(t[f]);return e&&a(o),new g(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,i,n,s){function r(t){_=_.include(t)}function a(t){_=_.unite(w.setCenter(t._point.transform(n)))}function o(t,e){var i=t._handleIn,s=t._handleOut;"round"===e||!i.isZero()&&!s.isZero()&&i.isCollinear(s)?a(t):L._addBevelJoin(t,e,m,b,n,d,r)}function h(t,e){"round"===e?a(t):L._addSquareCap(t,e,m,n,d,r)}var l=i.getStyle(),u=l.hasStroke(),c=l.getStrokeWidth(),d=u&&i._getStrokeMatrix(n,s),p=u&&L._getStrokePadding(c,d),_=L.getBounds(t,e,i,n,s,p);if(!u)return _;for(var m=c/2,v=l.getStrokeJoin(),y=l.getStrokeCap(),b=m*l.getMiterLimit(),w=new g(new f(p)),x=t.length-(e?0:1),C=1;x>C;C++)o(t[C],v);return e?o(t[0],v):x>0&&(h(t[0],y),h(t[t.length-1],y)),_},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new c(t,0).transform(e),n=new c(0,t).transform(e),s=i.getAngleInRadians(),r=i.getLength(),a=n.getLength(),o=Math.sin(s),h=Math.cos(s),l=Math.tan(s),u=Math.atan2(a*l,r),d=Math.atan2(a,l*r);return[Math.abs(r*Math.cos(u)*h+a*Math.sin(u)*o),Math.abs(a*Math.sin(d)*h+r*Math.cos(d)*o)]},_addBevelJoin:function(t,e,i,n,s,r,a,o){var h=t.getCurve(),l=h.getPrevious(),u=h.getPoint1().transform(s),d=l.getNormalAtTime(1).multiply(i).transform(r),f=h.getNormalAtTime(0).multiply(i).transform(r);if(d.getDirectedAngle(f)<0&&(d=d.negate(),f=f.negate()),o&&(a(u),a(u.add(d))),"miter"===e){var p=new v(u.add(d),new c(-d.y,d.x),!0).intersect(new v(u.add(f),new c(-f.y,f.x),!0),!0);if(p&&u.getDistance(p)<=n&&(a(p),!o))return}o||a(u.add(d)),a(u.add(f))},_addSquareCap:function(t,e,i,n,s,r,a){var o=t._point.transform(n),h=t.getLocation(),l=h.getNormal().multiply(i).transform(s);a&&(r(o.subtract(l)),r(o.add(l))),"square"===e&&(o=o.add(l.rotate(0===h.getTime()?-90:90))),r(o.add(l)),r(o.subtract(l))},getHandleBounds:function(t,e,i,n,s){var r,a,o=i.getStyle(),h=s.stroke&&o.hasStroke();if(h){var l=i._getStrokeMatrix(n,s),u=o.getStrokeWidth()/2,c=u;"miter"===o.getStrokeJoin()&&(c=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),r=L._getStrokePadding(u,l),a=L._getStrokePadding(c,l)}for(var d=new Array(6),f=1/0,p=-f,_=f,m=p,v=0,y=t.length;y>v;v++){var b=t[v];b._transformCoordinates(n,d);for(var w=0;6>w;w+=2){var x=w?r:a,C=x?x[0]:0,k=x?x[1]:0,S=d[w],T=d[w+1],I=S-C,A=S+C,E=T-k,z=T+k;f>I&&(f=I),A>p&&(p=A),_>E&&(_=E),z>m&&(m=z)}}return new g(f,_,p-f,m-_)}}});L.inject({statics:new function(){function t(t,e,i){var n=s.getNamed(i),r=new L(n&&n.insert===!1&&b.NO_INSERT);return r._add(t),r._closed=e,r.set(n)}function e(e,i,s){for(var r=new Array(4),a=0;4>a;a++){var o=n[a];r[a]=new A(o._point.multiply(i).add(e),o._handleIn.multiply(i),o._handleOut.multiply(i))}return t(r,!0,s)}var i=.5522847498307936,n=[new A([-1,0],[0,i],[0,-i]),new A([0,-1],[-i,0],[i,0]),new A([1,0],[0,-i],[0,i]),new A([0,1],[i,0],[-i,0])];return{Line:function(){return t([new A(c.readNamed(arguments,"from")),new A(c.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=c.readNamed(arguments,"center"),i=s.readNamed(arguments,"radius");return e(t,new f(i),arguments)},Rectangle:function(){var e,n=g.readNamed(arguments,"rectangle"),s=f.readNamed(arguments,"radius",0,{readNull:!0}),r=n.getBottomLeft(!0),a=n.getTopLeft(!0),o=n.getTopRight(!0),h=n.getBottomRight(!0);if(!s||s.isZero())e=[new A(r),new A(a),new A(o),new A(h)];else{s=f.min(s,n.getSize(!0).divide(2));var l=s.width,u=s.height,c=l*i,d=u*i;e=[new A(r.add(l,0),null,[-c,0]),new A(r.subtract(0,u),[0,d]),new A(a.add(0,u),null,[0,-d]),new A(a.add(l,0),[-c,0],null),new A(o.subtract(l,0),null,[c,0]),new A(o.add(0,u),[0,-d],null),new A(h.subtract(0,u),null,[0,d]),new A(h.subtract(l,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=C._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=c.readNamed(arguments,"from"),e=c.readNamed(arguments,"through"),i=c.readNamed(arguments,"to"),n=s.getNamed(arguments),r=new L(n&&n.insert===!1&&b.NO_INSERT);return r.moveTo(t),r.arcTo(e,i),r.set(n)},RegularPolygon:function(){for(var e=c.readNamed(arguments,"center"),i=s.readNamed(arguments,"sides"),n=s.readNamed(arguments,"radius"),r=360/i,a=i%3===0,o=new c(0,a?-n:n),h=a?-1:.5,l=new Array(i),u=0;i>u;u++)l[u]=new A(e.add(o.rotate((u+h)*r)));return t(l,!0,arguments)},Star:function(){for(var e=c.readNamed(arguments,"center"),i=2*s.readNamed(arguments,"points"),n=s.readNamed(arguments,"radius1"),r=s.readNamed(arguments,"radius2"),a=360/i,o=new c(0,-1),h=new Array(i),l=0;i>l;l++)h[l]=new A(e.add(o.rotate(a*l).multiply(l%2?r:n)));return t(h,!0,arguments)}}}});var M=P.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function vt(t,e){var i=e,n=i[0];n&&"number"==typeof n[0]&&(i=[i]);for(var r=e.length-1;r>=0;r--){var a=i[r];i!==e||a instanceof L||(i=s.slice(i)),Array.isArray(a)?i[r]=new L({segments:a,insert:!1}):a instanceof M&&(i.splice.apply(i,[r,1].concat(a.removeChildren())),a.remove())}return vt.base.call(this,t,i)},reduce:function yt(t){for(var e=this._children,i=e.length-1;i>=0;i--){var n=e[i].reduce(t);n.isEmpty()&&n.remove()}if(!e.length){var n=new L(b.NO_INSERT);return n.copyAttributes(this),n.insertAbove(this),this.remove(),n}return yt.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;i>e;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;n>i;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;n>i;i++)e.push.apply(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;n>i;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,n=t.length;n>i;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],s=0,r=i.length;r>s;s++){var a=i[s],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function bt(t,e,i){return bt.base.call(this,t,e["class"]===L||"path"===e.type?e:s.set({},e,{fill:!1}),i)},_draw:function(t,e,i,n){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,a=s.length;a>r;r++)s[r].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,s=0,r=n.length;r>s;s++){var a=n[s],o=a._matrix;i[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new L(b.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=c.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},s.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,n=this._children,s=0,r=n.length;r>s;s++)i=n[s][t](e)||i;return i}},{}));P.inject(new function(){function t(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?i.resolveCrossings().reorient("nonzero"===i.getFillRule()):i}function e(t,e,i,n,s,r){var a=new t(b.NO_INSERT);return a.addChildren(e,!0),i&&(a=a.reduce({simplify:!0})),r&&r.insert===!1||a.insertAbove(s&&n.isSibling(s)&&n.getIndex()<s.getIndex()?s:n),a.copyAttributes(n,!0),a}function i(i,s,r,a){function h(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];y.push.apply(y,n._segments),w.push.apply(w,n.getCurves()),n._overlapsOnly=!0}}if(a&&a.stroke&&/^(subtract|intersect)$/.test(r))return n(i,s,"subtract"===r);var l=t(i,!0),d=s&&i!==s&&t(s,!0),f=g[r];f[r]=!0,d&&(f.subtract||f.exclude)^(d.isClockwise()^l.isClockwise())&&d.reverse();var p,_=o(O.expand(l.getCrossings(d))),m=l._children||[l],v=d&&(d._children||[d]),y=[],w=[];if(!_.length){var x=!0;if(v)for(var C=0,k=m.length;k>C&&x;C++)for(var S=m[C].getBounds(),T=0,I=v.length;I>T&&x;T++){var A=v[T].getBounds();x=!S._containsRectangle(A)&&!A._containsRectangle(S)}x&&(p=f.unite||f.exclude?[l,d]:f.subtract?[l]:f.intersect?[new L(b.NO_INSERT)]:null)}if(!p){h(m),v&&h(v);for(var E=0,z=_.length;z>E;E++)u(_[E]._segment,l,d,w,f);for(var E=0,z=y.length;z>E;E++){var P=y[E],N=P._intersection;null==P._winding&&u(P,l,d,w,f),N&&N._overlap||(P._path._overlapsOnly=!1)}p=c(y,f)}return e(M,p,!0,i,s,a)}function n(i,n,s){function r(t){return o.contains(t.getPointAt(t.getLength()/2))^s?(l.unshift(t),!0):void 0}for(var a=t(i),o=t(n),h=a.getCrossings(o),l=[],u=h.length-1;u>=0;u--){var c=h[u].split();c&&(r(c)&&c.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return r(a),e(w,l,!1,i,n)}function r(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function a(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function o(t,e,i){function n(t){return t._path._id+"."+t._segment1._index}for(var s,o,h,l=e&&[],u=4e-7,c=1-u,d=!1,f=i||[],p=i&&{},g=(i&&i.length)-1;g>=0;g--){var _=i[g];_._path&&(p[n(_)]=!0)}for(var g=t.length-1;g>=0;g--){var m,v=t[g],y=v._time,b=e&&!e(v),_=v._curve;if(_&&(_!==o?(d=!_.hasHandles()||p&&p[n(_)],s=[],h=null):h>u&&(v._time/=h),o=_),b)s||(s=[]),s.push(v);else{if(e&&l.unshift(v),h=y,y=v._time,u>y)m=_._segment1;else if(y>c)m=_._segment2;else{var w=_.divideAtTime(y,!0);d&&f.push(_,w),m=w._segment1;for(var x=s.length-1;x>=0;x--){var C=s[x];C._time=(C._time-y)/(1-y)}}v._setSegment(m);var k=m._intersection,S=v._intersection;if(k){r(k,S);for(var T=k;T;)r(T._intersection,k),T=T._next}else m._intersection=S}}return i||a(f),l||t}function h(t,e,i,n,s){function r(r){var a=r[g],l=r[g+6];if(!(v<d(a,l)||v>f(a,l))){var p=r[c],_=r[c+2],T=r[c+4],I=r[c+6];if(a===l)return void((b>p&&I>y||b>I&&p>y)&&(C=!0));var A=v===a?0:v===l?1:y>f(p,_,T,I)||b<d(p,_,T,I)?.5:1===z.solveCubic(r,g,v,S,0,1)?S[0]:.5,E=0===A?p:1===A?I:z.getPoint(r,A)[i?"y":"x"],O=a>l?1:-1,P=o[g]>o[g+6]?1:-1,L=o[c+6];return v!==a?y>E?w+=O:E>b?x+=O:(w+=O,x+=O,C=!0):O!==P?(b>L&&(w+=O),L>y&&(x+=O)):(y>L&&E>y||L>b&&b>E)&&(C=!0,y>L?x+=O:L>b&&(w+=O)),v!==a?E>m-100*u&&m+100*u>E&&(k/=2):k=0,o=r,!s&&E>y&&b>E&&0===z.getTangent(r,A)[i?"x":"y"]&&h(t,e,i?0:1,n,!0)}}function a(t){var e=t[g],n=t[g+2],s=t[g+4],a=t[g+6];if(v<=f(e,n,s,a)&&v>=d(e,n,s,a))for(var o,h=t[c],l=t[c+2],u=t[c+4],p=t[c+6],_=y>f(h,l,u,p)||b<d(h,l,u,p)?[t]:z.getMonoCurves(t,i),m=0,w=_.length;w>m;m++)if(o=r(_[m]))return o}for(var o,l,u=1e-8,c=i?1:0,g=i?0:1,_=[t.x,t.y],m=_[c],v=_[g],y=m-u,b=m+u,w=0,x=0,C=!1,k=1,S=[],T=0,I=e.length;I>T;T++){var A,E=e[T],O=E._path,P=E.getValues();if(!(T&&e[T-1]._path===O||(o=null,O._closed||(l=z.getValues(O.getLastCurve().getSegment2(),E.getSegment1(),null,!n),l[g]!==l[g+6]&&(o=l)),o))){o=P;for(var L=O.getLastCurve();L&&L!==E;){var M=L.getValues();if(M[g]!==M[g+6]){o=M;break}L=L.getPrevious()}}if(A=a(P))return A;if(T+1===I||e[T+1]._path!==O){if(l&&(A=a(l)))return A;if(C&&!w&&!x){var N=O.isClockwise(n)^i?1:-1;w+=N,x+=N}l=null}}return w=w&&2-p(w)%2,x=x&&2-p(x)%2,{winding:f(w,x),windingL:w,windingR:x,quality:k,onContour:!w^!x,onPath:C}}function u(t,e,i,n,s){var r,a=[],o=t,u=0;do{var c=t.getCurve(),d=c.getLength();a.push({segment:t,curve:c,length:d}),u+=d,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var f={winding:0,quality:0},r=f,g=4e-7,_=1-g,m=0;3>m&&r.quality<.5;m++)for(var d=u*(m+1)/4,v=0,y=a.length;y>v;v++){var b=a[v],w=b.length;if(w>=d){var c=b.curve,x=c._path,C=x._parent,k=l.clamp(c.getTimeAt(d),g,_),S=c.getPointAtTime(k),T=p(c.getTangentAtTime(k).normalize().y)<Math.SQRT1_2?1:0;C instanceof M&&(x=C);var I=s.subtract&&i&&(x===e&&i._getWinding(S,T,!0).winding||x===i&&!e._getWinding(S,T,!0).winding)?f:h(S,n,T,!0);I.quality>r.quality&&(r=I);break}d-=w}for(var v=a.length-1;v>=0;v--)a[v].segment._winding=r}function c(t,e){function i(t){var i;return!(!t||t._visited||!(!e||e[(i=t._winding||{}).winding]||e.unite&&i.onContour))}function n(t){if(t)for(var e=0,i=a.length;i>e;e++)if(t===a[e])return!0;return!1}function s(t){for(var e=t._segments,i=0,n=e.length;n>i;i++)e[i]._visited=!0}function r(t,e){function s(s,r){for(;s&&s!==r;){var o=s._segment,l=o._path,u=o.getNext()||l&&l.getFirstSegment(),c=u&&u._intersection;o!==t&&(n(o)||n(u)||u&&i(o)&&(i(u)||c&&i(c._segment)))&&h.push(s),e&&a.push(o),s=s._next}}var r=t._intersection,o=r,h=[];if(e&&(a=[t]),r){for(s(r);r&&r._prev;)r=r._prev;s(r,o)}return h}var a,o=[];t.sort(function(t,e){var i=t._intersection,n=e._intersection,s=!(!i||!i._overlap),r=!(!n||!n._overlap),a=t._path,o=e._path;return s^r?s?1:-1:!i^!n?i?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var h=0,l=t.length;l>h;h++){var u,c,d,f=t[h],p=i(f),g=null,_=!1,m=!0,v=[];if(p&&f._path._overlapsOnly){var y=f._path,w=f._intersection._segment._path;y.compare(w)&&(y.getArea()&&o.push(y.clone(!1)),s(y),s(w),p=!1)}for(;p;){var x=!g,C=r(f,x),k=C.shift(),S=k&&k._segment,_=!x&&(n(f)||n(S)),T=!_&&S;if(x&&(g=new L(b.NO_INSERT),u=null),_){(f.isFirst()||f.isLast())&&(m=f._path._closed),f._visited=!0;break}if(T&&u&&(v.push(u),u=null),u||(u={start:g._segments.length,segment:f,intersections:C,visited:c=[],handleIn:d}),T&&(f=S),!i(f)){g.removeSegments(u.start);for(var I=0,E=c.length;E>I;I++)c[I]._visited=!1;if(k=u.intersections.shift())f=k._segment,c.length=0;else{if(!(u=v.pop())||!i(f=u.segment))break;c=u.visited}d=u.handleIn}var z=f.getNext();g.add(new A(f._point,d,z&&f._handleOut)),f._visited=!0,c.push(f),f=z||f._path.getFirstSegment(),d=z&&z._handleIn}_&&(m&&(g.firstSegment.setHandleIn(d),g.setClosed(m)),0!==g.getArea()&&o.push(g))}return o}var d=Math.min,f=Math.max,p=Math.abs,g={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{_getWinding:function(t,e,i){return h(t,this.getCurves(),e,i)},unite:function(t,e){return i(this,t,"unite",e)},intersect:function(t,e){return i(this,t,"intersect",e)},subtract:function(t){return i(this,t,"subtract")},exclude:function(t,e){return i(this,t,"exclude",e)},divide:function(t,i){return e(w,[this.subtract(t,i),this.intersect(t,i)],!0,this,t,i)},resolveCrossings:function(){function t(t){var e=t&&t._intersection;return e&&e._overlap}var e=this._children,i=e||[this],n=!1,r=!1,h=this.getIntersections(null,function(t){return t._overlap&&(n=!0)||t.isCrossing()&&(r=!0)}),l=n&&r&&[];if(h=O.expand(h),n)for(var u=o(h,function(t){return t._overlap},l),d=u.length-1;d>=0;d--){var f=u[d]._segment,p=f.getPrevious(),g=f.getNext();t(p)&&t(g)&&(f.remove(),p._handleOut._set(0,0),g._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(g._handleIn.set(p._handleIn),p.remove()))}r&&(o(h,n&&function(t){var e=t.getCurve(),i=t._intersection._curve,n=t._segment;return e&&i&&e._path&&i._path?!0:void(n&&(n._intersection=null))},l),l&&a(l),i=c(s.each(i,function(t){this.push.apply(this,t._segments)},[])));var _,m=i.length;return m>1&&e?(i!==e&&this.setChildren(i),_=this):1!==m||e||(i[0]!==this&&this.setSegments(i[0].removeSegments()),_=this),_||(_=new M(b.NO_INSERT),_.addChildren(i),_=_.reduce(),_.copyAttributes(this),this.replaceWith(_)),_},reorient:function(t){var e=this._children,i=e&&e.length;if(i>1){var n=s.each(e,function(t,e){this[t._id]={winding:t.isClockwise()?1:-1,index:e}},{}),r=this.removeChildren().sort(function(t,e){return p(e.getArea())-p(t.getArea())}),a=r[0],o=[];o[n[a._id].index]=a;for(var h=1;i>h;h++){for(var l=r[h],u=n[l._id],c=l.getInteriorPoint(),d=!1,f=null,g=!1,_=h-1;_>=0&&!f;_--){var m=r[_];if(m.contains(c)){var v=n[m._id];if(t&&!d&&(u.winding+=v.winding,u.winding&&v.winding)){g=u.exclude=!0;break}d=!0,f=!v.exclude&&m}}g||(l.setClockwise(f?!f.isClockwise():a.isClockwise()),o[u.index]=l)}this.setChildren(o)}return this},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var i=this.getCurves(),n=e.y,s=[],r=[],a=0,o=i.length;o>a;a++){var h=i[a].getValues(),l=h[1],u=h[3],c=h[5],p=h[7];if(n>=d(l,u,c,p)&&n<=f(l,u,c,p))for(var g=z.getMonoCurves(h),_=0,m=g.length;m>_;_++){var v=g[_],y=v[1],b=v[7];if(y!==b&&(n>=y&&b>=n||n>=b&&y>=n)){var w=n===y?v[0]:n===b?v[6]:1===z.solveCubic(v,1,n,r,0,1)?z.getPoint(v,r[0]).x:(v[0]+v[6])/2;s.push(w)}}}s.length>1&&(s.sort(function(t,e){return t-e}),e.x=(s[0]+s[1])/2)}return e}}});var N=s.extend({_class:"PathFlattener",initialize:function(t,e,i,n,s){function r(t,e){var i=z.getValues(t,e,s);h.push(i),a(i,t._index,0,1)}function a(t,i,s,r){if(!(r-s>c)||n&&z.isStraight(t)||z.isFlatEnough(t,e||.25)){var o=t[6]-t[0],h=t[7]-t[1],d=Math.sqrt(o*o+h*h);d>0&&(u+=d,l.push({offset:u,curve:t,index:i,time:r}))}else{var f=z.subdivide(t,.5),p=(s+r)/2;a(f[0],i,s,p),a(f[1],i,p,r)}}for(var o,h=[],l=[],u=0,c=1/(i||32),d=t._segments,f=d[0],p=1,g=d.length;g>p;p++)o=d[p],r(f,o),f=o;t._closed&&r(o,d[0]),this.curves=h,this.parts=l,this.length=u,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,s=this.index;e=s,s&&!(i[--s].offset<t););for(;n>e;e++){var r=i[e];if(r.offset>=t){this.index=e;var a=i[e-1],o=a&&a.index===r.index?a.time:0,h=a?a.offset:0;return{index:r.index,time:o+(r.time-o)*(t-h)/(r.offset-h)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){for(var n=this._get(e),s=this._get(i),r=n.index,a=s.index;a>=r;r++){var o=z.getPart(this.curves[r],r===n.index?n.time:0,r===s.index?s.time:1);r===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},s.each(z._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return z[t](this.curves[i.index],i.time)}},{})),B=s.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,s=t._closed,r=0,a=n.length;a>r;r++){var o=n[r].point;e&&e.equals(o)||i.push(e=o.clone())}s&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=s},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new A(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,s,r){var a=this.points;if(n-i===1){var o=a[i],h=a[n],l=o.getDistance(h)/3;return void this.addCurve(t,[o,o.add(s.normalize(l)),h.add(r.normalize(l)),h])}for(var u,c=this.chordLengthParameterize(i,n),d=Math.max(e,e*e),f=!0,p=0;4>=p;p++){var g=this.generateBezier(i,n,c,s,r),_=this.findMaxError(i,n,g,c);if(_.error<e&&f)return void this.addCurve(t,g);if(u=_.index,_.error>=d)break;f=this.reparameterize(i,n,c,g),d=_.error}var m=a[u-1].subtract(a[u+1]);this.fitCubic(t,e,i,u,s,m),this.fitCubic(t,e,u,n,m.negate(),r)},addCurve:function(t,e){var i=t[t.length-1];i.setHandleOut(e[1].subtract(e[0])),t.push(new A(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,s){for(var r=1e-12,a=Math.abs,o=this.points,h=o[t],l=o[e],u=[[0,0],[0,0]],c=[0,0],d=0,f=e-t+1;f>d;d++){var p=i[d],g=1-p,_=3*p*g,m=g*g*g,v=_*g,y=_*p,b=p*p*p,w=n.normalize(v),x=s.normalize(y),C=o[t+d].subtract(h.multiply(m+v)).subtract(l.multiply(y+b));u[0][0]+=w.dot(w),u[0][1]+=w.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),c[0]+=w.dot(C),c[1]+=x.dot(C)}var k,S,T=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(T)>r){var I=u[0][0]*c[1]-u[1][0]*c[0],A=c[0]*u[1][1]-c[1]*u[0][1];k=A/T,S=I/T}else{var E=u[0][0]+u[0][1],z=u[1][0]+u[1][1];k=S=a(E)>r?c[0]/E:a(z)>r?c[1]/z:0}var O,P,L=l.getDistance(h),M=r*L;if(M>k||M>S)k=S=L/3;else{var N=l.subtract(h);O=n.normalize(k),P=s.normalize(S),O.dot(N)-P.dot(N)>L*L&&(k=S=L/3,O=P=null)}return[h,h.add(O||n.normalize(k)),l.add(P||s.normalize(S)),l]},reparameterize:function(t,e,i,n){for(var s=t;e>=s;s++)i[s-t]=this.findRoot(n,this.points[s],i[s-t]);for(var s=1,r=i.length;r>s;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(t,e,i){for(var n=[],s=[],r=0;2>=r;r++)n[r]=t[r+1].subtract(t[r]).multiply(3);
for(var r=0;1>=r;r++)s[r]=n[r+1].subtract(n[r]).multiply(2);var a=this.evaluate(3,t,i),o=this.evaluate(2,n,i),h=this.evaluate(1,s,i),l=a.subtract(e),u=o.dot(o)+l.dot(h);return Math.abs(u)<1e-6?i:i-l.dot(o)/u},evaluate:function(t,e,i){for(var n=e.slice(),s=1;t>=s;s++)for(var r=0;t-s>=r;r++)n[r]=n[r].multiply(1-i).add(n[r+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;e>=n;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,s=e-t;s>=n;n++)i[n]/=i[s];return i},findMaxError:function(t,e,i,n){for(var s=Math.floor((e-t+1)/2),r=0,a=t+1;e>a;a++){var o=this.evaluate(3,i,n[a-t]),h=o.subtract(this.points[a]),l=h.x*h.x+h.y*h.y;l>=r&&(r=l,s=a)}return{error:r,index:s}}}),R=b.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&s.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(i&&t,!i&&c.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),D=R.extend({_class:"PointText",initialize:function(){R.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new d(t.x,t.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,s=this._style,r=s.hasFill(),a=s.hasStroke(),o=s.getLeading(),h=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var l=0,u=n.length;u>l;l++){t.shadowColor=h;var c=n[l];r&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var i=this._style,n=this._lines,s=n.length,r=i.getJustification(),a=i.getLeading(),o=this.getView().getTextWidth(i.getFontStyle(),n),h=0;"left"!==r&&(h-=o/("center"===r?2:1));var l=new g(h,s?-.75*a:0,o,s*a);return t?t._transformBounds(l,l):l}}),F=s.extend(new function(){function t(t){var n,s=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(s){n=[0,0,0];for(var r=0;3>r;r++){var o=s[r+1];n[r]=parseInt(1==o.length?o+o:o,16)/255}}else if(s=t.match(/^rgba?\((.*)\)$/)){n=s[1].split(",");for(var r=0,h=n.length;h>r;r++){var o=+n[r];n[r]=3>r?o/255:o}}else if(i){var l=a[t];if(!l){e||(e=K.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var u=e.getImageData(0,0,1,1).data;l=a[t]=[u[0]/255,u[1]/255,u[2]/255]}n=l.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},r={},a={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],l={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,a=0===r?0:60*(n==t?(e-i)/r+(i>e?6:0):n==e?(i-t)/r+2:(t-e)/r+4);return[a,0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){t=(t/60%6+6)%6;var n=Math.floor(t),s=t-n,n=o[n],r=[i,i*(1-e),i*(1-e*s),i*(1-e*(1-s))];return[r[n[0]],r[n[1]],r[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,a=0===r,o=a?0:60*(n==t?(e-i)/r+(i>e?6:0):n==e?(i-t)/r+2:(t-e)/r+4),h=(n+s)/2,l=a?0:.5>h?r/(n+s):r/(2-n-s);return[o,l,h]},"hsl-rgb":function(t,e,i){if(t=(t/360%1+1)%1,0===e)return[i,i,i];for(var n=[t+1/3,t,t-1/3],s=.5>i?i*(1+e):i+e-i*e,r=2*i-s,a=[],o=0;3>o;o++){var h=n[o];0>h&&(h+=1),h>1&&(h-=1),a[o]=1>6*h?r+6*(s-r)*h:1>2*h?s:2>3*h?r+(s-r)*(2/3-h)*6:r}return a},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(n,function(t,e){r[e]=[],s.each(t,function(t,i){var a=s.capitalize(t),o=/^(hue|saturation)$/.test(t),h=r[e][i]="gradient"===t?function(t){var e=this._components[0];return t=$.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return c.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+a]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(e)[i]},this["set"+a]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[i]=h.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function u(e){var i,a,o,h,l=arguments,c=this.__read,d=0;Array.isArray(e)&&(l=e,e=l[0]);var f=null!=e&&typeof e;if("string"===f&&e in n&&(i=e,e=l[1],Array.isArray(e)?(a=e,o=l[2]):(c&&(d=1),l=s.slice(l,1),f=typeof e)),!a){if(h="number"===f?l:"object"===f&&null!=e.length?e:null){i||(i=h.length>=3?"rgb":"gray");var p=n[i].length;o=h[p],c&&(d+=h===arguments?p+(null!=o?1:0):1),h.length>p&&(h=s.slice(h,0,p))}else if("string"===f)i="rgb",a=t(e),4===a.length&&(o=a[3],a.length--);else if("object"===f)if(e.constructor===u){if(i=e._type,a=e._components.slice(),o=e._alpha,"gradient"===i)for(var g=1,_=a.length;_>g;g++){var m=a[g];m&&(a[g]=m.clone())}}else if(e.constructor===$)i="gradient",h=l;else{i="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb";var v=n[i],y=r[i];this._components=a=[];for(var g=0,_=v.length;_>g;g++){var b=e[v[g]];null==b&&!g&&"gradient"===i&&"stops"in e&&(b={stops:e.stops,radial:e.radial}),b=y[g].call(this,b),null!=b&&(a[g]=b)}o=e.alpha}c&&i&&(d=1)}if(this._type=i||"rgb",!a){this._components=a=[];for(var y=r[this._type],g=0,_=y.length;_>g;g++){var b=y[g].call(this,h&&h[g]);null!=b&&(a[g]=b)}}return this._components=a,this._properties=n[this._type],this._alpha=o,c&&(this.__read=d),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=l[this._type+"-"+t])?e.apply(this,this._components):l["rgb-"+t].apply(this,l[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new F(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=s.isPlainValue(t,!0)?F.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&s.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=h.instance,s=0,r=t.length;r>s;s++){var a=this._components[s];null!=a&&e.push(t[s]+": "+(i?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(0>t?0:t>1?1:t))}var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return i=[e(i[0]),e(i[1]),e(i[2])],1>n&&i.push(0>n?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,i=this._components,n=i[0],s=n._stops,r=i[1],a=i[2];if(n._radial){var o=a.getDistance(r),h=i[3];if(h){var l=h.subtract(r);l.getLength()>o&&(h=r.add(l.normalize(o-.1)))}var u=h||r;e=t.createRadialGradient(u.x,u.y,0,r.x,r.y,o)}else e=t.createLinearGradient(r.x,r.y,a.x,a.y);for(var c=0,d=s.length;d>c;c++){var f=s[c];e.addColorStop(f._offset||c/(d-1),f._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,n=e.length;n>i;i++){var s=e[i];t._transformPoint(s,s,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new F(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return s.each(t,function(t,e){this[e]=function(e){e=F.read(arguments);for(var i=this._type,n=this._components,s=e._convert(i),r=0,a=n.length;a>r;r++)s[r]=t(n[r],s[r]);return new F(i,s,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),$=s.extend({_class:"Gradient",initialize:function(t,e){this._id=u.get(),t&&s.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return s.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;-1!=i&&(this._owners.splice(i,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,i=this._stops.length;i>e;e++)t[e]=this._stops[e].clone();return new $(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,s=i.length;s>n;n++)i[n]._owner=e;i=this._stops=j.readList(t,0,{clone:!0});for(var n=0,s=i.length;s>n;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var s=0;n>s;s++)if(!e[s].equals(i[s]))return!1;return!0}}return!1}}),j=s.extend({_class:"GradientStop",initialize:function(t,i){var n=t,s=i;"object"==typeof t&&i===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,s=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(s)},clone:function(){return new j(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,n=this._offset;return s.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=F.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),U=s.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new c,selectedColor:null},i=s.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=s.set({},i,{fillColor:new F}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,s,r){this._values={},this._owner=s,this._project=s&&s._project||r||paper.project,this._defaults=!s||s instanceof w?i:s instanceof R?n:t,e&&this.set(e)}};return s.each(i,function(t,i){var n=/Color$/.test(i),h="shadowOffset"===i,l=s.capitalize(i),u=r[i],d="set"+l,f="get"+l;o[d]=function(t){var s=this._owner,r=s&&s._children;if(r&&r.length>0&&!(s instanceof M))for(var a=0,o=r.length;o>a;a++)r[a]._style[d](t);else if(i in this._defaults){var h=this._values[i];h!==t&&(n&&(h&&h._owner!==e&&(h._owner=e),t&&t.constructor===F&&(t._owner&&(t=t.clone()),t._owner=s)),this._values[i]=t,s&&s._changed(u||65))}},o[f]=function(t){var r,a=this._owner,o=a&&a._children;if(i in this._defaults&&(!o||!o.length||t||a instanceof M)){var r=this._values[i];if(r===e)r=this._defaults[i],r&&r.clone&&(r=r.clone());else{var l=n?F:h?c:null;!l||r&&r.constructor===l||(this._values[i]=r=l.read([r],0,{readNull:!0,clone:!0}),r&&n&&(r._owner=a))}}else if(o)for(var u=0,d=o.length;d>u;u++){var p=o[u]._style[f]();if(u){if(!s.equals(r,p))return e}else r=p}return r},a[f]=function(t){return this._style[f](t)},a[d]=function(t){this._style[d](t)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var i="get"+e,n="set"+e;o[i]=a[i]="#get"+t,o[n]=a[n]="#set"+t}),b.inject(a),o},{set:function(t){this._values={};var e=t instanceof U,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var s=i[n];this[n]=s&&e&&s.clone?s.clone():s}},equals:function(t){function i(t,i,n){var r=t._values,a=i._values,o=i._defaults;for(var h in r){var l=r[h],u=a[h];if(!(n&&h in a||s.equals(l,u===e?o[h]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function wt(){var t=wt.base.call(this),e=this.getFontSize();return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),null!=t?t:1.2*e}}),H=new function(){function t(t,e,i,n){for(var s=["","webkit","moz","Moz","ms","o"],r=e[0].toUpperCase()+e.substring(1),a=0;6>a;a++){var o=s[a],h=o?o+r:e;if(h in t){if(!i)return t[h];t[h]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,s=n.body,r=n.documentElement;try{i=t.getBoundingClientRect()}catch(a){i={left:0,top:0,width:0,height:0}}var o=i.left-(r.clientLeft||s.clientLeft||0),h=i.top-(r.clientTop||s.clientTop||0);if(!e){var l=n.defaultView;o+=l.pageXOffset||r.scrollLeft||s.scrollLeft,h+=l.pageYOffset||r.scrollTop||s.scrollTop}return new g(o,h,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new g(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return H.getBounds(t,e).getPoint()},getSize:function(t){return H.getBounds(t,!0).getSize()},isInvisible:function(t){return H.getSize(t).equals(new f(0,0))},isInView:function(t){return!H.isInvisible(t)&&H.getViewportBounds(t).intersects(H.getBounds(t,!0))},isInserted:function(t){return n.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var s in i)t(e,s,!0,i[s]);else t(e,i,!0,n)}}},V={add:function(t,e){if(t)for(var i in e)for(var n=e[i],s=i.split(/[\s,]+/g),r=0,a=s.length;a>r;r++)t.addEventListener(s[r],n,!1)},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],s=i.split(/[\s,]+/g),r=0,a=s.length;a>r;r++)t.removeEventListener(s[r],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new c(e.pageX||e.clientX+n.documentElement.scrollLeft,e.pageY||e.clientY+n.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return V.getPoint(t).subtract(H.getOffset(e||V.getTarget(t)))}};V.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var i=0,a=e.length;a>i;i++)e[i]();s=n&&r.length,s&&n(t)}var e,n=H.getPrefixed(i,"requestAnimationFrame"),s=!1,r=[];return function(i){r.push(i),n?s||(n(t),s=!0):e||(e=setInterval(t,1e3/60))}};var q=s.extend(r,{_class:"View",initialize:function xt(t,e){function s(t){return e[t]||parseInt(e.getAttribute(t),10)}function r(){var t=H.getSize(e);return t.isNaN()||t.isZero()?new f(s("width"),s("height")):t}var o;if(i&&e){this._id=e.getAttribute("id"),null==this._id&&e.setAttribute("id",this._id="view-"+xt._id++),V.add(e,this._viewEvents);var h="none";if(H.setPrefixed(e.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(e,"resize")){var l=this;V.add(i,this._windowEvents={resize:function(){l.setViewSize(r())}})}if(o=r(),a.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var u=this._stats.domElement,c=u.style,d=H.getOffset(e);c.position="absolute",c.left=d.x+"px",c.top=d.y+"px",n.body.appendChild(u)}}else o=new f(e),e=null;this._project=t,this._scope=t._scope,this._element=e,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,xt._views.push(this),xt._viewsById[this._id]=this,(this._matrix=new m)._owner=this,xt._focused||(xt._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={"native":{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;q._focused===this&&(q._focused=null),q._views.splice(q._views.indexOf(this),1),delete q._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),V.remove(this._element,this._viewEvents),V.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(b._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;V.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;H.getPrefixed(n,"hidden")&&"true"!==a.getAttribute(e,"keepalive")||!H.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new s({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new s(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=f.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new g(new c,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return H.isInView(this._element)},isInserted:function(){return H.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var s=i.parentNode,r=n.createElement("div");r.style.fontSize=t,s.appendChild(r),e=parseFloat(H.getStyles(r).fontSize),s.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},s.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?s:c).read(arguments),n=c.read(arguments,0,{readNull:!0});return this.transform((new m)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new m;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=c.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new m).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return i?new d(i.x,i.y,this,"setScaling"):e},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(c.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(c.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(c.read(arguments))},getEventPoint:function(t){return this.viewToProject(V.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){n&&"string"==typeof e&&(e=n.getElementById(e));var s=i?Z:q;return new s(t,e)}}},new function(){function t(t){var e=V.getTarget(t);return e.getAttribute&&q._viewsById[e.getAttribute("id")]}function e(){var t=q._focused;if(!t||!t.isVisible())for(var e=0,i=q._views.length;i>e;e++)if((t=q._views[e]).isVisible()){q._focused=h=t;break}}function s(t,e,i){t._handleMouseEvent("mousemove",e,i)}function r(t,e,i,n,s,r,a){function o(t,i){if(t.responds(i)){if(h||(h=new Y(i,n,s,e||t,r?s.subtract(r):null)),t.emit(i,h)&&(T=!0,h.prevented&&(I=!0),h.stopped))return l=!0}else{var a=A[i];if(a)return o(t,a)}}for(var h,l=!1;t&&t!==a&&!o(t,i);)t=t._parent;return l}function a(t,e,i,n,s,a){return t._project.removeOn(i),I=T=!1,x&&r(x,null,i,n,s,a)||e&&e!==x&&!e.isDescendant(x)&&r(e,null,A[i]||i,n,s,a,x)||r(t,x||e||t,i,n,s,a)}if(i){var o,h,l,u,c,d=!1,f=!1,p=i.navigator;p.pointerEnabled||p.msPointerEnabled?(l="pointerdown MSPointerDown",u="pointermove MSPointerMove",c="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",u="touchmove",c="touchend touchcancel","ontouchstart"in i&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",u+=" mousemove",c+=" mouseup"));var g={},_={mouseout:function(t){var e=q._focused,i=V.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var n=V.getOffset(t,e._element),r=n.x,a=Math.abs,o=a(r),h=1<<25,l=o-h;n.x=a(l)<o?l*(0>r?-1:1):r,s(e,t,e.viewToProject(n))}},scroll:e};g[l]=function(e){var i=q._focused=t(e);d||(d=!0,i._handleMouseEvent("mousedown",e))},_[u]=function(i){var n=q._focused;if(!f){var r=t(i);r?n!==r&&(n&&s(n,i),o||(o=n),n=q._focused=h=r):h&&h===n&&(o&&!o.isInserted()&&(o=null),n=q._focused=o,o=null,e())}n&&s(n,i)},_[l]=function(){f=!0},_[c]=function(t){var e=q._focused;e&&d&&e._handleMouseEvent("mouseup",t),f=d=!1},V.add(n,_),V.add(i,{load:e});var m,v,y,b,w,x,C,k,S,T=!1,I=!1,A={doubleclick:"click",mousedrag:"mousemove"},E=!1,z={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(t,e,i){function n(t){return s.virtual[t]||u.responds(t)||l&&l.responds(t)}var s=this._itemEvents,o=s["native"][t],h="mousemove"===t,l=this._scope.tool,u=this;h&&d&&n("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var c=this.getBounds().contains(i),f=o&&c&&u._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),p=f&&f.item||null,g=!1,_={};_[t.substr(5)]=!0,o&&p!==w&&(w&&r(w,null,"mouseleave",e,i),p&&r(p,null,"mouseenter",e,i),w=p),E^c&&(r(this,null,c?"mouseenter":"mouseleave",e,i),m=c?this:null,g=!0),!c&&!_.drag||i.equals(y)||(a(this,p,h?t:"mousemove",e,i,y),g=!0),E=c,(_.down&&c||_.up&&v)&&(a(this,p,t,e,i,v),_.down?(S=p===C&&Date.now()-k<300,b=C=p,x=!I&&p,v=i):_.up&&(I||p!==b||(k=Date.now(),a(this,p,S?"doubleclick":"click",e,i,v),S=!1),b=x=null),E=!1,g=!0),y=i,g&&l&&(T=l._handleMouseEvent(t,e,i,_)||T),(T&&!_.move||_.down&&n("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){function s(s){s.responds(t)&&(paper=a,s.emit(t,r=r||new X(t,e,i,n)))}var r,a=this._scope,o=a.tool;this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i["native"],s=i.virtual;for(var r in z)n[r]=(n[r]||0)+(z[r][t]||0)*e;s[t]=(s[t]||0)+e},statics:{updateFocus:e}}}}),Z=q.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof i.HTMLCanvasElement)){var n=f.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));e=K.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(e,"hidpi"))){var o=i.devicePixelRatio||1,h=H.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=o/h}q.call(this,t,e),this._needsUpdate=!0},remove:function Ct(){return this._context.restore(),Ct.base.call(this)},_setElementSize:function kt(t,e){var i=this._pixelRatio;if(kt.base.call(this,t*i,e*i),1!==i){var n=this._element,s=this._context;if(!a.hasAttribute(n,"resize")){var r=n.style;r.width=t+"px",r.height=e+"px"}s.restore(),s.save(),s.scale(i,i)}},getPixelSize:function St(t){var e,i=paper.agent;if(i&&i.firefox)e=St.base.call(this,t);else{var n=this._context,s=n.font;n.font=t+" serif",e=parseFloat(n.font),n.font=s}return e},getTextWidth:function(t,e){var i=this._context,n=i.font,s=0;i.font=t;for(var r=0,a=e.length;a>r;r++)s=Math.max(s,i.measureText(e[r]).width);return i.font=n,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),W=s.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return G.modifiers}}),X=W.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),G=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e?String.fromCharCode(t.keyCode):e,o[e]||(e.length>1?s.hyphenate(e):e.toLowerCase())}function e(t,i,n,a){var o,h=q._focused;if(l[i]=t,t?u[i]=n:delete u[i],i.length>1&&(o=s.camelize(i))in c){c[o]=t;var d=paper&&paper.agent;if("meta"===o&&d&&d.mac)if(t)r={};else{for(var f in r)f in u&&e(!1,f,r[f],a);r=null}}else t&&r&&(r[i]=n);h&&h._handleKeyEvent(t?"keydown":"keyup",a,i,n)}var r,a,o={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"	",space:" ",enter:"\r"},l={},u={},c=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=paper&&paper.agent;return t&&t.mac?this.meta:this.control}}});return V.add(n,{keydown:function(i){var n=t(i),s=paper&&paper.agent;n.length>1||s&&s.chrome&&(i.altKey||s.mac&&i.metaKey||!s.mac&&i.ctrlKey)?e(!0,n,h[n]||(n.length>1?"":n),i):a=n},keypress:function(i){if(a){var n=t(i),s=i.charCode,r=s>=32?String.fromCharCode(s):n.length>1?"":n;n!==a&&(n=r.toLowerCase()),e(!0,n,r,i),a=null}},keyup:function(i){var n=t(i);n in u&&e(!1,n,u[n],i)}}),V.add(i,{blur:function(t){for(var i in u)e(!1,i,u[i],t)}}),{modifiers:c,isDown:function(t){return!!l[t]}}},Y=W.extend({_class:"MouseEvent",initialize:function(t,e,i,n,s){this.type=t,this.event=e,this.point=i,this.target=n,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),J=W.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=(o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t;
},_handleMouseEvent:function(t,e,i,n){function s(t,e){var s=i,r=a?c._point:c._downPoint||s;if(a){if(c._moveCount&&s.equals(r))return!1;if(r&&(null!=t||null!=e)){var o=s.subtract(r),h=o.getLength();if((t||0)>h)return!1;e&&(s=r.add(o.normalize(Math.min(h,e))))}c._moveCount++}return c._point=s,c._lastPoint=r||s,n.down&&(c._moveCount=-1,c._downPoint=s,c._downCount++),!0}function r(){o&&(u=c.emit(t,new J(c,t,e))||u)}paper=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var a=n.move||n.drag,o=this.responds(t),h=this.minDistance,l=this.maxDistance,u=!1,c=this;if(n.down)s(),r();else if(n.up)s(null,l),r();else if(o)for(;s(h,l);)r();return u}}),{request:function(e){var i=new t.XMLHttpRequest;return i.open((e.method||"get").toUpperCase(),e.url,s.pick(e.async,!0)),e.mimeType&&i.overrideMimeType(e.mimeType),i.onload=function(){var t=i.status;0===t||200===t?e.onLoad&&e.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var t=i.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},i.send(null)}}),K={canvases:[],getCanvas:function(t,e){if(!i)return null;var s,r=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?s=this.canvases.pop():(s=n.createElement("canvas"),r=!1);var a=s.getContext("2d");if(!a)throw new Error("Canvas "+s+" is unable to provide a 2D context.");return s.width===t&&s.height===e?r&&a.clearRect(0,0,t+1,e+1):(s.width=t,s.height=e),a.save(),s},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tt=new function(){function t(t,e,i){return.2989*t+.587*e+.114*i}function e(e,i,n,s){var r=s-t(e,i,n);f=e+r,p=i+r,g=n+r;var s=t(f,p,g),a=_(f,p,g),o=m(f,p,g);if(0>a){var h=s-a;f=s+(f-s)*s/h,p=s+(p-s)*s/h,g=s+(g-s)*s/h}if(o>255){var l=255-s,u=o-s;f=s+(f-s)*l/u,p=s+(p-s)*l/u,g=s+(g-s)*l/u}}function i(t,e,i){return m(t,e,i)-_(t,e,i)}function n(t,e,i,n){var s,r=[t,e,i],a=m(t,e,i),o=_(t,e,i);o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2,s=0===_(o,a)?1===m(o,a)?2:1:0,r[a]>r[o]?(r[s]=(r[s]-r[o])*n/(r[a]-r[o]),r[a]=n):r[s]=r[a]=0,r[o]=0,f=r[0],p=r[1],g=r[2]}var r,a,o,h,l,u,c,d,f,p,g,_=Math.min,m=Math.max,v=Math.abs,y={multiply:function(){f=l*r/255,p=u*a/255,g=c*o/255},screen:function(){f=l+r-l*r/255,p=u+a-u*a/255,g=c+o-c*o/255},overlay:function(){f=128>l?2*l*r/255:255-2*(255-l)*(255-r)/255,p=128>u?2*u*a/255:255-2*(255-u)*(255-a)/255,g=128>c?2*c*o/255:255-2*(255-c)*(255-o)/255},"soft-light":function(){var t=r*l/255;f=t+l*(255-(255-l)*(255-r)/255-t)/255,t=a*u/255,p=t+u*(255-(255-u)*(255-a)/255-t)/255,t=o*c/255,g=t+c*(255-(255-c)*(255-o)/255-t)/255},"hard-light":function(){f=128>r?2*r*l/255:255-2*(255-r)*(255-l)/255,p=128>a?2*a*u/255:255-2*(255-a)*(255-u)/255,g=128>o?2*o*c/255:255-2*(255-o)*(255-c)/255},"color-dodge":function(){f=0===l?0:255===r?255:_(255,255*l/(255-r)),p=0===u?0:255===a?255:_(255,255*u/(255-a)),g=0===c?0:255===o?255:_(255,255*c/(255-o))},"color-burn":function(){f=255===l?255:0===r?0:m(0,255-255*(255-l)/r),p=255===u?255:0===a?0:m(0,255-255*(255-u)/a),g=255===c?255:0===o?0:m(0,255-255*(255-c)/o)},darken:function(){f=r>l?l:r,p=a>u?u:a,g=o>c?c:o},lighten:function(){f=l>r?l:r,p=u>a?u:a,g=c>o?c:o},difference:function(){f=l-r,0>f&&(f=-f),p=u-a,0>p&&(p=-p),g=c-o,0>g&&(g=-g)},exclusion:function(){f=l+r*(255-l-l)/255,p=u+a*(255-u-u)/255,g=c+o*(255-c-c)/255},hue:function(){n(r,a,o,i(l,u,c)),e(f,p,g,t(l,u,c))},saturation:function(){n(l,u,c,i(r,a,o)),e(f,p,g,t(l,u,c))},luminosity:function(){e(l,u,c,t(r,a,o))},color:function(){e(r,a,o,t(l,u,c))},add:function(){f=_(l+r,255),p=_(u+a,255),g=_(c+o,255)},subtract:function(){f=m(l-r,0),p=m(u-a,0),g=m(c-o,0)},average:function(){f=(l+r)/2,p=(u+a)/2,g=(c+o)/2},negation:function(){f=255-v(255-r-l),p=255-v(255-a-u),g=255-v(255-o-c)}},b=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),w=K.getContext(1,1);w&&(s.each(y,function(t,e){var i="darken"===e,n=!1;w.save();try{w.fillStyle=i?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=i?"#a00":"#300",w.fillRect(0,0,1,1),n=w.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(s){}w.restore(),b[e]=n}),K.release(w)),this.process=function(t,e,i,n,s){var _=e.canvas,m="normal"===t;if(m||b[t])i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,m||(i.globalCompositeOperation=t),i.drawImage(_,s.x,s.y),i.restore();else{var v=y[t];if(!v)return;for(var w=i.getImageData(s.x,s.y,_.width,_.height),x=w.data,C=e.getImageData(0,0,_.width,_.height).data,k=0,S=x.length;S>k;k+=4){r=C[k],l=x[k],a=C[k+1],u=x[k+1],o=C[k+2],c=x[k+2],h=C[k+3],d=x[k+3],v();var T=h*n/255,I=1-T;x[k]=T*f+I*l,x[k+1]=T*p+I*u,x[k+2]=T*g+I*c,x[k+3]=h*n+I*d}i.putImageData(w,s.x,s.y)}}},et=new function(){function t(t,e,r){return i(n.createElementNS(s,t),e,r)}function e(t,e){var i=o[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n}function i(t,e,i){for(var n in e){var s=e[n],r=o[n];"number"==typeof s&&i&&(s=i.number(s)),r?t.setAttributeNS(r,n,s):t.setAttribute(n,s)}return t}var s="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",a="http://www.w3.org/1999/xlink",o={href:a,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:s,xmlns:r,xlink:a,create:t,get:e,set:i}},it=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(t,e){return!e&&(t instanceof P||t instanceof C||t instanceof R)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=s.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&s.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});return new function(){function e(t,e,i){var n=new s,r=t.getTranslation();if(e){t=t._shiftless();var a=t._inverseTransform(r);n[i?"cx":"x"]=a.x,n[i?"cy":"y"]=a.y,r=null}if(!t.isIdentity()){var o=t.decompose();if(o){var h=[],u=o.rotation,c=o.scaling,d=o.skewing;r&&!r.isZero()&&h.push("translate("+k.point(r)+")"),u&&h.push("rotate("+k.number(u)+")"),l.isZero(c.x-1)&&l.isZero(c.y-1)||h.push("scale("+k.point(c)+")"),d&&d.x&&h.push("skewX("+k.number(d.x)+")"),d&&d.y&&h.push("skewY("+k.number(d.y)+")"),n.transform=h.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function i(t,i){for(var n=e(t._matrix),s=t._children,r=et.create("g",n,k),a=0,o=s.length;o>a;a++){var h=s[a],l=x(h,i);if(l)if(h.isClipMask()){var u=et.create("clipPath");u.appendChild(l),v(h,u,"clip"),et.set(r,{"clip-path":"url(#"+u.id+")"})}else r.appendChild(l)}return r}function n(t,i){var n=e(t._matrix,!0),s=t.getSize(),r=t.getImage();return n.x-=s.width/2,n.y-=s.height/2,n.width=s.width,n.height=s.height,n.href=i.embedImages===!1&&r&&r.src||t.toDataURL(),et.create("image",n,k)}function r(t,i){var n=i.matchShapes;if(n){var s=t.toShape(!1);if(s)return a(s,i)}var r,o=t._segments,h=o.length,l=e(t._matrix);if(n&&h>=2&&!t.hasHandles())if(h>2){r=t._closed?"polygon":"polyline";for(var u=[],c=0;h>c;c++)u.push(k.point(o[c]._point));l.points=u.join(" ")}else{r="line";var d=o[0]._point,f=o[1]._point;l.set({x1:d.x,y1:d.y,x2:f.x,y2:f.y})}else r="path",l.d=t.getPathData(null,i.precision);return et.create(r,l,k)}function a(t){var i=t._type,n=t._radius,s=e(t._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var r=t._size,a=r.width,o=r.height;s.x-=a/2,s.y-=o/2,s.width=a,s.height=o,n.isZero()&&(n=null)}return n&&("circle"===i?s.r=n:(s.rx=n.width,s.ry=n.height)),et.create(i,s,k)}function o(t,i){var n=e(t._matrix),s=t.getPathData(null,i.precision);return s&&(n.d=s),et.create("path",n,k)}function c(t,i){var n=e(t._matrix,!0),s=t._definition,r=_(s,"symbol"),a=s._item,o=a.getBounds();return r||(r=et.create("symbol",{viewBox:k.rectangle(o)}),r.appendChild(x(a,i)),v(s,r,"symbol")),n.href="#"+r.id,n.x+=o.x,n.y+=o.y,n.width=o.width,n.height=o.height,n.overflow="visible",et.create("use",n,k)}function d(t){var e=_(t,"color");if(!e){var i,n=t.getGradient(),s=n._radial,r=t.getOrigin(),a=t.getDestination();if(s){i={cx:r.x,cy:r.y,r:r.getDistance(a)};var o=t.getHighlight();o&&(i.fx=o.x,i.fy=o.y)}else i={x1:r.x,y1:r.y,x2:a.x,y2:a.y};i.gradientUnits="userSpaceOnUse",e=et.create((s?"radial":"linear")+"Gradient",i,k);for(var h=n._stops,l=0,u=h.length;u>l;l++){var c=h[l],d=c._color,f=d.getAlpha();i={offset:c._offset||l/(u-1)},d&&(i["stop-color"]=d.toCSS(!0)),1>f&&(i["stop-opacity"]=f),e.appendChild(et.create("stop",i,k))}v(t,e,"color")}return"url(#"+e.id+")"}function f(t){var i=et.create("text",e(t._matrix,!0),k);return i.textContent=t._content,i}function p(t,e,i){var n={},r=!i&&t.getParent(),a=[];return null!=t._name&&(n.id=t._name),s.each(it,function(e){var i=e.get,o=e.type,h=t[i]();if(e.exportFilter?e.exportFilter(t,h):!r||!s.equals(r[i](),h)){if("color"===o&&null!=h){var l=h.getAlpha();1>l&&(n[e.attribute+"-opacity"]=l)}"style"===o?a.push(e.attribute+": "+h):n[e.attribute]=null==h?"none":"color"===o?h.gradient?d(h,t):h.toCSS(!0):"array"===o?h.join(","):"lookup"===o?e.toSVG[h]:h}}),a.length&&(n.style=a.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),et.set(e,n,k)}function _(t,e){return S||(S={ids:{},svgs:{}}),t&&S.svgs[e+"-"+(t._id||t.__id||(t.__id=u.get("svg")))]}function v(t,e,i){S||_();var n=S.ids[i]=(S.ids[i]||0)+1;e.id=i+"-"+n,S.svgs[i+"-"+(t._id||t.__id)]=e}function w(e,i){var n=e,s=null;if(S){n="svg"===e.nodeName.toLowerCase()&&e;for(var r in S.svgs)s||(n||(n=et.create("svg"),n.appendChild(e)),s=n.insertBefore(et.create("defs"),n.firstChild)),s.appendChild(S.svgs[r]);S=null}return i.asString?(new t.XMLSerializer).serializeToString(n):n}function x(t,e,i){var n=T[t._class],s=n&&n(t,e);if(s){var r=e.onExport;r&&(s=r(t,s,e)||s);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&s.setAttribute("data-paper-data",a)}return s&&p(t,s,i)}function C(t){return t||(t={}),k=new h(t.precision),t}var k,S,T={Group:i,Layer:i,Raster:n,Path:r,Shape:a,CompoundPath:o,SymbolItem:c,PointText:f};b.inject({exportSVG:function(t){return t=C(t),w(x(this,t,!0),t)}}),y.inject({exportSVG:function(t){t=C(t);var i=this._children,n=this.getView(),r=s.pick(t.bounds,"view"),a=t.matrix||"view"===r&&n._matrix,o=a&&m.read([a]),h="view"===r?new g([0,0],n.getViewSize()):"content"===r?b._getBounds(i,o,{stroke:!0}):g.read([r],0,{readNull:!0}),l={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};h&&(l.width=h.width,l.height=h.height,(h.x||h.y)&&(l.viewBox=k.rectangle(h)));var u=et.create("svg",l,k),c=u;o&&!o.isIdentity()&&(c=u.appendChild(et.create("g",e(o),k)));for(var d=0,f=i.length;f>d;d++)c.appendChild(x(i[d],t,!0));return w(u,t)}})},new function(){function r(t,e,i,n,s){var r=et.get(t,e),a=null==r?n?null:i?"":0:i?r:parseFloat(r);return/%\s*$/.test(r)?a/100*(s?1:z[/x|^width/.test(e)?"width":"height"]):a}function a(t,e,i,n,s){return e=r(t,e||"x",!1,n,s),i=r(t,i||"y",!1,n,s),!n||null!=e&&null!=i?new c(e,i):null}function o(t,e,i,n,s){return e=r(t,e||"width",!1,n,s),i=r(t,i||"height",!1,n,s),!n||null!=e&&null!=i?new f(e,i):null}function h(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?I(t)||t:"lookup"===e?i[t]:t}function l(t,e,i,n){var s=t.childNodes,r="clippath"===e,a="defs"===e,o=new w,h=o._project,l=h._currentStyle,u=[];if(r||a||(o=S(o,t,n),h._currentStyle=o._style.clone()),n)for(var c=t.querySelectorAll("defs"),d=0,f=c.length;f>d;d++)A(c[d],i,!1);for(var d=0,f=s.length;f>d;d++){var p,g=s[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=A(g,i,!1))||p instanceof T||u.push(p)}return o.addChildren(u),r&&(o=S(o.reduce(),t,n)),h._currentStyle=l,(r||a)&&(o.remove(),o=null),o}function u(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],s=0,r=i.length;r>s;s+=2)n.push(new c(parseFloat(i[s]),parseFloat(i[s+1])));var a=new L(n);return"polygon"===e&&a.closePath(),a}function d(t){return P.create(t.getAttribute("d"))}function p(t,e){var i,n=(r(t,"href",!0)||"").substring(1),s="radialgradient"===e;if(n)i=O[n].getGradient(),i._radial^s&&(i=i.clone(),i._radial=s);else{for(var o=t.childNodes,h=[],l=0,u=o.length;u>l;l++){var c=o[l];1===c.nodeType&&h.push(S(new j,c))}i=new $(h,s)}var d,f,p,g="userSpaceOnUse"!==r(t,"gradientUnits",!0);s?(d=a(t,"cx","cy",!1,g),f=d.add(r(t,"r",!1,!1,g),0),p=a(t,"fx","fy",!0,g)):(d=a(t,"x1","y1",!1,g),f=a(t,"x2","y2",!1,g));var _=S(new F(i,d,f,p),t);return _._scaleToBounds=g,null}function _(t,e,i,n){if(t.transform){for(var s=(n.getAttribute(i)||"").split(/\)\s*/g),r=new m,a=0,o=s.length;o>a;a++){var h=s[a];if(!h)break;for(var l=h.split(/\(\s*/),u=l[0],c=l[1].split(/[\s,]+/g),d=0,f=c.length;f>d;d++)c[d]=parseFloat(c[d]);switch(u){case"matrix":r.append(new m(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":r.rotate(c[0],c[1],c[2]);break;case"translate":r.translate(c[0],c[1]);break;case"scale":r.scale(c);break;case"skewX":r.skew(c[0],0);break;case"skewY":r.skew(0,c[0])}}t.transform(r)}}function v(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",s=t[n]&&t[n]();s&&s.setAlpha(parseFloat(e))}function x(t,i,n){var r=t.attributes[i],a=r&&r.value;if(!a){var o=s.camelize(i);a=t.style[o],a||n.node[o]===n.parent[o]||(a=n.node[o])}return a?"none"===a?null:a:e}function S(t,i,n){var r=i.parentNode,a={node:H.getStyles(i)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&H.getStyles(r)||{}};return s.each(N,function(n,s){var r=x(i,s,a);t=r!==e&&n(t,r,s,i,a)||t}),t}function I(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],s=n&&O[i?n.replace(i.location.href.split("#")[0]+"#",""):n];return s&&s._scaleToBounds&&(s=s.clone(),s._scaleToBounds=!0),s}function A(t,e,i){var r,a,h,l=t.nodeName.toLowerCase(),u="#document"!==l,c=n.body;i&&u&&(z=o(t,null,null,!0)||paper.getView().getSize(),r=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=t.parentNode,h=t.nextSibling,r.appendChild(t),c.appendChild(r));var d=paper.settings,f=d.applyMatrix,p=d.insertItems;d.applyMatrix=!1,d.insertItems=!1;var g=M[l],_=g&&g(t,l,e,i)||null;if(d.insertItems=p,d.applyMatrix=f,_){!u||_ instanceof w||(_=S(_,t,i));var m=e.onImport,v=u&&t.getAttribute("data-paper-data");m&&(_=m(t,_,e)||_),e.expandShapes&&_ instanceof C&&(_.remove(),_=_.toPath()),v&&(_._data=JSON.parse(v))}return r&&(c.removeChild(r),a&&(h?a.insertBefore(t,h):a.appendChild(t))),i&&(O={},_&&s.pick(e.applyMatrix,f)&&_.matrix.apply(!0,!0)),_}function E(i,s,r){function a(n){try{var a="object"==typeof n?n:(new t.DOMParser).parseFromString(n,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+i);paper=h,l=A(a,s,!0),s&&s.insert===!1||r._insertItem(e,l);var u=s.onLoad;u&&u(l,n)}catch(c){o(c)}}function o(t,e){var i=s.onError;if(!i)throw new Error(t);i(t,e)}if(!i)return null;s="function"==typeof s?{onLoad:s}:s||{};var h=paper,l=null;if("string"!=typeof i||/^.*</.test(i)){if("undefined"!=typeof File&&i instanceof File){var u=new FileReader;return u.onload=function(){a(u.result)},u.onerror=function(){o(u.error)},u.readAsText(i)}a(i)}else{var c=n.getElementById(i);c?a(c):Q.request({url:i,async:!0,onLoad:a,onError:o})}return l}var z,O={},M={"#document":function(t,e,i,n){for(var s=t.childNodes,r=0,a=s.length;a>r;r++){var o=s[r];if(1===o.nodeType)return A(o,i,n)}},g:l,svg:l,clippath:l,polygon:u,polyline:u,path:d,lineargradient:p,radialgradient:p,image:function(t){var e=new k(r(t,"href",!0));return e.on("load",function(){var e=o(t);this.setSize(e);var i=this._matrix._transformPoint(a(t).add(e.divide(2)));this.translate(i)}),e},symbol:function(t,e,i,n){return new T(l(t,e,i,n),!0)},defs:l,use:function(t){var e=(r(t,"href",!0)||"").substring(1),i=O[e],n=a(t);return i?i instanceof T?i.place(n):i.clone().translate(n):null},circle:function(t){return new C.Circle(a(t,"cx","cy"),r(t,"r"))},ellipse:function(t){return new C.Ellipse({center:a(t,"cx","cy"),radius:o(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new g(a(t),o(t)),o(t,"rx","ry"))},line:function(t){return new L.Line(a(t,"x1","y1"),a(t,"x2","y2"))},text:function(t){var e=new D(a(t).add(a(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},N=s.set(s.each(it,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](h(i,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n){if(n._scaleToBounds){var s=e.getBounds();n.transform((new m).translate(s.getPoint()).scale(s.getSize()))}e instanceof C&&n.transform((new m).translate(e.getPosition(!0).negate()))}}}},{}),{id:function(t,e){O[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=I(e);if(i){if(i=i.clone(),i.setClipMask(!0),!(t instanceof w))return new w(i,t);t.insertChild(0,i)}},gradientTransform:_,transform:_,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,n,s){var r,a,l=new g(h(e,"array")),u=o(n,null,null,!0);if(t instanceof w){var c=u?u.divide(l.getSize()):1,a=(new m).scale(c).translate(l.getPoint().negate());r=t}else t instanceof T&&(u&&l.setSize(u),r=t._item);if(r){if("visible"!==x(n,"overflow",s)){var d=new C.Rectangle(l);d.setClipMask(!0),r.addChild(d)}a&&r.transform(a)}}});b.inject({importSVG:function(t,e){return E(t,e,this)}}),y.inject({importSVG:function(t,e){return this.activate(),E(t,e,this)}})},paper=new(a.inject(s.exports,{enumerable:!0,Base:s,Numerical:l,Key:G,DomEvent:V,DomElement:H,document:n,window:i,PlacedSymbol:S})),paper.agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);